{"version":3,"file":"hierarchy.js","mappings":"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","sources":["webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/HierarchyDefaultTheme.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/BreadcrumbBar.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/HierarchyNode.ts","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/count.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/each.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/find.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/sum.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/sort.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/path.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/ancestors.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/descendants.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/leaves.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/links.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/hierarchy/iterator.js","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/Hierarchy.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/LinkedHierarchyNode.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/HierarchyLink.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/LinkedHierarchy.ts","webpack://@amcharts/amcharts5/./node_modules/d3-force/src/lcg.js","webpack://@amcharts/amcharts5/./node_modules/d3-force/src/simulation.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/add.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/quad.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/x.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/y.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/quadtree.js","webpack://@amcharts/amcharts5/./node_modules/d3-force/src/constant.js","webpack://@amcharts/amcharts5/./node_modules/d3-force/src/jiggle.js","webpack://@amcharts/amcharts5/./node_modules/d3-force/src/collide.js","webpack://@amcharts/amcharts5/./node_modules/d3-force/src/link.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/cover.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/data.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/extent.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/find.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/remove.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/root.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/size.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/visit.js","webpack://@amcharts/amcharts5/./node_modules/d3-quadtree/src/visitAfter.js","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/ForceDirected.ts","webpack://@amcharts/amcharts5/./node_modules/d3-force/src/x.js","webpack://@amcharts/amcharts5/./node_modules/d3-force/src/y.js","webpack://@amcharts/amcharts5/./node_modules/d3-force/src/manyBody.js","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/Pack.ts","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/treemap/round.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/treemap/dice.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/partition.js","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/Partition.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/Sunburst.ts","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/tree.js","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/Tree.ts","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/treemap/slice.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/treemap/squarify.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/treemap/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/treemap/binary.js","webpack://@amcharts/amcharts5/./node_modules/d3-hierarchy/src/treemap/sliceDice.js","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/Treemap.ts","webpack://@amcharts/amcharts5/./src/.internal/charts/hierarchy/VoronoiTreemap.ts","webpack://@amcharts/amcharts5/./node_modules/d3-polygon/src/area.js","webpack://@amcharts/amcharts5/./node_modules/d3-polygon/src/centroid.js","webpack://@amcharts/amcharts5/./node_modules/d3-polygon/src/hull.js","webpack://@amcharts/amcharts5/./node_modules/d3-polygon/src/cross.js","webpack://@amcharts/amcharts5/./node_modules/d3-polygon/src/contains.js","webpack://@amcharts/amcharts5/./node_modules/d3-polygon/src/length.js","webpack://@amcharts/amcharts5/./node_modules/d3-voronoi-map/build/d3-voronoi-map.js","webpack://@amcharts/amcharts5/./node_modules/d3-voronoi-map/node_modules/d3-dispatch/src/dispatch.js","webpack://@amcharts/amcharts5/./node_modules/d3-voronoi-map/node_modules/d3-timer/src/timer.js","webpack://@amcharts/amcharts5/./node_modules/d3-voronoi-map/node_modules/d3-timer/src/timeout.js","webpack://@amcharts/amcharts5/./node_modules/d3-voronoi-map/node_modules/d3-timer/src/interval.js","webpack://@amcharts/amcharts5/./node_modules/d3-voronoi-treemap/build/d3-voronoi-treemap.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/build/d3-weighted-voronoi.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/ascending.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/bisector.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/number.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/bisect.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/count.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/cross.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/cumsum.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/descending.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/variance.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/deviation.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/extent.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/fsum.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/internmap/src/index.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/identity.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/group.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/permute.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/sort.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/groupSort.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/array.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/constant.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/ticks.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/nice.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/threshold/sturges.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/bin.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/max.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/min.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/quickselect.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/quantile.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/threshold/freedmanDiaconis.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/threshold/scott.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/maxIndex.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/mean.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/median.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/merge.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/minIndex.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/pairs.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/range.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/least.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/leastIndex.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/greatest.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/greatestIndex.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/scan.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/shuffle.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/sum.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/transpose.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/zip.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/every.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/some.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/filter.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/map.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/reduce.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/reverse.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/difference.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/disjoint.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/set.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/intersection.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/superset.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/subset.js","webpack://@amcharts/amcharts5/./node_modules/d3-weighted-voronoi/node_modules/d3-array/src/union.js","webpack://@amcharts/amcharts5/./node_modules/seedrandom/index.js","webpack://@amcharts/amcharts5/./node_modules/seedrandom/lib/alea.js","webpack://@amcharts/amcharts5/./node_modules/seedrandom/lib/tychei.js","webpack://@amcharts/amcharts5/./node_modules/seedrandom/lib/xor128.js","webpack://@amcharts/amcharts5/./node_modules/seedrandom/lib/xor4096.js","webpack://@amcharts/amcharts5/./node_modules/seedrandom/lib/xorshift7.js","webpack://@amcharts/amcharts5/./node_modules/seedrandom/lib/xorwow.js","webpack://@amcharts/amcharts5/./node_modules/seedrandom/seedrandom.js","webpack://@amcharts/amcharts5/./tmp/webpack/hierarchy.js"],"sourcesContent":["import { Theme } from \"../../core/Theme\";\r\nimport { percent, p100, p50 } from \"../../core/util/Percent\";\r\nimport { ColorSet } from \"../../core/util/ColorSet\";\r\nimport { setColor } from \"../../themes/DefaultTheme\";\r\n\r\nimport * as $ease from \"../../core/util/Ease\";\r\n\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport class HierarchyDefaultTheme extends Theme {\r\n\tprotected setupDefaultRules() {\r\n\t\tsuper.setupDefaultRules();\r\n\r\n\t\tconst ic = this._root.interfaceColors;\r\n\t\tconst gridLayout = this._root.gridLayout;\r\n\t\tconst r = this.rule.bind(this);\r\n\r\n\t\t/**\r\n\t\t * ========================================================================\r\n\t\t * charts/hierarchy\r\n\t\t * ========================================================================\r\n\t\t */\r\n\r\n\t\tr(\"Hierarchy\").setAll({\r\n\t\t\tlegendLabelText: \"{category}\",\r\n\t\t\tlegendValueText: \"{sum.formatNumber('#.#')}\",\r\n\t\t\twidth: p100,\r\n\t\t\theight: p100,\r\n\t\t\tcolors: ColorSet.new(this._root, { step: 2 }),\r\n\t\t\tdownDepth: 1,\r\n\t\t\tinitialDepth: 5,\r\n\t\t\tsingleBranchOnly: true,\r\n\t\t\tmaskContent: true,\r\n\t\t\tanimationEasing: $ease.out($ease.cubic)\r\n\t\t});\r\n\r\n\t\tr(\"HierarchyNode\").setAll({\r\n\t\t\ttoggleKey: \"disabled\",\r\n\t\t\tsetStateOnChildren: true,\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tisMeasured: false,\r\n\t\t\tcursorOverStyle: \"pointer\",\r\n\t\t\ttooltipText: \"{category}: {sum}\"\r\n\t\t});\r\n\r\n\t\tr(\"HierarchyNode\", [\"last\"]).setAll({\r\n\t\t\tcursorOverStyle: \"default\"\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Label\", [\"hierarchy\", \"node\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tcenterX: p50,\r\n\t\t\t\tcenterY: p50,\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\tpaddingBottom: 1,\r\n\t\t\t\tpaddingTop: 1,\r\n\t\t\t\tpaddingRight: 4,\r\n\t\t\t\tpaddingLeft: 4,\r\n\t\t\t\ttext: \"{category}\",\r\n\t\t\t\tpopulateText: true,\r\n\t\t\t\toversizedBehavior: \"fit\",\r\n\t\t\t\tminScale: 0.3\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"alternativeText\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"HierarchyLink\");\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tisMeasured: false,\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\tstrokeWidth: 1,\r\n\t\t\t\tstrokeOpacity: 1,\r\n\t\t\t\tstrength: 0.9,\r\n\t\t\t\tdistance: 1.1\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"grid\");\r\n\t\t}\r\n\r\n\t\tr(\"Circle\", [\"linkedhierarchy\", \"shape\"]).setAll({\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tfillOpacity: 1,\r\n\t\t\tstrokeOpacity: 0,\r\n\t\t\tradius: 15,\r\n\t\t\ttooltipY: 0\r\n\t\t});\r\n\r\n\t\tr(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).setAll({\r\n\t\t\tposition: \"absolute\",\r\n\t\t\topacity: 1,\r\n\t\t\tfillOpacity: 0,\r\n\t\t\tstrokeDasharray: 0,\r\n\t\t\tstrokeOpacity: 1,\r\n\t\t\tradius: 15,\r\n\t\t\tscale: 1.1,\r\n\t\t\tinteractive: false\r\n\t\t})\r\n\r\n\t\tr(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).states.create(\"disabled\", { opacity: 1, scale: 1.1, strokeDasharray: 2 });\r\n\t\tr(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).states.create(\"hoverDisabled\", { scale: 1.2, opacity: 1, strokeDasharray: 2 });\r\n\t\tr(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).states.create(\"hover\", { scale: 1.05, strokeDasharray: 0 });\r\n\t\tr(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).states.create(\"hidden\", { opacity: 0, strokeDasharray: 0 });\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/hierarchy: BreadcrumbBar\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"BreadcrumbBar\").setAll({\r\n\t\t\tpaddingLeft: 8,\r\n\t\t\tlayout: gridLayout\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Label\", [\"breadcrumb\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tpaddingRight: 4,\r\n\t\t\t\tpaddingLeft: 4,\r\n\t\t\t\tcursorOverStyle: \"pointer\",\r\n\t\t\t\tpopulateText: true,\r\n\t\t\t\ttext: \"{category}:\",\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"primaryButton\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Label\", [\"breadcrumb\"]).states.create(\"hover\", {});\r\n\t\t\tsetColor(rule, \"fill\", ic, \"primaryButtonHover\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Label\", [\"breadcrumb\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n\t\t\tsetColor(rule, \"fill\", ic, \"primaryButtonDown\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Label\", [\"breadcrumb\", \"last\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tpopulateText: true,\r\n\t\t\t\ttext: \"{category}\",\r\n\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\tcursorOverStyle: \"default\"\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"primaryButton\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"RoundedRectangle\", [\"breadcrumb\", \"label\", \"background\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tfillOpacity: 0,\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"background\");\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/hierarchy: Partition\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"Partition\").setAll({\r\n\t\t\tdownDepth: 1,\r\n\t\t\tupDepth: 0,\r\n\t\t\tinitialDepth: 5\r\n\t\t});\r\n\r\n\t\tr(\"HierarchyNode\", [\"partition\"]).setAll({\r\n\t\t\tsetStateOnChildren: false\r\n\t\t});\r\n\r\n\t\tr(\"HierarchyNode\", [\"partition\"]).states.create(\"hidden\", {\r\n\t\t\topacity: 1,\r\n\t\t\tvisible: true\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Label\", [\"partition\", \"node\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tx: p50,\r\n\t\t\t\ty: p50,\r\n\t\t\t\tcenterY: p50,\r\n\t\t\t\tcenterX: p50,\r\n\t\t\t\tpaddingBottom: 1,\r\n\t\t\t\tpaddingTop: 1,\r\n\t\t\t\tpaddingLeft: 1,\r\n\t\t\t\tpaddingRight: 1,\r\n\t\t\t\trotation: 90,\r\n\t\t\t\tpopulateText: true,\r\n\t\t\t\ttext: \"{category}\",\r\n\t\t\t\toversizedBehavior: \"fit\",\r\n\t\t\t\tminScale: 0.4\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"alternativeText\");\r\n\t\t}\r\n\r\n\t\tr(\"Label\", [\"horizontal\", \"partition\", \"node\"]).setAll({\r\n\t\t\trotation: 0\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"RoundedRectangle\", [\"partition\", \"node\", \"shape\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tstrokeOpacity: 1,\r\n\t\t\t\tstrokeWidth: 1,\r\n\t\t\t\tcornerRadiusBR: 0,\r\n\t\t\t\tcornerRadiusTR: 0,\r\n\t\t\t\tcornerRadiusBL: 0,\r\n\t\t\t\tcornerRadiusTL: 0\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"background\");\r\n\t\t}\r\n\r\n\t\tr(\"RoundedRectangle\", [\"partition\", \"node\", \"shape\", \"last\"]).setAll({\r\n\t\t\tfillOpacity: 0.75\r\n\t\t});\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/hierarchy: Sunburst\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"Sunburst\").setAll({\r\n\t\t\tsingleBranchOnly: true\r\n\t\t});\r\n\r\n\t\tr(\"HierarchyNode\", [\"sunburst\"]).setAll({\r\n\t\t\tsetStateOnChildren: false\r\n\t\t});\r\n\r\n\t\tr(\"HierarchyNode\", [\"sunburst\"]).states.create(\"hidden\", {\r\n\t\t\topacity: 0,\r\n\t\t\tvisible: false\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Slice\", [\"sunburst\", \"node\", \"shape\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tstrokeOpacity: 1,\r\n\t\t\t\tstrokeWidth: 1,\r\n\t\t\t\tcornerRadius: 0\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"background\");\r\n\t\t}\r\n\r\n\t\tr(\"Slice\", [\"sunburst\", \"node\", \"shape\", \"last\"]).setAll({\r\n\t\t\tfillOpacity: 0.75\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"RadialLabel\", [\"sunburst\", \"node\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\ttextType: \"radial\",\r\n\t\t\t\tpaddingBottom: 1,\r\n\t\t\t\tpaddingTop: 1,\r\n\t\t\t\tpaddingLeft: 1,\r\n\t\t\t\tpaddingRight: 1,\r\n\t\t\t\tcenterX: p50,\r\n\t\t\t\tpopulateText: true,\r\n\t\t\t\ttext: \"{category}\",\r\n\t\t\t\toversizedBehavior: \"fit\",\r\n\t\t\t\tminScale: 0.4,\r\n\t\t\t\tbaseRadius: p50,\r\n\t\t\t\trotation: 0\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"alternativeText\");\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/hierarchy: ForceDirected\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"ForceDirected\").setAll({\r\n\t\t\tminRadius: percent(1),\r\n\t\t\tmaxRadius: percent(8),\r\n\t\t\tinitialFrames: 500,\r\n\t\t\tcenterStrength: 0.8,\r\n\t\t\tmanyBodyStrength: -14,\r\n\t\t\tvelocityDecay: 0.5,\r\n\t\t\tlinkWithStrength: 0.5,\r\n\t\t\tshowOnFrame: 10,\r\n\t\t\tsingleBranchOnly: false,\r\n\t\t\tupDepth: Infinity,\r\n\t\t\tdownDepth: 1,\r\n\t\t\tinitialDepth: 5,\r\n\t\t\ttopDepth: 0\r\n\t\t});\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/hierarchy: Tree\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"Tree\").setAll({\r\n\t\t\torientation: \"vertical\",\r\n\t\t\tpaddingLeft: 20,\r\n\t\t\tpaddingRight: 20,\r\n\t\t\tpaddingTop: 20,\r\n\t\t\tpaddingBottom: 20,\r\n\t\t\tsingleBranchOnly: false,\r\n\t\t\tupDepth: Infinity,\r\n\t\t\tdownDepth: 1,\r\n\t\t\tinitialDepth: 5,\r\n\t\t\ttopDepth: 0\r\n\t\t});\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/hierarchy: Pack\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"Pack\").setAll({\r\n\t\t\tpaddingLeft: 20,\r\n\t\t\tpaddingTop: 20,\r\n\t\t\tpaddingBottom: 20,\r\n\t\t\tpaddingRight: 20,\r\n\t\t\tnodePadding: 0\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Label\", [\"pack\", \"node\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tcenterY: p50,\r\n\t\t\t\tcenterX: p50,\r\n\t\t\t\tpaddingBottom: 1,\r\n\t\t\t\tpaddingTop: 1,\r\n\t\t\t\tpaddingLeft: 1,\r\n\t\t\t\tpaddingRight: 1,\r\n\t\t\t\tpopulateText: true,\r\n\t\t\t\ttext: \"{category}\",\r\n\t\t\t\toversizedBehavior: \"fit\",\r\n\t\t\t\tminScale: 0.4\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"alternativeText\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Circle\", [\"pack\", \"node\", \"shape\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tstrokeOpacity: 0.5,\r\n\t\t\t\tfillOpacity: 0.8,\r\n\t\t\t\tstrokeWidth: 1,\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"background\");\r\n\t\t}\r\n\r\n\r\n\t\tr(\"LinkedHierarchyNode\").setAll({\r\n\t\t\tdraggable: true\r\n\t\t});\r\n\r\n\t\tr(\"LinkedHierarchyNode\").states.create(\"hidden\", { scale: 0, opacity: 0, visible: false });\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/hierarchy: Treemap\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\tr(\"Treemap\").setAll({\r\n\t\t\tupDepth: 0,\r\n\t\t\tlayoutAlgorithm: \"squarify\"\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Label\", [\"treemap\", \"node\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tx: p50,\r\n\t\t\t\ty: p50,\r\n\t\t\t\tcenterY: p50,\r\n\t\t\t\tcenterX: p50,\r\n\t\t\t\tpaddingBottom: 1,\r\n\t\t\t\tpaddingTop: 1,\r\n\t\t\t\tpaddingLeft: 1,\r\n\t\t\t\tpaddingRight: 1,\r\n\t\t\t\tpopulateText: true,\r\n\t\t\t\ttext: \"{category}\",\r\n\t\t\t\toversizedBehavior: \"fit\",\r\n\t\t\t\tminScale: 0.4\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"alternativeText\");\r\n\t\t}\r\n\r\n\t\tr(\"HierarchyNode\", [\"treemap\", \"node\"]).setAll({\r\n\t\t\ttooltipY: percent(40),\r\n\t\t\tisMeasured: false,\r\n\t\t\tposition: \"absolute\"\r\n\t\t});\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"RoundedRectangle\", [\"treemap\", \"node\", \"shape\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tstrokeOpacity: 1,\r\n\t\t\t\tstrokeWidth: 1,\r\n\t\t\t\tcornerRadiusBR: 0,\r\n\t\t\t\tcornerRadiusTR: 0,\r\n\t\t\t\tcornerRadiusBL: 0,\r\n\t\t\t\tcornerRadiusTL: 0,\r\n\t\t\t\tfillOpacity: 1\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"background\");\r\n\t\t}\r\n\r\n\r\n\t\t/**\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t * charts/hierarchy: Voronoi Treemap\r\n\t\t * ------------------------------------------------------------------------\r\n\t\t */\r\n\r\n\t\t{\r\n\t\t\tr(\"VoronoiTreemap\").setAll({\r\n\t\t\t\ttype: \"polygon\",\r\n\t\t\t\tminWeightRatio: 0.005,\r\n\t\t\t\tconvergenceRatio: 0.005,\r\n\t\t\t\tmaxIterationCount: 100,\r\n\t\t\t\tsingleBranchOnly: true\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Graphics\", [\"voronoitreemap\", \"node\", \"shape\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tstrokeOpacity: 1,\r\n\t\t\t\tstrokeWidth: 1,\r\n\t\t\t\tfillOpacity: 1\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"stroke\", ic, \"background\");\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tr(\"Polygon\", [\"hierarchy\", \"node\", \"shape\", \"depth1\"]).setAll({\r\n\t\t\t\tstrokeWidth: 3\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tconst rule = r(\"Label\", [\"voronoitreemap\"]);\r\n\r\n\t\t\trule.setAll({\r\n\t\t\t\tcenterY: p50,\r\n\t\t\t\tcenterX: p50,\r\n\t\t\t\tpaddingBottom: 1,\r\n\t\t\t\tpaddingTop: 1,\r\n\t\t\t\tpaddingLeft: 1,\r\n\t\t\t\tpaddingRight: 1,\r\n\t\t\t\tpopulateText: true,\r\n\t\t\t\ttext: \"{category}\",\r\n\t\t\t\toversizedBehavior: \"fit\",\r\n\t\t\t\tminScale: 0.4,\r\n\t\t\t\tlayer: 30\r\n\t\t\t});\r\n\r\n\t\t\tsetColor(rule, \"fill\", ic, \"alternativeText\");\r\n\t\t}\r\n\r\n\t}\r\n}\r\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { IDisposer } from \"../../core/util/Disposer\";\nimport type { Hierarchy, IHierarchyDataItem } from \"./Hierarchy\";\n\nimport { HierarchyDefaultTheme } from \"./HierarchyDefaultTheme\";\nimport { Container, IContainerPrivate, IContainerSettings, IContainerEvents } from \"../../core/render/Container\";\nimport { Label } from \"../../core/render/Label\";\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\n\nimport * as $utils from \"../../core/util/Utils\";\n\nexport interface IBreadcrumbBarSettings extends IContainerSettings {\n\n\t/**\n\t * A hierarchy series bar will use to build current selection path.\n\t */\n\tseries: Hierarchy;\n\n}\n\nexport interface IBreadcrumbBarPrivate extends IContainerPrivate {\n}\n\nexport interface IBreadcrumbBarEvents extends IContainerEvents {\n}\n\n/**\n * Creates a breadcrumb navigation control.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/breadcrumbs/} for more info\n * @important\n */\nexport class BreadcrumbBar extends Container {\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeLabel(dataItem: DataItem<IHierarchyDataItem>): Label {\n\t\tconst label = this.labels.make();\n\t\tlabel._setDataItem(dataItem);\n\t\tlabel.states.create(\"hover\", {});\n\t\tlabel.states.create(\"down\", {});\n\t\tlabel.events.on(\"click\", () => {\n\t\t\tconst series = this.get(\"series\");\n\t\t\tif (series) {\n\t\t\t\tseries.selectDataItem(dataItem);\n\t\t\t}\n\t\t});\n\n\t\tthis.labels.push(label);\n\n\t\treturn label;\n\t}\n\n\t/**\n\t * A list of labels in the bar.\n\t *\n\t * `labels.template` can be used to configure label apperance and behavior.\n\t *\n\t * @default new ListTemplate<Label>\n\t */\n\tpublic readonly labels: ListTemplate<Label> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Label._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), [\"label\"]),\n\t\t\tbackground: RoundedRectangle.new(this._root, {\n\t\t\t\tthemeTags: [\"background\"]\n\t\t\t})\n\t\t}, [this.labels.template])\n\t);\n\n\tpublic static className: string = \"BreadcrumbBar\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([BreadcrumbBar.className]);\n\n\tdeclare public _settings: IBreadcrumbBarSettings;\n\tdeclare public _privateSettings: IBreadcrumbBarPrivate;\n\tdeclare public _events: IBreadcrumbBarEvents;\n\n\tprotected _disposer: IDisposer | undefined;\n\n\tprotected _afterNew() {\n\t\tthis._defaultThemes.push(HierarchyDefaultTheme.new(this._root));\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"breadcrumb\"]);\n\n\t\tsuper._afterNew();\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\t\tif (this.isDirty(\"series\")) {\n\t\t\tconst series = this.get(\"series\");\n\t\t\tconst previous = this._prevSettings.series;\n\t\t\tif (series != previous) {\n\t\t\t\tthis._disposer = series.events.on(\"dataitemselected\", (event) => {\n\t\t\t\t\tthis._handleDataItem(event.dataItem)\n\t\t\t\t})\n\t\t\t}\n\t\t\telse if (previous) {\n\t\t\t\tif (this._disposer) {\n\t\t\t\t\tthis._disposer.dispose();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._handleDataItem(series.get(\"selectedDataItem\"));\n\t\t}\n\t}\n\n\tprotected _handleDataItem(dataItem: DataItem<IHierarchyDataItem> | undefined) {\n\t\tthis.set(\"minHeight\", this.height());\n\t\tthis.children.clear();\n\t\tthis.labels.clear();\n\n\t\tif (dataItem) {\n\t\t\tlet parent = dataItem;\n\n\t\t\twhile (parent) {\n\t\t\t\tlet label = this.makeLabel(parent);\n\t\t\t\tif (parent == dataItem) {\n\t\t\t\t\tlabel.addTag(\"last\");\n\t\t\t\t}\n\t\t\t\tthis.children.moveValue(label, 0);\n\t\t\t\tparent = parent.get(\"parent\");\n\t\t\t}\n\t\t}\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { IDisposer } from \"../../core/util/Disposer\";\nimport type { Hierarchy, IHierarchyDataItem } from \"./Hierarchy\";\n\nimport { Container, IContainerPrivate, IContainerSettings } from \"../../core/render/Container\";\n\nexport interface IHierarchyNodeSettings extends IContainerSettings {\n}\n\nexport interface IHierarchyNodePrivate extends IContainerPrivate {\n}\n\n/**\n * Base class for hierarchy nodes.\n */\nexport class HierarchyNode extends Container {\n\n\t/**\n\t * Related series.\n\t */\n\tpublic series: Hierarchy | undefined;\n\n\tdeclare public _settings: IHierarchyNodeSettings;\n\tdeclare public _privateSettings: IHierarchyNodePrivate;\n\n\tpublic static className: string = \"HierarchyNode\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([HierarchyNode.className]);\n\n\tdeclare protected _dataItem: DataItem<IHierarchyDataItem> | undefined;\n\n\tprotected _clickDisposer: IDisposer | undefined;\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\n\t\tthis.states.create(\"disabled\", {});\n\t\tthis.states.create(\"hover\", {});\n\t\tthis.states.create(\"hoverDisabled\", {});\n\n\t\tthis.on(\"disabled\", () => {\n\t\t\tconst dataItem = this.dataItem as DataItem<IHierarchyDataItem>;\n\t\t\tif (!dataItem.get(\"children\")) {\n\t\t\t\tthis.set(\"disabled\", true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst disabled = this.get(\"disabled\");\n\t\t\tconst series = this.series;\n\n\t\t\tif (dataItem && series) {\n\t\t\t\tif (dataItem.get(\"disabled\") != disabled) {\n\t\t\t\t\tif (disabled) {\n\t\t\t\t\t\tseries.disableDataItem(dataItem);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tseries.enableDataItem(dataItem, series.get(\"downDepth\", 1), 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\n\t\tif (this.isDirty(\"toggleKey\")) {\n\t\t\tconst toggleKey = this.get(\"toggleKey\");\n\n\t\t\tif (toggleKey == \"disabled\") {\n\t\t\t\tthis._clickDisposer = this.events.on(\"click\", () => {\n\t\t\t\t\tif (!this._isDragging) {\n\t\t\t\t\t\tlet series = this.series;\n\t\t\t\t\t\tif (series) {\n\t\t\t\t\t\t\tseries.selectDataItem(this.dataItem as DataItem<IHierarchyDataItem>);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (this._clickDisposer) {\n\t\t\t\t\tthis._clickDisposer.dispose();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Dont include the roots parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n","import type { Color } from \"../../core/util/Color\";\nimport type { ColorSet } from \"../../core/util/ColorSet\";\nimport type { Bullet } from \"../../core/render/Bullet\";\nimport type { Root } from \"../../core/Root\";\nimport type { Easing } from \"../../core/util/Ease\";\n\nimport { HierarchyDefaultTheme } from \"./HierarchyDefaultTheme\";\nimport { Series, ISeriesSettings, ISeriesDataItem, ISeriesPrivate, ISeriesEvents } from \"../../core/render/Series\";\nimport { DataItem } from \"../../core/render/Component\";\nimport { HierarchyNode } from \"./HierarchyNode\";\nimport { Container } from \"../../core/render/Container\";\nimport { Label } from \"../../core/render/Label\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as d3hierarchy from \"d3-hierarchy\";\n\n/**\n * @ignore\n */\nexport interface IHierarchyDataObject {\n\tname?: string,\n\tvalue?: number,\n\tchildren?: IHierarchyDataObject[],\n\tdataItem?: DataItem<IHierarchyDataItem>\n\tcustomValue?: boolean;\n};\n\nexport interface IHierarchyDataItem extends ISeriesDataItem {\n\n\t/**\n\t * Value of the node as set in data.\n\t */\n\tvalue: number;\n\n\t/**\n\t * @ignore\n\t */\n\tvalueWorking: number;\n\n\t/**\n\t * Percent value of the node, based on total sum of all nodes in upper level.\n\t */\n\tvaluePercentTotal: number;\n\n\t/**\n\t * Percent value of the node, based on the value of its direct parent.\n\t *\n\t * @since 5.2.21\n\t */\n\tvaluePercent: number;\n\n\t/**\n\t * Sum of child values.\n\t */\n\tsum: number;\n\n\t/**\n\t * Category.\n\t */\n\tcategory: string;\n\n\t/**\n\t * List of child node data items.\n\t */\n\tchildren: Array<DataItem<IHierarchyDataItem>>;\n\n\t/**\n\t * Raw data of the node's children.\n\t */\n\tchildData: Array<any>\n\n\t/**\n\t * Data item of parent node.\n\t */\n\tparent: DataItem<IHierarchyDataItem>;\n\n\t/**\n\t * Node's depth within the hierarchy.\n\t */\n\tdepth: number;\n\n\t/**\n\t * A reference to the related [[HierarchyNode]].\n\t */\n\tnode: HierarchyNode;\n\n\t/**\n\t * A reference to node's [[Label]].\n\t */\n\tlabel: Label;\n\n\t/**\n\t * Node's auto-assigned color.\n\t */\n\tfill: Color;\n\n\t/**\n\t * Indicates if node is currently disabled.\n\t */\n\tdisabled: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\td3HierarchyNode: d3hierarchy.HierarchyNode<IHierarchyDataObject>;\n\n}\n\nexport interface IHierarchySettings extends ISeriesSettings {\n\t/**\n\t * How to sort nodes by their value.\n\t *\n\t * @default \"none\"\n\t */\n\tsort?: \"ascending\" | \"descending\" | \"none\"\n\n\n\t/**\n\t * A field in data that holds numeric value for the node.\n\t */\n\tvalueField?: string;\n\n\t/**\n\t * A field in data that holds string-based identificator for node.\n\t */\n\tcategoryField?: string;\n\n\t/**\n\t * A field in data that holds an array of child node data.\n\t */\n\tchildDataField?: string;\n\n\t/**\n\t * A field in data that holds boolean value indicating if node is\n\t * disabled (collapsed).\n\t */\n\tdisabledField?: string;\n\n\t/**\n\t * A field in data that holds color used for fills for various elements, such\n\t * as nodes.\n\t */\n\tfillField?: string;\n\n\t/**\n\t * A [[ColorSet]] to use when asigning colors for nodes.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/#Node_colors} for more info\n\t */\n\tcolors?: ColorSet;\n\n\t/**\n\t * Number of child levels to open when clicking on a node.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/#Drill_down} for more info\n\t */\n\tdownDepth?: number;\n\n\t/**\n\t * Number of levels parent levels to show from currently selected node.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/#Drill_down} for more info\n\t */\n\tupDepth?: number;\n\n\t/**\n\t * Number of levels to show on chart's first load.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/#Tree_depth} for more info\n\t */\n\tinitialDepth?: number;\n\n\t/**\n\t * If set, will show nodes starting from set level.\n\t *\n\t * It could be used to eliminate top level branches, that do not need to be\n\t * shown.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/#Tree_depth} for more info\n\t */\n\ttopDepth?: number;\n\n\t/**\n\t * If set to `true` will make all other branches collapse when some branch is\n\t * expanded.\n\t */\n\tsingleBranchOnly?: boolean;\n\n\t/**\n\t * A data item for currently selected node.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/#Pre_selected_branch} for more info\n\t */\n\tselectedDataItem?: DataItem<IHierarchyDataItem>;\n\n\t/**\n\t * Duration for all drill animations in milliseconds.\n\t */\n\tanimationDuration?: number;\n\n\t/**\n\t * An easing function to use for drill animations.\n\t */\n\tanimationEasing?: Easing;\n\n}\n\nexport interface IHierarchyPrivate extends ISeriesPrivate {\n\n\t/**\n\t * Level count in series.\n\t */\n\tmaxDepth: number;\n\n}\n\nexport interface IHierarchyEvents extends ISeriesEvents {\n\tdataitemselected: {\n\t\tdataItem?: DataItem<IHierarchyDataItem>\n\t};\n}\n\n/**\n * A base class for all hierarchy charts.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/} for more info\n */\nexport abstract class Hierarchy extends Series {\n\tpublic static className: string = \"Hierarchy\";\n\tpublic static classNames: Array<string> = Series.classNames.concat([Hierarchy.className]);\n\n\tdeclare public _settings: IHierarchySettings;\n\tdeclare public _privateSettings: IHierarchyPrivate;\n\tdeclare public _dataItemSettings: IHierarchyDataItem;\n\tdeclare public _events: IHierarchyEvents;\n\n\t/**\n\t * A [[Container]] that nodes are placed in.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly nodesContainer = this.children.push(Container.new(this._root, { isMeasured: false }));\n\n\tpublic _rootNode: d3hierarchy.HierarchyNode<IHierarchyDataObject> | undefined;\n\n\tpublic _treeData: IHierarchyDataObject | undefined;\n\n\tprotected _index: number = 0;\n\n\tprotected _tag: string = \"hierarchy\";\n\n\t/**\n\t * A list of nodes in a [[Hierarchy]] chart.\n\t *\n\t * @default new ListTemplate<HierarchyNode>\n\t */\n\tpublic readonly nodes: ListTemplate<HierarchyNode> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => HierarchyNode.new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.nodes.template.get(\"themeTags\", []), [this._tag, \"hierarchy\", \"node\"])\n\t\t}, this.nodes.template)\n\t);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>): HierarchyNode {\n\n\t\tconst childData = dataItem.get(\"childData\");\n\n\t\tconst node = this.nodes.make();\n\t\tnode.series = this;\n\t\tnode._setDataItem(dataItem);\n\t\tthis.nodes.push(node);\n\t\tdataItem.setRaw(\"node\", node);\n\n\t\tconst label = this.labels.make();\n\t\tlabel._setDataItem(dataItem);\n\t\tdataItem.setRaw(\"label\", label);\n\t\tthis.labels.push(label);\n\n\t\tif (!childData || childData.length == 0) {\n\t\t\tnode.addTag(\"last\");\n\t\t}\n\n\t\tconst depth = dataItem.get(\"depth\");\n\t\tnode.addTag(\"depth\" + depth);\n\n\t\tthis.nodesContainer.children.push(node);\n\t\tnode.children.push(label);\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * A list of label elements in a [[Hierarchy]] chart.\n\t *\n\t * @default new ListTemplate<Label>\n\t */\n\tpublic readonly labels: ListTemplate<Label> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Label.new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), [this._tag])\n\t\t}, this.labels.template)\n\t);\n\n\tpublic _currentDownDepth: number | undefined;\n\n\tprotected _afterNew() {\n\t\tthis._defaultThemes.push(HierarchyDefaultTheme.new(this._root));\n\t\tthis.fields.push(\"category\", \"childData\", \"disabled\", \"fill\");\n\t\tthis.children.push(this.bulletsContainer);\n\n\t\tsuper._afterNew();\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this._valuesDirty) {\n\t\t\tthis._treeData = {};\n\n\t\t\tconst first = this.dataItems[0];\n\t\t\tif (first) {\n\t\t\t\tthis._makeHierarchyData(this._treeData, first);\n\t\t\t\tthis._index = 0;\n\t\t\t\tthis._rootNode = (d3hierarchy.hierarchy(this._treeData) as any);\n\t\t\t\tif (this._rootNode) {\n\t\t\t\t\tthis._rootNode.sum((d) => {\n\t\t\t\t\t\treturn d.value as any;\n\t\t\t\t\t});\n\t\t\t\t\tconst sort = this.get(\"sort\")\n\t\t\t\t\tif (sort == \"descending\") {\n\t\t\t\t\t\tthis._rootNode.sort((a, b) => (b.value as any) - (a.value as any));\n\t\t\t\t\t}\n\t\t\t\t\telse if (sort == \"ascending\") {\n\t\t\t\t\t\tthis._rootNode.sort((a, b) => (a.value as any) - (b.value as any));\n\t\t\t\t\t}\n\t\t\t\t\tthis.setPrivateRaw(\"valueLow\", Infinity);\n\t\t\t\t\tthis.setPrivateRaw(\"valueHigh\", -Infinity);\n\t\t\t\t\tthis.setPrivateRaw(\"maxDepth\", 0);\n\t\t\t\t\tthis._updateValues(this._rootNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this._valuesDirty || this._sizeDirty) {\n\t\t\tthis._updateVisuals();\n\t\t}\n\n\t\tif (this._sizeDirty) {\n\t\t\tconst dataItem = this.get(\"selectedDataItem\");\n\t\t\tif (dataItem) {\n\t\t\t\tthis._zoom(dataItem);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\t\tif (this.isDirty(\"selectedDataItem\")) {\n\t\t\tthis._selectDataItem(this.get(\"selectedDataItem\"));\n\t\t}\n\t}\n\n\tprotected _updateVisuals() {\n\t\tif (this._rootNode) {\n\t\t\tthis._updateNodes(this._rootNode);\n\t\t}\n\t}\n\n\tprotected _updateNodes(hierarchyNode: d3hierarchy.HierarchyNode<IHierarchyDataObject>) {\n\t\tconst dataItem = hierarchyNode.data.dataItem;\n\n\t\tif (dataItem) {\n\t\t\tthis._updateNode(dataItem);\n\n\t\t\tif (this.bullets.length > 0 && !dataItem.bullets) {\n\t\t\t\tthis._makeBullets(dataItem);\n\t\t\t}\n\n\t\t\tconst hierarchyChildren = hierarchyNode.children;\n\t\t\tif (hierarchyChildren) {\n\t\t\t\t$array.each(hierarchyChildren, (hierarchyChild) => {\n\t\t\t\t\tthis._updateNodes(hierarchyChild)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _updateNode(_dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t}\n\n\t/**\n\t * Looks up and returns a data item by its ID.\n\t *\n\t * @param   id  ID\n\t * @return      Data item\n\t */\n\tpublic getDataItemById(id: string): DataItem<this[\"_dataItemSettings\"]> | undefined {\n\t\treturn this._getDataItemById(this.dataItems, id);\n\t}\n\n\tpublic _getDataItemById(dataItems: Array<DataItem<this[\"_dataItemSettings\"]>>, id: string): DataItem<this[\"_dataItemSettings\"]> | undefined {\n\n\t\tlet di: DataItem<this[\"_dataItemSettings\"]> | undefined;\n\n\t\t$array.each(dataItems, (dataItem: any) => {\n\n\t\t\tif (dataItem.get(\"id\") == id) {\n\t\t\t\tdi = dataItem;\n\t\t\t}\n\n\t\t\tconst children = dataItem.get(\"children\");\n\t\t\tif (children) {\n\t\t\t\tlet childDataItem = this._getDataItemById(children, id);\n\t\t\t\tif (childDataItem) {\n\t\t\t\t\tdi = childDataItem\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\treturn di;\n\t}\n\n\tprotected _handleBullets(dataItems: Array<DataItem<this[\"_dataItemSettings\"]>>) {\n\t\t$array.each(dataItems, (dataItem) => {\n\t\t\tconst bullets = dataItem.bullets;\n\t\t\tif (bullets) {\n\t\t\t\t$array.each(bullets, (bullet) => {\n\t\t\t\t\tbullet.dispose();\n\t\t\t\t})\n\t\t\t\tdataItem.bullets = undefined;\n\t\t\t}\n\n\t\t\tconst children = dataItem.get(\"children\");\n\n\t\t\tif (children) {\n\t\t\t\tthis._handleBullets(children);\n\t\t\t}\n\t\t})\n\n\t\tthis._updateVisuals();\n\t}\n\n\tprotected _onDataClear() {\n\t\tsuper._onDataClear();\n\t\tconst colors = this.get(\"colors\");\n\t\tif (colors) {\n\t\t\tcolors.reset();\n\t\t}\n\t}\n\n\tprotected processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.processDataItem(dataItem);\n\n\t\tconst childData = dataItem.get(\"childData\");\n\t\tconst colors = this.get(\"colors\");\n\t\tconst topDepth = this.get(\"topDepth\", 0);\n\n\t\tif (!dataItem.get(\"parent\")) {\n\t\t\tdataItem.setRaw(\"depth\", 0);\n\t\t\tif (colors && topDepth == 0 && dataItem.get(\"fill\") == null) {\n\t\t\t\tdataItem.setRaw(\"fill\", colors.next());\n\t\t\t}\n\t\t}\n\n\t\tlet depth = dataItem.get(\"depth\");\n\t\tconst initialDepth = this.get(\"initialDepth\", 1);\n\n\t\tthis.makeNode(dataItem);\n\t\tthis._processDataItem(dataItem);\n\n\t\tif (childData) {\n\t\t\tconst children: Array<DataItem<this[\"_dataItemSettings\"]>> = [];\n\t\t\tdataItem.setRaw(\"children\", children);\n\n\t\t\t$array.each(childData, (child) => {\n\t\t\t\tconst childDataItem = new DataItem(this, child, this._makeDataItem(child));\n\n\t\t\t\tchildren.push(childDataItem);\n\n\t\t\t\tchildDataItem.setRaw(\"parent\", dataItem);\n\t\t\t\tchildDataItem.setRaw(\"depth\", depth + 1);\n\n\t\t\t\tif (this.dataItems.length == 1 && depth == 0) {\n\t\t\t\t\tif (colors && childDataItem.get(\"fill\") == null) {\n\t\t\t\t\t\tchildDataItem.setRaw(\"fill\", colors.next());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (childDataItem.get(\"fill\") == null) {\n\t\t\t\t\t\tchildDataItem.setRaw(\"fill\", dataItem.get(\"fill\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.processDataItem(childDataItem);\n\t\t\t})\n\t\t}\n\n\t\tconst children = dataItem.get(\"children\");\n\t\tif (!children || children.length == 0) {\n\t\t\tconst node = dataItem.get(\"node\");\n\t\t\tnode.setAll({ toggleKey: undefined });\n\t\t}\n\n\t\tif (dataItem.get(\"disabled\") == null) {\n\t\t\tif (depth >= topDepth + initialDepth) {\n\t\t\t\tthis.disableDataItem(dataItem, 0);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Adds children data to the target data item.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/hierarchy-api/#Dynamically_adding_child_nodes} for more info\n\t * @since 5.4.5\n\t */\n\tpublic addChildData(dataItem: DataItem<this[\"_dataItemSettings\"]>, data: Array<any>) {\n\t\tconst dataContext = dataItem.dataContext as any;\n\t\tconst childDataField = this.get(\"childDataField\");\n\n\t\tlet childData = dataContext[childDataField] as any;\n\t\tif (!childData) {\n\t\t\tchildData = data;\n\t\t\tdataContext[childDataField] = childData;\n\t\t}\n\t\telse {\n\t\t\tchildData.push(...data);\n\t\t}\n\n\t\tlet children = dataItem.get(\"children\");\n\t\tif (!children) {\n\t\t\tchildren = [];\n\t\t\tdataItem.set(\"children\", children);\n\t\t}\n\n\t\tlet depth = dataItem.get(\"depth\");\n\n\t\t$array.each(childData, (child) => {\n\t\t\tconst childDataItem = new DataItem(this, child, this._makeDataItem(child));\n\n\t\t\tchildren.push(childDataItem);\n\n\t\t\tchildDataItem.setRaw(\"parent\", dataItem);\n\t\t\tchildDataItem.setRaw(\"depth\", depth + 1);\n\n\t\t\tif (childDataItem.get(\"fill\") == null) {\n\t\t\t\tchildDataItem.setRaw(\"fill\", dataItem.get(\"fill\"));\n\t\t\t}\n\n\t\t\tthis.processDataItem(childDataItem);\n\t\t})\n\t}\n\n\tprotected _processDataItem(_dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t}\n\n\tprotected _updateValues(d3HierarchyNode: d3hierarchy.HierarchyNode<IHierarchyDataObject>) {\n\t\tconst dataItem = d3HierarchyNode.data.dataItem;\n\n\t\tif (d3HierarchyNode.depth > this.getPrivate(\"maxDepth\")) {\n\t\t\tthis.setPrivateRaw(\"maxDepth\", d3HierarchyNode.depth);\n\t\t}\n\n\t\tif (dataItem) {\n\t\t\tdataItem.setRaw(\"d3HierarchyNode\", d3HierarchyNode);\n\n\t\t\t(d3HierarchyNode as any).index = this._index;\n\n\t\t\tthis._index++;\n\n\t\t\tdataItem.get(\"node\").set(\"disabled\", dataItem.get(\"disabled\"));\n\n\t\t\tlet dataValue = d3HierarchyNode.data.value;\n\t\t\tlet value = d3HierarchyNode.value\n\n\t\t\tif (dataValue != null) {\n\t\t\t\tvalue = dataValue;\n\t\t\t\t(d3HierarchyNode as any)[\"value\"] = value;\n\t\t\t}\n\n\t\t\tif ($type.isNumber(value)) {\n\t\t\t\tdataItem.setRaw(\"sum\", value);\n\t\t\t\tdataItem.setRaw(\"valuePercentTotal\", value / this.dataItems[0].get(\"sum\") * 100);\n\n\t\t\t\tlet valuePercent = 100;\n\t\t\t\tconst parent = dataItem.get(\"parent\");\n\t\t\t\tif (parent) {\n\t\t\t\t\tvaluePercent = value / parent.get(\"sum\") * 100;\n\t\t\t\t}\n\t\t\t\tdataItem.get(\"label\").text.markDirtyText();\n\t\t\t\tdataItem.setRaw(\"valuePercent\", valuePercent);\n\n\t\t\t\tif (this.getPrivate(\"valueLow\") > value) {\n\t\t\t\t\tthis.setPrivateRaw(\"valueLow\", value);\n\t\t\t\t}\n\n\t\t\t\tif (this.getPrivate(\"valueHigh\") < value) {\n\t\t\t\t\tthis.setPrivateRaw(\"valueHigh\", value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.updateLegendValue(dataItem);\n\t\t}\n\n\t\tconst hierarchyChildren = d3HierarchyNode.children;\n\t\tif (hierarchyChildren) {\n\t\t\t$array.each(hierarchyChildren, (d3HierarchyChild) => {\n\t\t\t\tthis._updateValues(d3HierarchyChild);\n\t\t\t})\n\t\t}\n\t}\n\n\tprotected _makeHierarchyData(data: IHierarchyDataObject, dataItem: DataItem<IHierarchyDataItem>) {\n\t\tdata.dataItem = dataItem;\n\n\t\tconst children = dataItem.get(\"children\");\n\t\tif (children) {\n\t\t\tconst childrenDataArray: Array<IHierarchyDataObject> = [];\n\t\t\tdata.children = childrenDataArray;\n\t\t\t$array.each(children, (childDataItem) => {\n\t\t\t\tconst childData = {};\n\t\t\t\tchildrenDataArray.push(childData);\n\t\t\t\tthis._makeHierarchyData(childData, childDataItem);\n\t\t\t})\n\n\t\t\tconst value = dataItem.get(\"valueWorking\");\n\t\t\tif ($type.isNumber(value)) {\n\t\t\t\tdata.value = value;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tconst value = dataItem.get(\"valueWorking\");\n\t\t\tif ($type.isNumber(value)) {\n\t\t\t\tdata.value = value;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tconst node = dataItem.get(\"node\");\n\t\tif (node) {\n\t\t\tthis.nodes.removeValue(node);\n\t\t\tnode.dispose();\n\t\t}\n\t\tconst label = dataItem.get(\"label\");\n\t\tif (label) {\n\t\t\tthis.labels.removeValue(label);\n\t\t\tlabel.dispose();\n\t\t}\n\n\t\tconst children = dataItem.get(\"children\");\n\t\tif (children) {\n\t\t\t$array.each(children, (child) => {\n\t\t\t\tthis.disposeDataItem(child);\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Hides hierarchy's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async hideDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.hideDataItem(dataItem, duration)];\n\n\t\tconst hiddenState = this.states.create(\"hidden\", {})\n\n\t\tif (!$type.isNumber(duration)) {\n\t\t\tconst stateAnimationDuration = \"stateAnimationDuration\"\n\t\t\tduration = hiddenState.get(stateAnimationDuration, this.get(stateAnimationDuration, 0));\n\t\t}\n\n\t\tconst stateAnimationEasing = \"stateAnimationEasing\";\n\t\tconst easing = hiddenState.get(stateAnimationEasing, this.get(stateAnimationEasing));\n\n\t\tconst children = dataItem.get(\"children\");\n\n\t\tif ((!children || children.length == 0) && $type.isNumber(dataItem.get(\"value\"))) {\n\t\t\tpromises.push(dataItem.animate({ key: \"valueWorking\" as any, to: 0, duration: duration, easing: easing }).waitForStop());\n\t\t}\n\n\t\tconst node = dataItem.get(\"node\");\n\t\tnode.hide();\n\t\tnode.hideTooltip();\n\n\t\tif (children) {\n\t\t\t$array.each(children, (childDataItem) => {\n\t\t\t\tpromises.push(this.hideDataItem(childDataItem));\n\t\t\t})\n\t\t}\n\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * Shows hierarchy's data item.\n\t *\n\t * @param   dataItem  Data item\n\t * @param   duration  Animation duration in milliseconds\n\t * @return            Promise\n\t */\n\tpublic async showDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number): Promise<void> {\n\t\tconst promises = [super.showDataItem(dataItem, duration)];\n\n\t\tif (!$type.isNumber(duration)) {\n\t\t\tduration = this.get(\"stateAnimationDuration\", 0);\n\t\t}\n\n\t\tconst easing = this.get(\"stateAnimationEasing\");\n\n\t\tconst children = dataItem.get(\"children\");\n\n\t\tif ((!children || children.length == 0) && $type.isNumber(dataItem.get(\"value\"))) {\n\t\t\tpromises.push(dataItem.animate({ key: \"valueWorking\" as any, to: dataItem.get(\"value\"), duration: duration, easing: easing }).waitForStop());\n\t\t}\n\n\t\tconst node = dataItem.get(\"node\");\n\t\tnode.show();\n\n\t\tif (children) {\n\t\t\t$array.each(children, (childDataItem) => {\n\t\t\t\tpromises.push(this.showDataItem(childDataItem));\n\t\t\t})\n\t\t}\n\n\t\tawait Promise.all(promises);\n\t}\n\n\t/**\n\t * Enables a disabled data item.\n\t *\n\t * @param  dataItem  Target data item\n\t * @param  duration  Animation duration in milliseconds\n\t */\n\tpublic enableDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, maxDepth?: number, depth?: number, duration?: number) {\n\t\tif (depth == null) {\n\t\t\tdepth = 0;\n\t\t}\n\n\t\tif (maxDepth == null) {\n\t\t\tmaxDepth = 1;\n\t\t}\n\n\t\tdataItem.set(\"disabled\", false);\n\t\tdataItem.get(\"node\").set(\"disabled\", false);\n\n\t\tif (!dataItem.isHidden()) {\n\t\t\tdataItem.get(\"node\").show(duration);\n\t\t}\n\n\t\tconst topDepth = this.get(\"topDepth\", 0);\n\t\tif (dataItem.get(\"depth\") < topDepth) {\n\t\t\tdataItem.get(\"node\").hide(0);\n\t\t}\n\n\t\tif (depth == 0) {\n\t\t\tconst upDepth = this.get(\"upDepth\", Infinity);\n\t\t\tlet parent = dataItem;\n\t\t\tlet count = 0;\n\n\t\t\twhile (parent !== undefined) {\n\t\t\t\tif (count > upDepth) {\n\t\t\t\t\tparent.get(\"node\").hide();\n\t\t\t\t}\n\t\t\t\tparent = parent.get(\"parent\");\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\n\t\tlet children = dataItem.get(\"children\");\n\t\tif (children) {\n\t\t\tif (depth < maxDepth - 1) {\n\t\t\t\t$array.each(children, (child) => {\n\t\t\t\t\tconst disabledField = this.get(\"disabledField\");\n\t\t\t\t\tif (disabledField) {\n\t\t\t\t\t\tconst dataContext = child.dataContext as any;\n\t\t\t\t\t\tif (dataContext[disabledField] != true) {\n\t\t\t\t\t\t\tthis.enableDataItem(child, maxDepth, depth as number + 1, duration);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.disableDataItem(child);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.enableDataItem(child, maxDepth, depth as number + 1, duration);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$array.each(children, (child) => {\n\t\t\t\t\tif (!child.isHidden()) {\n\t\t\t\t\t\tchild.get(\"node\").show(duration);\n\t\t\t\t\t\tchild.get(\"node\").states.applyAnimate(\"disabled\");\n\t\t\t\t\t\tchild.set(\"disabled\", true);\n\n\t\t\t\t\t\tthis.disableDataItem(child);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Disables a data item.\n\t *\n\t * @param  dataItem  Target data item\n\t * @param  duration  Animation duration in milliseconds\n\t */\n\tpublic disableDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, duration?: number) {\n\t\tdataItem.set(\"disabled\", true);\n\t\tlet children = dataItem.get(\"children\");\n\t\tif (children) {\n\t\t\t$array.each(children, (child) => {\n\t\t\t\tthis.disableDataItem(child, duration);\n\t\t\t\tchild.get(\"node\").hide(duration);\n\t\t\t})\n\t\t}\n\t}\n\n\tprotected _selectDataItem(dataItem?: DataItem<this[\"_dataItemSettings\"]>, downDepth?: number, skipDisptach?: boolean) {\n\t\tif (dataItem) {\n\t\t\tif (!skipDisptach) {\n\t\t\t\tconst type = \"dataitemselected\";\n\t\t\t\tthis.events.dispatch(type, { type: type, target: this, dataItem: dataItem });\n\t\t\t}\n\n\t\t\tlet maxDepth = this.getPrivate(\"maxDepth\", 1);\n\t\t\tconst topDepth = this.get(\"topDepth\", 0);\n\n\t\t\tif (downDepth == null) {\n\t\t\t\tdownDepth = Math.min(this.get(\"downDepth\", 1), maxDepth - dataItem.get(\"depth\"));\n\t\t\t}\n\n\t\t\tif (!this.inited) {\n\t\t\t\tdownDepth = Math.min(this.get(\"initialDepth\", 1), maxDepth - topDepth);\n\t\t\t}\n\n\t\t\tthis._currentDownDepth = downDepth;\n\n\t\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\t\t\tlet currentDepth = hierarchyNode.depth;\n\n\t\t\tif (currentDepth + downDepth > maxDepth) {\n\t\t\t\tdownDepth = maxDepth - currentDepth;\n\t\t\t}\n\n\t\t\tif (currentDepth < topDepth) {\n\t\t\t\tdownDepth += topDepth - currentDepth;\n\t\t\t\tcurrentDepth = topDepth;\n\t\t\t}\n\n\t\t\tconst children = dataItem.get(\"children\");\n\n\t\t\tif (children && children.length > 0) {\n\t\t\t\tif (downDepth > 0) {\n\t\t\t\t\tthis.enableDataItem(dataItem, downDepth);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdataItem.get(\"node\").show();\n\t\t\t\t\t$array.each(children, (child) => {\n\t\t\t\t\t\tchild.get(\"node\").hide();\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tif (hierarchyNode.depth < topDepth) {\n\t\t\t\t\tdataItem.get(\"node\").hide(0);\n\t\t\t\t}\n\n\t\t\t\tif (this.get(\"singleBranchOnly\")) {\n\t\t\t\t\tthis._handleSingle(dataItem);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.enableDataItem(this.dataItems[0], downDepth, 0);\n\t\t\t}\n\n\t\t\tthis._zoom(dataItem);\n\t\t}\n\n\t}\n\n\tprotected _zoom(_dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t}\n\n\tprotected _handleSingle(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst parent = dataItem.get(\"parent\");\n\t\tif (parent) {\n\t\t\tconst children = parent.get(\"children\");\n\t\t\tif (children) {\n\t\t\t\t$array.each(children, (child) => {\n\t\t\t\t\tif (child != dataItem) {\n\t\t\t\t\t\tthis.disableDataItem(child);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Selects specific data item.\n\t *\n\t * @param  dataItem  Target data item\n\t */\n\tpublic selectDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst parent = dataItem.get(\"parent\");\n\t\tconst maxDepth = this.getPrivate(\"maxDepth\", 1);\n\n\t\tif (this.get(\"selectedDataItem\") == dataItem) {\n\t\t\tif (parent) {\n\t\t\t\tthis.set(\"selectedDataItem\", parent);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet depth = Math.min(this.get(\"downDepth\", 1), maxDepth - dataItem.get(\"depth\"));\n\n\t\t\t\tif (this._currentDownDepth == depth) {\n\t\t\t\t\tdepth = Math.min(this.get(\"initialDepth\", 1), maxDepth - this.get(\"topDepth\", 0));\n\t\t\t\t}\n\n\t\t\t\tthis._selectDataItem(dataItem, depth);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.set(\"selectedDataItem\", dataItem);\n\t\t}\n\t}\n\n\n\tprotected _makeBullet(dataItem: DataItem<this[\"_dataItemSettings\"]>, bulletFunction: (root: Root, series: Series, dataItem: DataItem<this[\"_dataItemSettings\"]>) => Bullet | undefined, index?: number) {\n\t\tconst bullet = super._makeBullet(dataItem, bulletFunction, index);\n\t\tif (bullet) {\n\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\tconst node = dataItem.get(\"node\");\n\n\t\t\tif (sprite) {\n\t\t\t\tnode.children.push(sprite);\n\t\t\t\tnode.on(\"width\", () => {\n\t\t\t\t\tthis._positionBullet(bullet);\n\t\t\t\t})\n\t\t\t\tnode.on(\"height\", () => {\n\t\t\t\t\tthis._positionBullet(bullet);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\treturn bullet;\n\t}\n\n\tpublic _positionBullet(bullet: Bullet) {\n\n\t\tconst sprite = bullet.get(\"sprite\");\n\t\tif (sprite) {\n\t\t\tconst dataItem = sprite.dataItem as DataItem<this[\"_dataItemSettings\"]>;\n\n\t\t\tconst locationX = bullet.get(\"locationX\", 0.5);\n\t\t\tconst locationY = bullet.get(\"locationY\", 0.5);\n\n\t\t\tconst node = dataItem.get(\"node\");\n\n\t\t\tsprite.set(\"x\", node.width() * locationX);\n\t\t\tsprite.set(\"y\", node.height() * locationY);\n\t\t}\n\t}\n\n\t/**\n\t * Triggers hover on a series data item.\n\t *\n\t * @since 5.0.7\n\t * @param  dataItem  Target data item\n\t */\n\tpublic hoverDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst node = dataItem.get(\"node\");\n\t\tif (node && !node.isHidden()) {\n\t\t\tnode.hover();\n\t\t}\n\t}\n\n\t/**\n\t * Triggers un-hover on a series data item.\n\t *\n\t * @since 5.0.7\n\t * @param  dataItem  Target data item\n\t */\n\tpublic unhoverDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst node = dataItem.get(\"node\");\n\t\tif (node) {\n\t\t\tnode.unhover();\n\t\t}\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { LinkedHierarchy, ILinkedHierarchyDataItem } from \"./LinkedHierarchy\";\n\nimport { HierarchyNode, IHierarchyNodePrivate, IHierarchyNodeSettings } from \"./HierarchyNode\";\n\nimport * as $array from \"../../core/util/Array\";\n\nexport interface ILinkedHierarchyNodeSettings extends IHierarchyNodeSettings {\n}\n\nexport interface ILinkedHierarchyNodePrivate extends IHierarchyNodePrivate {\n}\n\n/**\n * A node class for [[LinkedHierarchy]].\n */\nexport class LinkedHierarchyNode extends HierarchyNode {\n\n\t/**\n\t * A series node belongs to.\n\t */\n\tdeclare public series: LinkedHierarchy | undefined;\n\n\tdeclare public _settings: ILinkedHierarchyNodeSettings;\n\tdeclare public _privateSettings: ILinkedHierarchyNodePrivate;\n\n\tpublic static className: string = \"LinkedHierarchyNode\";\n\tpublic static classNames: Array<string> = HierarchyNode.classNames.concat([LinkedHierarchyNode.className]);\n\n\tdeclare protected _dataItem: DataItem<ILinkedHierarchyDataItem> | undefined;\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\n\t\tthis.states.create(\"disabled\", {});\n\t\tthis.states.create(\"hover\", {});\n\t\tthis.states.create(\"hoverDisabled\", {});\n\t}\n\n\n\tpublic _updateLinks(duration?: number) {\n\t\tconst dataItem = this.dataItem;\n\t\tif (dataItem) {\n\t\t\tlet links = (dataItem as DataItem<ILinkedHierarchyDataItem>).get(\"links\");\n\n\t\t\t$array.each(links, (link) => {\n\t\t\t\tlet source = link.get(\"source\")\n\t\t\t\tlet target = link.get(\"target\")\n\n\t\t\t\tif (source && target) {\n\t\t\t\t\tif (source.get(\"node\").isHidden() || target.get(\"node\").isHidden()) {\n\t\t\t\t\t\tlink.hide(duration);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlink.show(duration);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isDirty(\"disabled\")) {\n\t\t\tthis._updateLinks();\n\t\t}\n\t}\n\n\tprotected _onHide(duration?: number) {\n\t\tsuper._onHide(duration);\n\t\tthis._updateLinks(duration);\n\t}\n\n\tprotected _onShow(duration?: number) {\n\t\tsuper._onShow(duration);\n\t\tthis._updateLinks(duration);\n\t}\n}\n","import type { IHierarchyDataItem } from \"./Hierarchy\";\nimport type { DataItem } from \"../../core/render/Component\";\n\nimport { Graphics, IGraphicsSettings, IGraphicsPrivate } from \"../../core/render/Graphics\";\n\nexport interface IHierarchyLinkSettings extends IGraphicsSettings {\n\n\t/**\n\t * Source node data item.\n\t */\n\tsource?: DataItem<IHierarchyDataItem>;\n\n\t/**\n\t * Target node data item.\n\t */\n\ttarget?: DataItem<IHierarchyDataItem>;\n\n\t/**\n\t * Strength of the link.\n\t */\n\tstrength?: number;\n\n\t/**\n\t * Distance in pixels.\n\t */\n\tdistance?: number;\n\n}\n\nexport interface IHierarchyLinkPrivate extends IGraphicsPrivate {\n\td3Link:any;\n}\n\n/**\n * Draws a link between nodes in a hierarchy series.\n */\nexport class HierarchyLink extends Graphics {\n\tdeclare public _settings: IHierarchyLinkSettings;\n\tdeclare public _privateSettings: IHierarchyLinkPrivate;\n\n\tpublic static className: string = \"HierarchyLink\";\n\tpublic static classNames: Array<string> = Graphics.classNames.concat([HierarchyLink.className]);\n\n\tpublic _changed() {\n\t\tsuper._changed();\n\t\tif (this._clear) {\n\t\t\tlet source = this.get(\"source\");\n\t\t\tlet target = this.get(\"target\");\n\t\t\tif (source && target) {\n\t\t\t\tconst sourceNode = source.get(\"node\");\n\t\t\t\tconst targetNode = target.get(\"node\");\n\t\t\t\tthis._display.moveTo(sourceNode.x(), sourceNode.y());\n\t\t\t\tthis._display.lineTo(targetNode.x(), targetNode.y());\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _beforeChanged() {\n\t\tsuper._beforeChanged();\n\n\t\tif (this.isDirty(\"source\")) {\n\t\t\tconst source = this.get(\"source\");\n\t\t\tif (source) {\n\t\t\t\tconst sourceNode = source.get(\"node\");\n\t\t\t\tsourceNode.events.on(\"positionchanged\", () => {\n\t\t\t\t\tthis._markDirtyKey(\"stroke\");\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tif (this.isDirty(\"target\")) {\n\t\t\tconst target = this.get(\"target\");\n\t\t\tif (target) {\n\t\t\t\tconst targetNode = target.get(\"node\");\n\t\t\t\ttargetNode.events.on(\"positionchanged\", () => {\n\t\t\t\t\tthis._markDirtyKey(\"stroke\");\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type * as d3hierarchy from \"d3-hierarchy\";\n\nimport { Hierarchy, IHierarchySettings, IHierarchyDataItem, IHierarchyPrivate, IHierarchyEvents } from \"./Hierarchy\";\nimport { Container } from \"../../core/render/Container\";\nimport { LinkedHierarchyNode } from \"./LinkedHierarchyNode\";\nimport { HierarchyLink } from \"./HierarchyLink\";\nimport { Template } from \"../../core/util/Template\";\nimport { Circle } from \"../../core/render/Circle\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport type { IPoint } from \"../../core/util/IPoint\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $utils from \"../../core/util/Utils\";\n\n/**\n * @ignore\n */\nexport interface ILinkedHierarchyDataObject {\n\tname?: string,\n\tvalue?: number,\n\tchildren?: ILinkedHierarchyDataObject[],\n\tdataItem?: DataItem<ILinkedHierarchyDataItem>\n};\n\nexport interface ILinkedHierarchyDataItem extends IHierarchyDataItem {\n\n\t/**\n\t * An array of child data items.\n\t */\n\tchildren: Array<DataItem<ILinkedHierarchyDataItem>>;\n\n\t/**\n\t * A data item of a parent node.\n\t */\n\tparent: DataItem<ILinkedHierarchyDataItem>;\n\n\t/**\n\t * A related node.\n\t */\n\tnode: LinkedHierarchyNode;\n\n\t/**\n\t * [[Circle]] element of the related node.\n\t */\n\tcircle: Circle;\n\n\t/**\n\t * [[Circle]] element of the related node, representing outer circle.\n\t */\n\touterCircle: Circle;\n\n\t/**\n\t * A [[HierarchyLink]] leading to parent node.\n\t */\n\tparentLink: HierarchyLink;\n\n\t/**\n\t * An [[HierarchyLink]] leading to parent node.\n\t */\n\tlinks: Array<HierarchyLink>;\n\n\t/**\n\t * An array of [[HierarchyLink]] objects leading to child nodes.\n\t */\n\tchildLinks: Array<HierarchyLink>;\n\n\t/**\n\t * An array of IDs of directly linked nodes.\n\t */\n\tlinkWith: Array<string>;\n\n\t/**\n\t * @ignore\n\t */\n\td3HierarchyNode: d3hierarchy.HierarchyPointNode<ILinkedHierarchyDataObject>;\n\n}\n\nexport interface ILinkedHierarchySettings extends IHierarchySettings {\n\n\t/**\n\t * A field in data which holds IDs of nodes to link with.\n\t */\n\tlinkWithField?: string;\n\n}\n\nexport interface ILinkedHierarchyPrivate extends IHierarchyPrivate {\n}\n\nexport interface ILinkedHierarchyEvents extends IHierarchyEvents {\n}\n\n/**\n * A base class for linked hierarchy series.\n */\nexport abstract class LinkedHierarchy extends Hierarchy {\n\n\tpublic static className: string = \"LinkedHierarchy\";\n\tpublic static classNames: Array<string> = Hierarchy.classNames.concat([LinkedHierarchy.className]);\n\n\tdeclare public _settings: ILinkedHierarchySettings;\n\tdeclare public _privateSettings: ILinkedHierarchyPrivate;\n\tdeclare public _dataItemSettings: ILinkedHierarchyDataItem;\n\tdeclare public _events: ILinkedHierarchyEvents;\n\n\tprotected _afterNew() {\n\t\tthis.fields.push(\"linkWith\", \"x\", \"y\");\n\n\t\tsuper._afterNew();\n\t}\n\n\t/**\n\t * A list of nodes in a [[LinkedHierarchy]] chart.\n\t *\n\t * @default new ListTemplate<LinkedHierarchyNode>\n\t */\n\tpublic readonly nodes: ListTemplate<LinkedHierarchyNode> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => LinkedHierarchyNode._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.nodes.template.get(\"themeTags\", []), [this._tag, \"linkedhierarchy\", \"hierarchy\", \"node\"]),\n\t\t\tx: this.width() / 2,\n\t\t\ty: this.height() / 2\n\t\t}, [this.nodes.template])\n\t);\n\n\t/**\n\t * A list of node circle elements in a [[LinkedHierarchy]] chart.\n\t *\n\t * @default new ListTemplate<Circle>\n\t */\n\tpublic readonly circles: ListTemplate<Circle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Circle._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.circles.template.get(\"themeTags\", []), [this._tag, \"shape\"])\n\t\t}, [this.circles.template])\n\t);\n\n\t/**\n\t * A list of node outer circle elements in a [[LinkedHierarchy]] chart.\n\t *\n\t * @default new ListTemplate<Circle>\n\t */\n\tpublic readonly outerCircles: ListTemplate<Circle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Circle._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.outerCircles.template.get(\"themeTags\", []), [this._tag, \"outer\", \"shape\"])\n\t\t}, [this.outerCircles.template])\n\t);\n\n\t/**\n\t * A list of link elements in a [[LinkedHierarchy]] chart.\n\t *\n\t * @default new ListTemplate<HierarchyLink>\n\t */\n\tpublic readonly links: ListTemplate<HierarchyLink> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => HierarchyLink._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.links.template.get(\"themeTags\", []), [this._tag, \"linkedhierarchy\", \"hierarchy\", \"link\"])\n\t\t}, [this.links.template])\n\t);\n\n\t/**\n\t * A [[Container]] that link elements are placed in.\n\t *\n\t * @default Container.new()\n\t */\n\tpublic readonly linksContainer = this.children.moveValue(Container.new(this._root, {}), 0);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>): LinkedHierarchyNode {\n\t\tconst node = super.makeNode(dataItem) as LinkedHierarchyNode;\n\n\t\tconst circle = node.children.moveValue(this.circles.make(), 0);\n\t\tthis.circles.push(circle);\n\t\tnode.setPrivate(\"tooltipTarget\", circle);\n\t\tdataItem.setRaw(\"circle\", circle);\n\n\t\tconst outerCircle = node.children.moveValue(this.outerCircles.make(), 0);\n\t\tthis.outerCircles.push(outerCircle);\n\t\tdataItem.setRaw(\"outerCircle\", outerCircle);\n\n\t\tconst label = dataItem.get(\"label\");\n\n\t\tcircle.on(\"radius\", () => {\n\t\t\tconst d = circle.get(\"radius\", this.width()) * 2;\n\t\t\tlabel.setAll({ maxWidth: d, maxHeight: d })\n\t\t\touterCircle.set(\"radius\", d / 2);\n\n\t\t\tthis._handleRadiusChange();\n\t\t})\n\n\t\tconst d = circle.get(\"radius\", this.width()) * 2;\n\t\tlabel.setAll({ maxWidth: d, maxHeight: d });\n\t\t\n\t\tcircle._setDataItem(dataItem);\n\t\touterCircle._setDataItem(dataItem);\n\n\t\treturn node;\n\t}\n\n\tpublic _handleRadiusChange() {\n\n\t}\n\n\tprotected processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tdataItem.setRaw(\"childLinks\", []);\n\t\tdataItem.setRaw(\"links\", []);\n\t\tsuper.processDataItem(dataItem);\n\t}\n\n\tprotected _processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._processDataItem(dataItem);\n\n\t\tconst parentDataItem = dataItem.get(\"parent\");\n\t\tif (parentDataItem && parentDataItem.get(\"depth\") >= this.get(\"topDepth\")) {\n\t\t\tconst link = this.linkDataItems(parentDataItem, dataItem);\n\t\t\tdataItem.setRaw(\"parentLink\", link);\n\t\t}\n\n\t\tconst node = dataItem.get(\"node\");\n\t\tthis.updateLinkWith(this.dataItems);\n\t\tnode._updateLinks(0);\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateLinkWith(dataItems: Array<DataItem<this[\"_dataItemSettings\"]>>) {\n\t\t$array.each(dataItems, (dataItem) => {\n\t\t\tconst linkWith = dataItem.get(\"linkWith\");\n\t\t\tif (linkWith) {\n\t\t\t\t$array.each(linkWith, (id) => {\n\t\t\t\t\tconst linkWithDataItem = this._getDataItemById(this.dataItems, id);\n\n\t\t\t\t\tif (linkWithDataItem) {\n\t\t\t\t\t\tthis.linkDataItems(dataItem, linkWithDataItem);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst children = dataItem.get(\"children\");\n\t\t\tif (children) {\n\t\t\t\tthis.updateLinkWith(children);\n\t\t\t}\n\t\t})\n\t}\n\n\tprotected _getPoint(hierarchyNode: this[\"_dataItemSettings\"][\"d3HierarchyNode\"]): IPoint {\n\t\treturn { x: hierarchyNode.x, y: hierarchyNode.y };\n\t}\n\n\tprotected _animatePositions(dataItem: DataItem<this[\"_dataItemSettings\"]>){\n\t\tconst node = dataItem.get(\"node\");\n\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\n\t\tconst point = this._getPoint(hierarchyNode);\n\n\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\tconst easing = this.get(\"animationEasing\");\n\n\t\tnode.animate({ key: \"x\", to: point.x, duration: duration, easing: easing });\n\t\tnode.animate({ key: \"y\", to: point.y, duration: duration, easing: easing });\t\t\n\t}\n\n\tprotected _updateNode(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._updateNode(dataItem);\n\n\t\tthis._animatePositions(dataItem);\n\n\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\n\t\tconst hierarchyChildren = hierarchyNode.children;\n\t\tif (hierarchyChildren) {\n\t\t\t$array.each(hierarchyChildren, (hierarchyChild) => {\n\t\t\t\tthis._updateNodes(hierarchyChild)\n\t\t\t})\n\t\t}\n\n\t\tconst fill = dataItem.get(\"fill\");\n\t\tconst circle = dataItem.get(\"circle\");\n\t\tconst children = dataItem.get(\"children\");\n\t\t\n\t\tif (circle) {\n\t\t\tcircle._setDefault(\"fill\", fill);\n\t\t\tcircle._setDefault(\"stroke\", fill);\n\t\t}\n\n\t\tconst outerCircle = dataItem.get(\"outerCircle\");\n\t\tif (outerCircle) {\n\t\t\touterCircle._setDefault(\"fill\", fill);\n\t\t\touterCircle._setDefault(\"stroke\", fill);\n\n\t\t\tif (!children || children.length == 0) {\n\t\t\t\touterCircle.setPrivate(\"visible\", false);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Link two data items with a link element.\n\t *\n\t * @param   source    Source node data item\n\t * @param   target    Target node data item\n\t * @param   strength  Link strength\n\t * @return            Link element\n\t */\n\tpublic linkDataItems(source: DataItem<this[\"_dataItemSettings\"]>, target: DataItem<this[\"_dataItemSettings\"]>, strength?: number): HierarchyLink {\n\n\t\tlet link!: HierarchyLink;\n\n\t\tconst sourceLinks = source.get(\"links\");\n\n\t\tif (sourceLinks) {\n\t\t\t$array.each(sourceLinks, (lnk) => {\n\t\t\t\tif (lnk.get(\"target\") == target) {\n\t\t\t\t\tlink = lnk;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tconst targetLinks = target.get(\"links\");\n\n\t\tif (targetLinks) {\n\t\t\t$array.each(targetLinks, (lnk) => {\n\t\t\t\tif (lnk.get(\"target\") == source) {\n\t\t\t\t\tlink = lnk;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif (!link) {\n\t\t\tlink = this.links.make();\n\t\t\tthis.links.push(link);\n\t\t\tthis.linksContainer.children.push(link);\n\t\t\tlink.set(\"source\", source);\n\t\t\tlink.set(\"target\", target);\n\t\t\tlink._setDataItem(source);\n\t\t\tlink.set(\"stroke\", source.get(\"fill\"));\n\t\t\tif (strength != null) {\n\t\t\t\tlink.set(\"strength\", strength)\n\t\t\t}\n\n\t\t\tsource.get(\"childLinks\").push(link);\n\n\t\t\t$array.move(source.get(\"links\"), link);\n\t\t\t$array.move(target.get(\"links\"), link);\n\n\t\t\tthis._processLink(link, source, target);\n\t\t}\n\n\t\treturn link;\n\t}\n\n\n\t/**\n\t * Unlink two linked data items.\n\t *\n\t * @param   source  Source node data item\n\t * @param   target  Target node data item\n\t */\n\tpublic unlinkDataItems(source: DataItem<this[\"_dataItemSettings\"]>, target: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t\tlet link!: HierarchyLink;\n\n\t\tconst sourceLinks = source.get(\"links\");\n\n\t\tif (sourceLinks) {\n\t\t\t$array.each(sourceLinks, (lnk) => {\n\t\t\t\tif (lnk && lnk.get(\"target\") == target) {\n\t\t\t\t\tlink = lnk;\n\t\t\t\t\t$array.remove(sourceLinks, link);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tconst targetLinks = target.get(\"links\");\n\n\t\tif (targetLinks) {\n\t\t\t$array.each(targetLinks, (lnk) => {\n\t\t\t\tif (lnk && lnk.get(\"target\") == source) {\n\t\t\t\t\tlink = lnk;\n\t\t\t\t\t$array.remove(targetLinks, link);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif (link) {\n\t\t\tthis._disposeLink(link);\n\t\t}\n\n\t\tthis._handleUnlink();\n\t}\n\n\tprotected _handleUnlink() {\n\n\t}\n\n\tprotected _disposeLink(link: HierarchyLink) {\n\t\tthis.links.removeValue(link);\n\t\tlink.dispose();\n\t}\n\n\t/**\n\t * Returns `true` if two nodes are linked with each other.\n\t */\n\tpublic areLinked(source: DataItem<this[\"_dataItemSettings\"]>, target: DataItem<this[\"_dataItemSettings\"]>): boolean {\n\t\tconst sourceLinks = source.get(\"links\");\n\t\tlet linked = false;\n\t\tif (sourceLinks) {\n\t\t\t$array.each(sourceLinks, (lnk) => {\n\t\t\t\tif (lnk.get(\"target\") == target) {\n\t\t\t\t\tlinked = true;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tconst targetLinks = target.get(\"links\");\n\n\t\tif (targetLinks) {\n\t\t\t$array.each(targetLinks, (lnk) => {\n\t\t\t\tif (lnk.get(\"target\") == source) {\n\t\t\t\t\tlinked = true;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\treturn linked;\n\t}\n\n\tprotected _processLink(_link: HierarchyLink, _source: DataItem<this[\"_dataItemSettings\"]>, _target: DataItem<this[\"_dataItemSettings\"]>) {\n\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper.disposeDataItem(dataItem);\n\t\tconst links = dataItem.get(\"links\");\n\t\tif (links) {\n\t\t\t$array.each(links, (link) => {\n\t\t\t\tthis._disposeLink(link)\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Select a data item.\n\t * @param  dataItem  Data item\n\t */\n\tpublic selectDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst parent = dataItem.get(\"parent\");\n\n\t\tif (!dataItem.get(\"disabled\")) {\n\t\t\tthis.set(\"selectedDataItem\", dataItem);\n\t\t}\n\t\telse {\n\t\t\tif (parent) {\n\t\t\t\tthis.setRaw(\"selectedDataItem\", parent);\n\t\t\t\tconst type = \"dataitemselected\";\n\t\t\t\tthis.events.dispatch(type, { type: type, target: this, dataItem: parent });\n\t\t\t\tthis.disableDataItem(dataItem);\n\t\t\t}\n\t\t}\n\t}\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\n\nexport default function(nodes) {\n  var simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function(force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\n        else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(0.5 + i), angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function(x, y, radius) {\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n\n      if (radius == null) radius = Infinity;\n      else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(random) {\n  return (random() - 0.5) * 1e-6;\n}\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction x(d) {\n  return d.x + d.vx;\n}\n\nfunction y(d) {\n  return d.y + d.vy;\n}\n\nexport default function(radius) {\n  var nodes,\n      radii,\n      random,\n      strength = 1,\n      iterations = 1;\n\n  if (typeof radius !== \"function\") radius = constant(radius == null ? 1 : +radius);\n\n  function force() {\n    var i, n = nodes.length,\n        tree,\n        node,\n        xi,\n        yi,\n        ri,\n        ri2;\n\n    for (var k = 0; k < iterations; ++k) {\n      tree = quadtree(nodes, x, y).visitAfter(prepare);\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        ri = radii[node.index], ri2 = ri * ri;\n        xi = node.x + node.vx;\n        yi = node.y + node.vy;\n        tree.visit(apply);\n      }\n    }\n\n    function apply(quad, x0, y0, x1, y1) {\n      var data = quad.data, rj = quad.r, r = ri + rj;\n      if (data) {\n        if (data.index > node.index) {\n          var x = xi - data.x - data.vx,\n              y = yi - data.y - data.vy,\n              l = x * x + y * y;\n          if (l < r * r) {\n            if (x === 0) x = jiggle(random), l += x * x;\n            if (y === 0) y = jiggle(random), l += y * y;\n            l = (r - (l = Math.sqrt(l))) / l * strength;\n            node.vx += (x *= l) * (r = (rj *= rj) / (ri2 + rj));\n            node.vy += (y *= l) * r;\n            data.vx -= x * (r = 1 - r);\n            data.vy -= y * r;\n          }\n        }\n        return;\n      }\n      return x0 > xi + r || x1 < xi - r || y0 > yi + r || y1 < yi - r;\n    }\n  }\n\n  function prepare(quad) {\n    if (quad.data) return quad.r = radii[quad.data.index];\n    for (var i = quad.r = 0; i < 4; ++i) {\n      if (quad[i] && quad[i].r > quad.r) {\n        quad.r = quad[i].r;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    radii = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], radii[node.index] = +radius(node, i, nodes);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { Percent } from \"../../core/util/Percent\";\nimport type { LinkedHierarchyNode } from \"./LinkedHierarchyNode\";\nimport type { HierarchyLink } from \"./HierarchyLink\";\nimport type * as d3Hierarchy from \"d3-hierarchy\";\n\nimport { LinkedHierarchy, ILinkedHierarchySettings, ILinkedHierarchyDataItem, ILinkedHierarchyPrivate, ILinkedHierarchyEvents } from \"./LinkedHierarchy\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $type from \"../../core/util/Type\";\nimport * as d3Force from \"d3-force\";\n\n/**\n * @ignore\n */\nexport interface IForceDirectedDataObject {\n\tname?: string,\n\tvalue?: number,\n\tchildren?: IForceDirectedDataObject[],\n\tdataItem?: DataItem<IForceDirectedDataItem>\n};\n\nexport interface IForceDirectedDataItem extends ILinkedHierarchyDataItem {\n\n\t/**\n\t * An array of data items of child nodes.\n\t */\n\tchildren: Array<DataItem<IForceDirectedDataItem>>;\n\n\t/**\n\t * Data item of a parent node.\n\t */\n\tparent: DataItem<IForceDirectedDataItem>;\n\n\t/**\n\t * @ignore\n\t */\n\td3ForceNode: d3Force.SimulationNodeDatum;\n\n\t/**\n\t * X coordinate.\n\t */\n\tx: number | undefined;\n\n\t/**\n\t * Y coordinate.\n\t */\n\ty: number | undefined;\n}\n\nexport interface IForceDirectedSettings extends ILinkedHierarchySettings {\n\n\t/**\n\t * Minimum gap in pixels between the nodes.\n\t */\n\tnodePadding?: number;\n\n\t/**\n\t * A force that attracts (or pushes back) all nodes to the center of the\n\t * chart.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Layout_and_force_simulation} for more info\n\t * @default 0.5\n\t */\n\tcenterStrength?: number;\n\n\t/**\n\t * A force that attracts (or pushes back) all nodes to each other.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Layout_and_force_simulation} for more info\n\t * @default -15\n\t */\n\tmanyBodyStrength?: number;\n\n\t/**\n\t * A force that attracts (or pushes back) nodes that are linked together\n\t * via `linkWithField`.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Layout_and_force_simulation} for more info\n\t * @default 0.5\n\t */\n\tlinkWithStrength?: number | undefined;\n\n\t/**\n\t * Resistance acting agains node speed.\n\t *\n\t * The greater the value, the more \"sluggish\" the nodes will be.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Layout_and_force_simulation} for more info\n\t * @default 0.5\n\t */\n\tvelocityDecay?: number;\n\n\t/**\n\t * Length of how long initial force simulation would run in frames.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Layout_and_force_simulation} for more info\n\t * @default 500\n\t */\n\tinitialFrames?: number;\n\n\t/**\n\t * If set to a number will wait X number of frames before revealing\n\t * the tree.\n\t *\n\t * Can be used to hide initial animations where nodes settle into their\n\t * places.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Layout_and_force_simulation} for more info\n\t * @default 10\n\t */\n\tshowOnFrame?: number;\n\n\t/**\n\t * Smallest possible radius for a node circle.\n\t *\n\t * Can be a fixed pixel value or percent relative to chart size.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Sizing_nodes} for more info\n\t * @default 1%\n\t */\n\tminRadius?: number | Percent;\n\n\t/**\n\t * Biggest possible radius for a node circle.\n\t *\n\t * Can be a fixed pixel value or percent relative to chart size.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Sizing_nodes} for more info\n\t * @default 8%\n\t */\n\tmaxRadius?: number | Percent;\n\n\t/**\n\t * Field in data that holds X coordinate of the node.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Fixed_nodes} for more info\n\t */\n\txField?: string;\n\n\t/**\n\t * Field in data that holds X coordinate of the node.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/#Fixed_nodes} for more info\n\t */\n\tyField?: string;\n\n}\n\nexport interface IForceDirectedPrivate extends ILinkedHierarchyPrivate {\n}\n\nexport interface IForceDirectedEvents extends ILinkedHierarchyEvents {\n}\n\n/**\n * Creates a force-directed tree.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/force-directed/} for more info\n * @important\n */\nexport class ForceDirected extends LinkedHierarchy {\n\n\tprotected _tag: string = \"forcedirected\";\n\n\t/**\n\t * @ignore\n\t */\n\tpublic readonly d3forceSimulation: d3Force.Simulation<{}, d3Force.SimulationLinkDatum<d3Force.SimulationNodeDatum>> = d3Force.forceSimulation();\n\n\t/**\n\t * @ignore\n\t */\n\tpublic readonly collisionForce: d3Force.ForceCollide<d3Force.SimulationNodeDatum> = d3Force.forceCollide(20);\n\n\t/**\n\t * @ignore\n\t */\n\tpublic linkForce: d3Force.ForceLink<d3Force.SimulationNodeDatum, d3Force.SimulationLinkDatum<d3Force.SimulationNodeDatum>> = d3Force.forceLink();\n\n\tpublic static className: string = \"ForceDirected\";\n\tpublic static classNames: Array<string> = LinkedHierarchy.classNames.concat([ForceDirected.className]);\n\n\tdeclare public _settings: IForceDirectedSettings;\n\tdeclare public _privateSettings: IForceDirectedPrivate;\n\tdeclare public _dataItemSettings: IForceDirectedDataItem;\n\tdeclare public _events: IForceDirectedEvents;\n\n\tprotected _nodes: Array<any> = [];\n\tprotected _links: Array<any> = [];\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\n\t\tthis.d3forceSimulation.on(\"tick\", () => {\n\t\t\tthis._tick++;\n\t\t\tthis.updateNodePositions();\n\t\t});\n\t}\n\n\tprotected _tick: number = 0;\n\tprotected _nodesDirty: boolean = false;\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\t\tif (this.isDirty(\"showOnFrame\")) {\n\t\t\tconst showOnFrame = this.get(\"showOnFrame\");\n\t\t\tif (showOnFrame > this._tick) {\n\t\t\t\tthis.nodesContainer.setPrivate(\"visible\", false);\n\t\t\t\tthis.linksContainer.setPrivate(\"visible\", false);\n\t\t\t}\n\t\t}\n\n\t\tconst d3forceSimulation = this.d3forceSimulation;\n\n\t\tif (this.isDirty(\"velocityDecay\")) {\n\t\t\td3forceSimulation.velocityDecay(this.get(\"velocityDecay\", 0));\n\t\t}\n\n\t\tif (this.isDirty(\"initialFrames\")) {\n\t\t\td3forceSimulation.alphaDecay(1 - Math.pow(0.001, 1 / this.get(\"initialFrames\", 500)));\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic restartSimulation(alpha: number): void {\n\t\tconst d3forceSimulation = this.d3forceSimulation;\n\t\tif (d3forceSimulation.alpha() < .25) {\n\t\t\td3forceSimulation.alpha(alpha);\n\t\t\td3forceSimulation.restart();\n\t\t}\n\t}\n\n\tpublic _handleRadiusChange() {\n\t\tthis._updateForces();\n\t}\n\n\tprotected processDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst d3ForceNode: any = { index: this._index, x: this.innerWidth() / 2, y: this.innerHeight() / 2, dataItem: dataItem };\n\t\tconst index = this._nodes.push(d3ForceNode) - 1;\n\t\td3ForceNode.index = index;\n\n\t\tthis.d3forceSimulation.nodes(this._nodes);\n\n\t\tdataItem.set(\"d3ForceNode\", d3ForceNode);\n\t\tsuper.processDataItem(dataItem);\n\n\t\tconst node = dataItem.get(\"node\");\n\t\tnode.set(\"x\", -10000);\n\t\tnode.on(\"scale\", () => {\n\t\t\tthis._updateForces();\n\t\t})\n\n\t\tnode.events.on(\"dragged\", () => {\n\t\t\td3ForceNode.fx = node.x();\n\t\t\td3ForceNode.fy = node.y();\n\t\t\tthis._updateForces();\n\t\t})\n\n\t\tnode.events.on(\"dragstop\", () => {\n\t\t\tif (dataItem.get(\"x\") == null) {\n\t\t\t\td3ForceNode.fx = undefined;\n\t\t\t}\n\t\t\tif (dataItem.get(\"y\") == null) {\n\t\t\t\td3ForceNode.fy = undefined;\n\t\t\t}\n\t\t})\n\t}\n\n\tprotected _updateValues(d3HierarchyNode: d3Hierarchy.HierarchyNode<IForceDirectedDataObject>) {\n\t\tsuper._updateValues(d3HierarchyNode);\n\n\t\tthis._nodesDirty = true;\n\n\t\tconst d3forceSimulation = this.d3forceSimulation;\n\t\td3forceSimulation.force(\"collision\", this.collisionForce);\n\t\td3forceSimulation.nodes(this._nodes);\n\n\t\tthis.linkForce = d3Force.forceLink(this._links);\n\t\td3forceSimulation.force(\"link\", this.linkForce);\n\t}\n\n\tprotected _updateVisuals() {\n\t\tsuper._updateVisuals();\n\t\tthis.restartSimulation(.3);\n\t}\n\n\tpublic _updateChildren() {\n\t\tsuper._updateChildren();\n\n\t\tconst d3forceSimulation = this.d3forceSimulation;\n\n\t\tif (this._sizeDirty) {\n\t\t\tlet w = Math.max(50, this.innerWidth());\n\t\t\tlet h = Math.max(50, this.innerHeight());\n\t\t\tlet pt = this.get(\"paddingTop\", 0);\n\t\t\tlet pl = this.get(\"paddingLeft\", 0);\n\n\t\t\tlet centerStrength = this.get(\"centerStrength\", 1);\n\n\t\t\td3forceSimulation.force(\"x\", d3Force.forceX().x(w / 2 + pl).strength(centerStrength * 100 / w));\n\t\t\td3forceSimulation.force(\"y\", d3Force.forceY().y(h / 2 + pt).strength(centerStrength * 100 / h));\n\t\t}\n\n\t\tif (this._nodesDirty) {\n\t\t\tthis._updateForces();\n\t\t}\n\t}\n\n\tpublic _updateForces() {\n\t\tconst d3forceSimulation = this.d3forceSimulation;\n\t\td3forceSimulation.force(\"manybody\", d3Force.forceManyBody().strength((d3node) => {\n\t\t\tlet dataItem = (d3node as any).dataItem;\n\t\t\tlet node = dataItem.get(\"node\") as LinkedHierarchyNode;\n\t\t\tlet circle = dataItem.get(\"circle\");\n\t\t\tlet manyBodyStrength = this.get(\"manyBodyStrength\", -15);\n\n\t\t\tif (circle) {\n\t\t\t\treturn circle.get(\"radius\", 1) * node.get(\"scale\", 1) * manyBodyStrength;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}));\n\n\t\tthis.collisionForce.radius((d3node) => {\n\t\t\tlet dataItem = (d3node as any).dataItem;\n\t\t\tlet node = dataItem.get(\"node\") as LinkedHierarchyNode;\n\t\t\tlet circle = dataItem.get(\"circle\");\n\t\t\tlet outerCircle = dataItem.get(\"outerCircle\");\n\t\t\tif (circle && outerCircle) {\n\t\t\t\tlet radius = circle.get(\"radius\", 1);\n\n\t\t\t\tif (!outerCircle.isHidden()) {\n\t\t\t\t\tradius = radius * outerCircle.get(\"scale\", 1.1);\n\t\t\t\t}\n\n\t\t\t\tradius *= node.get(\"scale\", 1);\n\n\t\t\t\treturn radius + this.get(\"nodePadding\", 0);\n\t\t\t}\n\t\t})\n\t\tthis.restartSimulation(0.3);\n\t}\n\n\tprotected _animatePositions(_dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\t// void, do not remove\n\t}\n\n\tpublic _clearDirty() {\n\t\tsuper._clearDirty();\n\t\tthis._nodesDirty = false;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateNodePositions() {\n\t\tconst linkForce = this.linkForce;\n\t\tif (linkForce) {\n\t\t\tlinkForce.distance((linkDatum) => {\n\t\t\t\treturn this.getDistance(linkDatum)\n\t\t\t});\n\t\t\tlinkForce.strength((linkDatum) => {\n\t\t\t\treturn this.getStrength(linkDatum)\n\t\t\t});\n\t\t}\n\t\tif (this._tick == this.get(\"showOnFrame\")) {\n\t\t\tthis.nodesContainer.setPrivate(\"visible\", true);\n\t\t\tthis.linksContainer.setPrivate(\"visible\", true);\n\t\t}\n\n\t\tlet d3Nodes = this.d3forceSimulation.nodes();\n\n\t\t$array.each(d3Nodes, (d3Node: any) => {\n\t\t\tconst dataItem = d3Node.dataItem as DataItem<this[\"_dataItemSettings\"]>;\n\t\t\tconst node = dataItem.get(\"node\");\n\n\t\t\tnode.set(\"x\", d3Node.x);\n\t\t\tnode.set(\"y\", d3Node.y);\n\t\t})\n\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateLinkWith(dataItems: Array<DataItem<this[\"_dataItemSettings\"]>>) {\n\t\t$array.each(dataItems, (dataItem) => {\n\t\t\tconst linkWith = dataItem.get(\"linkWith\");\n\t\t\tif (linkWith) {\n\t\t\t\t$array.each(linkWith, (id) => {\n\t\t\t\t\tconst linkWithDataItem = this._getDataItemById(this.dataItems, id);\n\n\t\t\t\t\tif (linkWithDataItem) {\n\t\t\t\t\t\tthis.linkDataItems(dataItem, linkWithDataItem, this.get(\"linkWithStrength\"));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst children = dataItem.get(\"children\");\n\t\t\tif (children) {\n\t\t\t\tthis.updateLinkWith(children);\n\t\t\t}\n\t\t})\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tprotected getDistance(linkDatum: any) {\n\t\tlet sourceDataItem: DataItem<this[\"_dataItemSettings\"]> = <DataItem<this[\"_dataItemSettings\"]>>linkDatum.sourceDataItem;\n\t\tlet targetDataItem: DataItem<this[\"_dataItemSettings\"]> = <DataItem<this[\"_dataItemSettings\"]>>linkDatum.targetDataItem;\n\n\t\tlet distance = 0;\n\n\t\tif (sourceDataItem && targetDataItem) {\n\n\t\t\tconst targetNode = targetDataItem.get(\"node\");\n\t\t\tif (targetNode.isHidden()) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tlet link = linkDatum.link;\n\t\t\tif (link) {\n\t\t\t\tdistance = link.get(\"distance\", 1);\n\t\t\t}\n\n\t\t\tconst sourceNode = sourceDataItem.get(\"node\");\n\n\t\t\tif (targetNode.isHidden()) {\n\t\t\t\tdistance = 1;\n\t\t\t}\n\n\t\t\treturn (distance * (sourceDataItem.get(\"circle\").get(\"radius\", 1) * sourceNode.get(\"scale\", 1) + targetDataItem.get(\"circle\").get(\"radius\", 1) * targetNode.get(\"scale\", 1)));\n\t\t}\n\t\treturn distance;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tprotected getStrength(linkDatum: any) {\n\t\tlet strength = 0;\n\n\t\tlet link = linkDatum.link;\n\t\tif (link) {\n\t\t\tstrength = link.get(\"strength\", 1);\n\t\t}\n\n\t\tconst targetDataItem = linkDatum.targetDataItem;\n\t\tstrength *= targetDataItem.get(\"node\").get(\"scale\");\n\n\t\treturn strength;\n\t}\n\n\tprotected _updateNode(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._updateNode(dataItem);\n\t\tthis._updateRadius(dataItem);\n\n\t\tconst x = dataItem.get(\"x\");\n\t\tconst y = dataItem.get(\"y\");\n\n\t\tconst d3Node = dataItem.get(\"d3ForceNode\");\n\n\t\tif (x != null) {\n\t\t\t(d3Node as any).fx = $utils.relativeToValue(x, this.innerWidth());\n\t\t}\n\t\telse {\n\t\t\t(d3Node as any).fx = undefined;\n\t\t}\n\n\t\tif (y != null) {\n\t\t\t(d3Node as any).fy = $utils.relativeToValue(y, this.innerHeight());\n\t\t}\n\t\telse {\n\t\t\t(d3Node as any).fx = undefined;\n\t\t}\n\t}\n\n\tprotected _updateRadius(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tlet size = (this.innerWidth() + this.innerHeight()) / 2;\n\n\t\tlet minRadius = $utils.relativeToValue(this.get(\"minRadius\", 1), size);\n\t\tlet maxRadius = $utils.relativeToValue(this.get(\"maxRadius\", 5), size);\n\n\t\tlet valueWorking = dataItem.get(\"sum\");\n\n\t\tlet radius = maxRadius;\n\n\t\tconst min = this.getPrivate(\"valueLow\", 0);\n\t\tconst max = this.getPrivate(\"valueHigh\", 0);\n\n\t\tif (max > 0) {\n\t\t\tradius = minRadius + (valueWorking - min) / (max - min) * (maxRadius - minRadius);\n\t\t}\n\n\t\tif (!$type.isNumber(radius)) {\n\t\t\tradius = minRadius;\n\t\t}\n\n\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\tconst easing = this.get(\"animationEasing\");\n\n\t\tdataItem.get(\"circle\").animate({ key: \"radius\", to: radius, duration: duration, easing: easing });\n\t}\n\n\tprotected _processLink(link: HierarchyLink, source: DataItem<this[\"_dataItemSettings\"]>, target: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst d3Link = { link: link, source: source.get(\"d3ForceNode\").index, target: target.get(\"d3ForceNode\").index, sourceDataItem: source, targetDataItem: target };\n\t\tthis._links.push(d3Link);\n\t\tlink.setPrivate(\"d3Link\", d3Link);\n\n\t\tthis.linkForce = d3Force.forceLink(this._links);\n\t\tthis.d3forceSimulation.force(\"link\", this.linkForce);\n\t\tthis.restartSimulation(0.5);\n\t}\n\n\tprotected _disposeLink(link: HierarchyLink) {\n\t\tsuper._disposeLink(link);\n\t\t$array.remove(this._links, link.getPrivate(\"d3Link\"));\n\t}\n\n\tprotected _handleUnlink() {\n\t\tthis.restartSimulation(0.5);\n\t}\n\n\tprotected _onDataClear() {\n\n\t\tsuper._onDataClear();\n\n\t\tthis._nodes = [];\n\t\tthis._links = [];\n\t}\n}\n","import constant from \"./constant.js\";\n\nexport default function(x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}\n","import constant from \"./constant.js\";\n\nexport default function(y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport {x, y} from \"./simulation.js\";\n\nexport default function() {\n  var nodes,\n      node,\n      random,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i, n = nodes.length, tree = quadtree(nodes, x, y).visitAfter(accumulate);\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    strengths = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n  }\n\n  function accumulate(quad) {\n    var strength = 0, q, c, weight = 0, x, y, i;\n\n    // For internal nodes, accumulate forces from child quadrants.\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n      quad.x = x / weight;\n      quad.y = y / weight;\n    }\n\n    // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n      q = quad;\n      q.x = q.data.x;\n      q.y = q.data.y;\n      do strength += strengths[q.data.index];\n      while (q = q.next);\n    }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y;\n\n    // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(random), l += x * x;\n        if (y === 0) y = jiggle(random), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n      return true;\n    }\n\n    // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return;\n\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(random), l += x * x;\n      if (y === 0) y = jiggle(random), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do if (quad.data !== node) {\n      w = strengths[quad.data.index] * alpha / l;\n      node.vx += x * w;\n      node.vy += y * w;\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function(_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function(_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function(_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { HierarchyNode } from \"./HierarchyNode\";\n\nimport { Hierarchy, IHierarchyPrivate, IHierarchySettings, IHierarchyDataItem, IHierarchyEvents } from \"./Hierarchy\";\nimport { Circle } from \"../../core/render/Circle\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as d3hierarchy from \"d3-hierarchy\";\nimport * as $utils from \"../../core/util/Utils\";\n\n/**\n * @ignore\n */\nexport interface IPackDataObject {\n\tname?: string,\n\tvalue?: number,\n\tchildren?: IPackDataObject[],\n\tdataItem?: DataItem<IPackDataItem>\n};\n\nexport interface IPackDataItem extends IHierarchyDataItem {\n\n\t/**\n\t * An array of data items of node's children.\n\t */\n\tchildren: Array<DataItem<IPackDataItem>>;\n\n\t/**\n\t * A data item of node's parent.\n\t */\n\tparent: DataItem<IPackDataItem>;\n\n\t/**\n\t * @ignore\n\t */\n\td3HierarchyNode: d3hierarchy.HierarchyCircularNode<IPackDataObject>;\n\n\t/**\n\t * A [[Circle]] element of the node.\n\t */\n\tcircle: Circle;\n\n}\n\nexport interface IPackSettings extends IHierarchySettings {\n\n\t/**\n\t * Gap between nodes, in pixels.\n\t *\n\t * @since 5.2.6\n\t */\n\tnodePadding?:number\n\n}\n\nexport interface IPackPrivate extends IHierarchyPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tscaleR?: number;\n\n}\n\nexport interface IPackEvents extends IHierarchyEvents {\n}\n\n/**\n * Builds a pack diagram.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/sunburst/} for more info\n * @important\n */\nexport class Pack extends Hierarchy {\n\n\tdeclare public _settings: IPackSettings;\n\tdeclare public _privateSettings: IPackPrivate;\n\tdeclare public _dataItemSettings: IPackDataItem;\n\n\tprotected _tag: string = \"pack\";\n\n\tpublic static className: string = \"Pack\";\n\tpublic static classNames: Array<string> = Hierarchy.classNames.concat([Pack.className]);\n\n\tpublic _packLayout = d3hierarchy.pack();\n\tdeclare public _rootNode: d3hierarchy.HierarchyCircularNode<IPackDataObject> | undefined;\n\tpublic _packData: IPackDataObject | undefined;\n\n\t/**\n\t * A list of node circle elements in a [[Pack]] chart.\n\t *\n\t * @default new ListTemplate<Circle>\n\t */\n\tpublic readonly circles: ListTemplate<Circle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Circle._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.circles.template.get(\"themeTags\", []), [this._tag, \"shape\"])\n\t\t}, [this.circles.template])\n\t);\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\t\tthis.setPrivate(\"scaleR\", 1);\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isPrivateDirty(\"scaleR\")) {\n\t\t\tif (this._rootNode) {\n\t\t\t\tthis._updateNodesScale(this._rootNode);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _updateVisuals() {\n\t\tif (this._rootNode) {\n\t\t\tconst packLayout = this._packLayout;\n\t\t\tpackLayout.size([this.innerWidth(), this.innerHeight()]);\n\t\t\tpackLayout(this._rootNode);\n\t\t\tpackLayout.padding(this.get(\"nodePadding\", 0));\n\t\t\tthis._updateNodes(this._rootNode);\n\t\t}\n\t}\n\n\tprotected _updateNode(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._updateNode(dataItem);\n\n\t\tconst node = dataItem.get(\"node\");\n\t\tconst circle = dataItem.get(\"circle\");\n\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\n\t\tconst scaleR = this.getPrivate(\"scaleR\", 1);\n\n\t\tconst x = hierarchyNode.x * scaleR;\n\t\tconst y = hierarchyNode.y * scaleR;\n\t\tconst radius = hierarchyNode.r * scaleR;\n\n\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\tconst easing = this.get(\"animationEasing\");\n\n\t\tnode.animate({ key: \"x\", to: x, duration: duration, easing: easing })\n\t\tnode.animate({ key: \"y\", to: y, duration: duration, easing: easing })\n\n\t\tif (circle) {\n\t\t\tconst fill = dataItem.get(\"fill\");\n\n\t\t\tcircle.animate({ key: \"radius\", to: radius, duration: duration, easing: easing })\n\t\t\tcircle._setDefault(\"fill\", fill);\n\t\t\tcircle._setDefault(\"stroke\", fill);\n\t\t}\n\t}\n\n\tprotected _updateNodesScale(hierarchyNode: d3hierarchy.HierarchyCircularNode<IPackDataObject>) {\n\t\tconst dataItem = hierarchyNode.data.dataItem;\n\t\tif (dataItem) {\n\t\t\tconst node = dataItem.get(\"node\");\n\t\t\tconst circle = dataItem.get(\"circle\");\n\n\t\t\tconst scaleR = this.getPrivate(\"scaleR\", 1);\n\n\t\t\tconst x = hierarchyNode.x * scaleR;\n\t\t\tconst y = hierarchyNode.y * scaleR;\n\t\t\tconst radius = hierarchyNode.r * scaleR;\n\n\t\t\tnode.setAll({ x: x, y: y })\n\t\t\tcircle.set(\"radius\", radius);\n\n\t\t\tconst hierarchyChildren = hierarchyNode.children;\n\t\t\tif (hierarchyChildren) {\n\t\t\t\t$array.each(hierarchyChildren, (hierarchyChild) => {\n\t\t\t\t\tthis._updateNodesScale(hierarchyChild)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>): HierarchyNode {\n\t\tconst node = super.makeNode(dataItem);\n\n\t\tconst circle = node.children.moveValue(this.circles.make(), 0);\n\t\tnode.setPrivate(\"tooltipTarget\", circle);\n\t\tthis.circles.push(circle);\n\t\tdataItem.setRaw(\"circle\", circle);\n\n\t\tconst label = dataItem.get(\"label\");\n\n\t\tcircle.on(\"radius\", () => {\n\t\t\tconst d = circle.get(\"radius\", this.width()) * 2;\n\t\t\tlabel.setAll({ maxWidth: d, maxHeight: d });\n\t\t})\n\n\t\treturn node;\n\t}\n\n\tpublic _zoom(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\n\t\tlet x = hierarchyNode.x;\n\t\tlet y = hierarchyNode.y;\n\t\tlet r = hierarchyNode.r;\n\n\t\tlet scaleR = Math.min(this.innerWidth(), this.innerHeight()) / (r * 2);\n\n\t\tconst easing = this.get(\"animationEasing\");\n\t\tlet duration = this.get(\"animationDuration\", 0);\n\n\t\tif (!this.inited) {\n\t\t\tduration = 0;\n\t\t}\n\n\t\tthis.animatePrivate({ key: \"scaleR\", to: scaleR, duration: duration, easing: easing });\n\n\t\tconst nodesContainer = this.nodesContainer;\n\t\tnodesContainer.animate({ key: \"x\", from: nodesContainer.x(), to: this.width() / 2 - x * scaleR, duration: duration, easing: easing });\n\t\tnodesContainer.animate({ key: \"y\", from: nodesContainer.y(), to: this.height() / 2 - y * scaleR, duration: duration, easing: easing });\n\t}\n}\n","export default function(node) {\n  node.x0 = Math.round(node.x0);\n  node.y0 = Math.round(node.y0);\n  node.x1 = Math.round(node.x1);\n  node.y1 = Math.round(node.y1);\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n","import roundNode from \"./treemap/round.js\";\nimport treemapDice from \"./treemap/dice.js\";\n\nexport default function() {\n  var dx = 1,\n      dy = 1,\n      padding = 0,\n      round = false;\n\n  function partition(root) {\n    var n = root.height + 1;\n    root.x0 =\n    root.y0 = padding;\n    root.x1 = dx;\n    root.y1 = dy / n;\n    root.eachBefore(positionNode(dy, n));\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(dy, n) {\n    return function(node) {\n      if (node.children) {\n        treemapDice(node, node.x0, dy * (node.depth + 1) / n, node.x1, dy * (node.depth + 2) / n);\n      }\n      var x0 = node.x0,\n          y0 = node.y0,\n          x1 = node.x1 - padding,\n          y1 = node.y1 - padding;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      node.x0 = x0;\n      node.y0 = y0;\n      node.x1 = x1;\n      node.y1 = y1;\n    };\n  }\n\n  partition.round = function(x) {\n    return arguments.length ? (round = !!x, partition) : round;\n  };\n\n  partition.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], partition) : [dx, dy];\n  };\n\n  partition.padding = function(x) {\n    return arguments.length ? (padding = +x, partition) : padding;\n  };\n\n  return partition;\n}\n","import type { HierarchyNode } from \"./HierarchyNode\";\nimport type { DataItem } from \"../../core/render/Component\";\n\nimport { Hierarchy, IHierarchyPrivate, IHierarchySettings, IHierarchyDataItem, IHierarchyDataObject } from \"./Hierarchy\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as d3hierarchy from \"d3-hierarchy\";\n\n/**\n * @ignore\n */\nexport interface IPartitionDataObject {\n\tname?: string,\n\tvalue?: number,\n\tchildren?: IPartitionDataObject[],\n\tdataItem?: DataItem<IPartitionDataItem>\n};\n\nexport interface IPartitionDataItem extends IHierarchyDataItem {\n\n\t/**\n\t * Data items of child nodes.\n\t */\n\tchildren: Array<DataItem<IPartitionDataItem>>;\n\n\t/**\n\t * Data it of a parent node.\n\t */\n\tparent: DataItem<IPartitionDataItem>;\n\n\t/**\n\t * @ignore\n\t */\n\td3HierarchyNode: d3hierarchy.HierarchyRectangularNode<IHierarchyDataObject>;\n\n\t/**\n\t * A [[RoundedRectangle]] element of a node.\n\t */\n\trectangle: RoundedRectangle;\n\n}\n\nexport interface IPartitionSettings extends IHierarchySettings {\n\n\t/**\n\t * Gap between nodes in pixels.\n\t *\n\t * @default 0\n\t */\n\tnodePadding?: number;\n\n\t/**\n\t * Orientation of the diagram.\n\t *\n\t * @default \"vertical\"\n\t */\n\torientation?: \"horizontal\" | \"vertical\";\n\n}\n\nexport interface IPartitionPrivate extends IHierarchyPrivate {\n\n\t/**\n\t * Current horizontal scale.\n\t */\n\tscaleX?: number;\n\n\t/**\n\t * Current vertical scale.\n\t */\n\tscaleY?: number;\n\n}\n\n/**\n * Partition series.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/partition/} for more info\n */\nexport class Partition extends Hierarchy {\n\n\tdeclare public _settings: IPartitionSettings;\n\tdeclare public _privateSettings: IPartitionPrivate;\n\tdeclare public _dataItemSettings: IPartitionDataItem;\n\n\tprotected _tag: string = \"partition\";\n\n\tpublic static className: string = \"Partition\";\n\tpublic static classNames: Array<string> = Hierarchy.classNames.concat([Partition.className]);\n\n\t/**\n\t * A list of node rectangle elements in a [[Partition]] chart.\n\t *\n\t * @default new ListTemplate<RoundedRectangle>\n\t */\n\tpublic readonly rectangles: ListTemplate<RoundedRectangle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => RoundedRectangle._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.rectangles.template.get(\"themeTags\", []), [this._tag, \"shape\"])\n\t\t}, [this.rectangles.template])\n\t);\n\n\tpublic _partitionLayout = d3hierarchy.partition();\n\n\tdeclare public _rootNode: d3hierarchy.HierarchyRectangularNode<IPartitionDataObject> | undefined;\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"partition\", this._settings.orientation || \"vertical\"]);\n\t\tsuper._afterNew();\n\t\tthis.setPrivate(\"scaleX\", 1);\n\t\tthis.setPrivate(\"scaleY\", 1);\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isDirty(\"nodePadding\")) {\n\t\t\tif (this._rootNode) {\n\t\t\t\tthis._updateNodes(this._rootNode);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isPrivateDirty(\"scaleX\") || this.isPrivateDirty(\"scaleY\")) {\n\t\t\tif (this._rootNode) {\n\t\t\t\tthis._updateNodesScale(this._rootNode);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"orientation\")) {\n\t\t\tthis._updateVisuals();\n\t\t}\n\t}\n\n\tprotected _updateVisuals() {\n\t\tif (this._rootNode) {\n\t\t\tconst partitionLayout = this._partitionLayout;\n\t\t\tlet w = this.innerWidth();\n\t\t\tlet h = this.innerHeight();\n\n\t\t\tif (this.get(\"orientation\") == \"horizontal\") {\n\t\t\t\t[w, h] = [h, w];\n\t\t\t}\n\n\t\t\tpartitionLayout.size([w, h]);\n\n\t\t\tconst nodePadding = this.get(\"nodePadding\");\n\n\t\t\tif ($type.isNumber(nodePadding)) {\n\t\t\t\tpartitionLayout.padding(nodePadding);\n\t\t\t}\n\n\n\t\t\tpartitionLayout(this._rootNode);\n\t\t\tthis._updateNodes(this._rootNode);\n\t\t}\n\t}\n\n\tprotected _updateNode(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._updateNode(dataItem);\n\n\t\tconst node = dataItem.get(\"node\");\n\t\tconst rectangle = dataItem.get(\"rectangle\");\n\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\n\t\tconst scaleX = this.getPrivate(\"scaleX\", 1);\n\t\tconst scaleY = this.getPrivate(\"scaleY\", 1);\n\n\t\tlet x0, x1, y0, y1: number;\n\n\t\tif (this.get(\"orientation\") == \"horizontal\") {\n\t\t\tx0 = hierarchyNode.y0 * scaleX;\n\t\t\tx1 = hierarchyNode.y1 * scaleX;\n\t\t\ty0 = hierarchyNode.x0 * scaleY;\n\t\t\ty1 = hierarchyNode.x1 * scaleY;\n\t\t}\n\t\telse {\n\t\t\tx0 = hierarchyNode.x0 * scaleX;\n\t\t\tx1 = hierarchyNode.x1 * scaleX;\n\t\t\ty0 = hierarchyNode.y0 * scaleY;\n\t\t\ty1 = hierarchyNode.y1 * scaleY;\n\t\t}\n\t\tlet w = x1 - x0;\n\t\tlet h = y1 - y0;\n\n\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\tconst easing = this.get(\"animationEasing\");\n\n\t\tnode.animate({ key: \"x\", to: x0, duration: duration, easing: easing })\n\t\tnode.animate({ key: \"y\", to: y0, duration: duration, easing: easing })\n\t\tnode.animate({ key: \"width\", to: w, duration: duration, easing: easing })\n\t\tnode.animate({ key: \"height\", to: h, duration: duration, easing: easing })\n\n\t\tif (rectangle) {\n\t\t\tconst fill = dataItem.get(\"fill\");\n\t\t\t\n\t\t\trectangle.animate({ key: \"width\", to: w, duration: duration, easing: easing })\n\t\t\trectangle.animate({ key: \"height\", to: h, duration: duration, easing: easing })\n\t\t\trectangle._setDefault(\"fill\", fill);\n\t\t\trectangle._setDefault(\"stroke\", fill);\t\t\t\n\t\t}\n\t}\n\n\n\tprotected _updateNodesScale(hierarchyNode: d3hierarchy.HierarchyRectangularNode<IPartitionDataObject>) {\n\t\tconst dataItem = hierarchyNode.data.dataItem;\n\t\tif (dataItem) {\n\t\t\tconst node = dataItem.get(\"node\");\n\t\t\tconst rectangle = dataItem.get(\"rectangle\");\n\n\t\t\tconst scaleX = this.getPrivate(\"scaleX\", 1);\n\t\t\tconst scaleY = this.getPrivate(\"scaleY\", 1);\n\n\t\t\tlet x0, x1, y0, y1: number;\n\n\t\t\tif (this.get(\"orientation\") == \"horizontal\") {\n\t\t\t\tx0 = hierarchyNode.y0 * scaleX;\n\t\t\t\tx1 = hierarchyNode.y1 * scaleX;\n\t\t\t\ty0 = hierarchyNode.x0 * scaleY;\n\t\t\t\ty1 = hierarchyNode.x1 * scaleY;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx0 = hierarchyNode.x0 * scaleX;\n\t\t\t\tx1 = hierarchyNode.x1 * scaleX;\n\t\t\t\ty0 = hierarchyNode.y0 * scaleY;\n\t\t\t\ty1 = hierarchyNode.y1 * scaleY;\n\t\t\t}\n\n\t\t\tconst w = x1 - x0;\n\t\t\tconst h = y1 - y0;\n\n\t\t\tnode.setAll({ x: x0, y: y0, width: w, height: h });\n\t\t\trectangle.setAll({ width: w, height: h });\n\n\t\t\tconst hierarchyChildren = hierarchyNode.children;\n\t\t\tif (hierarchyChildren) {\n\t\t\t\t$array.each(hierarchyChildren, (hierarchyChild) => {\n\t\t\t\t\tthis._updateNodesScale(hierarchyChild)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>): HierarchyNode {\n\t\tconst node = super.makeNode(dataItem);\n\t\tthis._makeNode(dataItem, node);\n\t\treturn node;\n\t}\n\n\tprotected _makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>, node: HierarchyNode) {\n\t\tconst rectangle = node.children.moveValue(this.rectangles.make(), 0);\n\t\tnode.setPrivate(\"tooltipTarget\", rectangle);\n\t\tdataItem.setRaw(\"rectangle\", rectangle);\n\t\trectangle._setDataItem(dataItem);\n\n\t\tconst label = dataItem.get(\"label\");\n\n\t\trectangle.on(\"width\", () => {\n\t\t\tlabel.set(\"maxWidth\", rectangle.width());\n\t\t})\n\n\t\trectangle.on(\"height\", () => {\n\t\t\tlabel.set(\"maxHeight\", rectangle.height());\n\t\t})\n\t}\n\n\tprotected _zoom(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tlet x0 = 0;\n\t\tlet x1 = 0;\n\t\tlet y0 = 0;\n\t\tlet y1 = 0;\n\n\t\tconst upDepth = this.get(\"upDepth\", 0) + 1;\n\t\tconst topDepth = this.get(\"topDepth\", 0);\n\n\t\tconst width = this.innerWidth();\n\t\tconst height = this.innerHeight();\n\n\t\tconst maxDepth = this.getPrivate(\"maxDepth\", 1);\n\t\tconst levelHeight = height / (maxDepth + 1);\n\t\tconst levelWidth = width / (maxDepth + 1);\n\t\tconst initialDepth = Math.min(this.get(\"initialDepth\", 1), maxDepth - topDepth);\n\n\t\tlet downDepth = this._currentDownDepth;\n\t\tif (downDepth == null) {\n\t\t\tdownDepth = this.get(\"downDepth\", 1);\n\t\t}\n\n\t\tif (dataItem) {\n\t\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\t\t\tlet currentDepth = hierarchyNode.depth;\n\n\t\t\tif (this.get(\"orientation\") == \"horizontal\") {\n\t\t\t\tx0 = hierarchyNode.y0;\n\t\t\t\tx1 = hierarchyNode.y1;\n\n\t\t\t\ty0 = hierarchyNode.x0;\n\t\t\t\ty1 = hierarchyNode.x1;\n\n\t\t\t\tx0 = x1 - levelWidth * upDepth;\n\t\t\t\tx1 = x0 + levelWidth * (downDepth + 1);\n\n\t\t\t\tif (currentDepth < topDepth) {\n\t\t\t\t\ty0 = 0;\n\t\t\t\t\ty1 = height;\n\t\t\t\t\tx0 = levelWidth * topDepth;\n\t\t\t\t\tx1 = x0 + levelWidth * initialDepth;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx0 = hierarchyNode.x0;\n\t\t\t\tx1 = hierarchyNode.x1;\n\n\t\t\t\ty0 = hierarchyNode.y0;\n\t\t\t\ty1 = hierarchyNode.y1;\n\n\t\t\t\ty0 = y1 - levelHeight * upDepth;\n\t\t\t\ty1 = y0 + levelHeight * (downDepth + 1);\n\n\t\t\t\tif (currentDepth < topDepth) {\n\t\t\t\t\tx0 = 0;\n\t\t\t\t\tx1 = width;\n\t\t\t\t\ty0 = levelHeight * topDepth;\n\t\t\t\t\ty1 = y0 + levelHeight * initialDepth;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet scaleX = width / (x1 - x0);\n\t\tlet scaleY = height / (y1 - y0);\n\n\t\tconst easing = this.get(\"animationEasing\");\n\t\tlet duration = this.get(\"animationDuration\", 0);\n\n\t\tif (!this.inited) {\n\t\t\tduration = 0;\n\t\t}\n\n\t\tthis.animatePrivate({ key: \"scaleX\", to: scaleX, duration: duration, easing: easing });\n\t\tthis.animatePrivate({ key: \"scaleY\", to: scaleY, duration: duration, easing: easing });\n\n\t\tthis.nodesContainer.animate({ key: \"x\", to: -x0 * scaleX, duration: duration, easing: easing });\n\t\tthis.nodesContainer.animate({ key: \"y\", to: -y0 * scaleY, duration: duration, easing: easing });\n\t}\n}\n","import type { Root } from \"../../core/Root\";\nimport type { DataItem } from \"../../core/render/Component\";\nimport type { HierarchyNode } from \"./HierarchyNode\";\nimport type { Bullet } from \"../../core/render/Bullet\";\nimport type { Series } from \"../../core/render/Series\";\n\nimport { Partition, IPartitionPrivate, IPartitionSettings, IPartitionDataItem } from \"./Partition\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport { Slice } from \"../../core/render/Slice\";\nimport { RadialLabel } from \"../../core/render/RadialLabel\";\nimport { Percent, p100, p50 } from \"../../core/util/Percent\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as d3hierarchy from \"d3-hierarchy\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $math from \"../../core/util/Math\";\n\n/**\n * @ignore\n */\nexport interface ISunburstDataObject {\n\tname?: string,\n\tvalue?: number,\n\tchildren?: ISunburstDataObject[],\n\tdataItem?: DataItem<ISunburstDataItem>\n};\n\nexport interface ISunburstDataItem extends IPartitionDataItem {\n\n\t/**\n\t * Data items of child nodes.\n\t */\n\tchildren: Array<DataItem<ISunburstDataItem>>;\n\n\t/**\n\t * Data item of a parent node.\n\t */\n\tparent: DataItem<ISunburstDataItem>;\n\n\t/**\n\t * @ignore\n\t */\n\td3PartitionNode: d3hierarchy.HierarchyRectangularNode<ISunburstDataObject>;\n\n\t/**\n\t * A [[Slice]] element of the node.\n\t */\n\tslice: Slice;\n\n}\n\nexport interface ISunburstSettings extends IPartitionSettings {\n\n\t/**\n\t * Start angle of the series.\n\t *\n\t * @default -90\n\t */\n\tstartAngle?: number;\n\n\t/**\n\t * End angle of the series.\n\t *\n\t * @default 270\n\t */\n\tendAngle?: number;\n\n\t/**\n\t * Inner radius of the suburst pie.\n\t *\n\t * Setting to negative number will mean pixels from outer radius.\n\t *\n\t * @default 0\n\t */\n\tinnerRadius?: number | Percent;\n\n\t/**\n\t * Outer radius of the sunburst pie.\n\t *\n\t * @default 100%\n\t */\n\tradius?: number | Percent;\n\n}\n\nexport interface ISunburstPrivate extends IPartitionPrivate {\n\n\t/**\n\t * @ignore\n\t */\n\tdr: number;\n\n\t/**\n\t * @ignore\n\t */\n\tdx: number;\n\n\t/**\n\t * @ignore\n\t */\n\tinnerRadius: number;\n\n\t/**\n\t * @ignore\n\t */\n\thierarchySize?: number;\n\n}\n\n/**\n * Builds a sunburst diagram.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/sunburst/} for more info\n * @important\n */\nexport class Sunburst extends Partition {\n\n\tdeclare public _settings: ISunburstSettings;\n\tdeclare public _privateSettings: ISunburstPrivate;\n\tdeclare public _dataItemSettings: ISunburstDataItem;\n\n\tprotected _tag: string = \"sunburst\";\n\n\tpublic static className: string = \"Sunburst\";\n\tpublic static classNames: Array<string> = Partition.classNames.concat([Sunburst.className]);\n\n\tpublic _partitionLayout = d3hierarchy.partition();\n\n\tdeclare public _rootNode: d3hierarchy.HierarchyRectangularNode<ISunburstDataObject> | undefined;\n\n\t/**\n\t * A list of node slice elements in a [[Sunburst]] chart.\n\t *\n\t * @default new ListTemplate<Slice>\n\t */\n\tpublic readonly slices: ListTemplate<Slice> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => Slice._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.slices.template.get(\"themeTags\", []), [this._tag, \"hierarchy\", \"node\", \"shape\"])\n\t\t}, [this.slices.template])\n\t);\n\n\t/**\n\t * A list of label elements in a [[Hierarchy]] chart.\n\t *\n\t * @default new ListTemplate<RadialLabel>\n\t */\n\tpublic readonly labels: ListTemplate<RadialLabel> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => RadialLabel._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), [this._tag])\n\t\t}, [this.labels.template])\n\t);\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\t\tthis.nodesContainer.setAll({ x: p50, y: p50 });\n\t\tthis.setPrivateRaw(\"dx\", 0);\n\t\tthis.setPrivateRaw(\"dr\", 0);\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isPrivateDirty(\"dr\") || this.isPrivateDirty(\"dx\")) {\n\t\t\tif (this._rootNode) {\n\t\t\t\tthis._updateNodesScale(this._rootNode);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _updateVisuals() {\n\t\tif (this._rootNode) {\n\t\t\tconst partitionLayout = this._partitionLayout;\n\n\t\t\tlet bounds = $math.getArcBounds(0, 0, this.get(\"startAngle\", 0), this.get(\"endAngle\", 360), 1);\n\n\t\t\tlet w = this.innerWidth();\n\t\t\tlet h = this.innerHeight();\n\n\t\t\tconst wr = w / (bounds.right - bounds.left);\n\t\t\tconst hr = h / (bounds.bottom - bounds.top);\n\n\t\t\tlet s = Math.min(wr, hr);\n\n\t\t\tlet r = $utils.relativeToValue(this.get(\"radius\", p100), s);\n\t\t\tlet ir = $utils.relativeToValue(this.get(\"innerRadius\", 0), r);\n\n\t\t\tif (ir < 0) {\n\t\t\t\tir = r + ir;\n\t\t\t}\n\n\t\t\ts = r - ir;\n\n\t\t\tthis.setPrivateRaw(\"innerRadius\", ir);\n\t\t\tthis.setPrivateRaw(\"hierarchySize\", s);\n\n\t\t\tpartitionLayout.size([s, s]);\n\n\t\t\tthis.nodesContainer.setAll({\n\t\t\t\tdy: -r * (bounds.bottom + bounds.top) / 2, dx: -r * (bounds.right + bounds.left) / 2\n\t\t\t})\n\n\t\t\tconst nodePadding = this.get(\"nodePadding\");\n\n\t\t\tif ($type.isNumber(nodePadding)) {\n\t\t\t\tpartitionLayout.padding(nodePadding);\n\t\t\t}\n\n\n\t\t\tpartitionLayout(this._rootNode);\n\t\t\tthis._updateNodes(this._rootNode);\n\t\t}\n\t}\n\n\tprotected _updateNode(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._updateNode(dataItem);\n\n\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\t\tconst node = dataItem.get(\"node\");\n\n\t\tnode.setAll({ x: 0, y: 0 });\n\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\tconst easing = this.get(\"animationEasing\");\n\n\t\tconst scaleX = this.getPrivate(\"scaleX\", 1);\n\t\tconst scaleY = this.getPrivate(\"scaleY\", 1);\n\t\tconst dr = this.getPrivate(\"dr\", 0);\n\t\tconst dx = this.getPrivate(\"dx\", 0);\n\n\t\tconst x0 = hierarchyNode.x0 * scaleX + dx;\n\t\tconst x1 = hierarchyNode.x1 * scaleX + dx;\n\t\tconst y0 = hierarchyNode.y0 * scaleY;\n\t\tconst y1 = hierarchyNode.y1 * scaleY;\n\n\t\tconst ir = this.getPrivate(\"innerRadius\");\n\t\tconst hs = this.getPrivate(\"hierarchySize\", 0);\n\n\t\tconst slice = dataItem.get(\"slice\");\n\t\tif (slice) {\n\t\t\tconst startAngle = this.get(\"startAngle\", -90);\n\t\t\tconst endAngle = this.get(\"endAngle\", 270);\n\n\t\t\tconst sliceStartAngle = startAngle + x0 / hs * (endAngle - startAngle);\n\t\t\tconst arc = startAngle + x1 / hs * (endAngle - startAngle) - sliceStartAngle;\n\n\t\t\tlet sliceInnerRadius = ir + y0;\n\t\t\tlet sliceRadius = ir + y1;\n\n\t\t\tsliceInnerRadius -= dr;\n\t\t\tsliceRadius -= dr;\n\n\t\t\tsliceRadius = Math.max(0, sliceRadius);\n\t\t\tsliceInnerRadius = Math.max(0, sliceInnerRadius);\n\n\t\t\tslice.animate({ key: \"radius\", to: sliceRadius, duration: duration, easing: easing })\n\t\t\tslice.animate({ key: \"innerRadius\", to: sliceInnerRadius, duration: duration, easing: easing })\n\t\t\tslice.animate({ key: \"startAngle\", to: sliceStartAngle, duration: duration, easing: easing })\n\t\t\tslice.animate({ key: \"arc\", to: arc, duration: duration, easing: easing })\n\n\t\t\tconst fill = dataItem.get(\"fill\");\n\n\t\t\tslice._setDefault(\"fill\", fill);\n\t\t\tslice._setDefault(\"stroke\", fill);\n\t\t}\n\t}\n\n\n\tprotected _updateNodesScale(hierarchyNode: d3hierarchy.HierarchyRectangularNode<ISunburstDataObject>) {\n\t\tconst dataItem = hierarchyNode.data.dataItem;\n\t\tif (dataItem) {\n\t\t\tconst scaleX = this.getPrivate(\"scaleX\", 1);\n\t\t\tconst scaleY = this.getPrivate(\"scaleY\", 1);\n\t\t\tconst dr = this.getPrivate(\"dr\", 0);\n\t\t\tconst dx = this.getPrivate(\"dx\", 0);\n\n\t\t\tconst x0 = hierarchyNode.x0 * scaleX + dx;\n\t\t\tconst x1 = hierarchyNode.x1 * scaleX + dx;\n\t\t\tconst y0 = hierarchyNode.y0 * scaleY;\n\t\t\tconst y1 = hierarchyNode.y1 * scaleY;\n\n\t\t\tconst ir = this.getPrivate(\"innerRadius\");\n\t\t\tconst hs = this.getPrivate(\"hierarchySize\", 0);\n\n\t\t\tconst slice = dataItem.get(\"slice\");\n\t\t\tif (slice) {\n\t\t\t\tconst startAngle = this.get(\"startAngle\", -90);\n\t\t\t\tconst endAngle = this.get(\"endAngle\", 270);\n\n\t\t\t\tconst sliceStartAngle = startAngle + x0 / hs * (endAngle - startAngle);\n\t\t\t\tconst arc = startAngle + x1 / hs * (endAngle - startAngle) - sliceStartAngle;\n\n\t\t\t\tlet sliceInnerRadius = ir + y0;\n\t\t\t\tlet sliceRadius = ir + y1;\n\n\t\t\t\tsliceInnerRadius -= dr;\n\t\t\t\tsliceRadius -= dr;\n\n\t\t\t\tsliceRadius = Math.max(0, sliceRadius);\n\t\t\t\tsliceInnerRadius = Math.max(0, sliceInnerRadius);\n\n\t\t\t\tslice.setAll({ radius: sliceRadius, innerRadius: sliceInnerRadius, startAngle: sliceStartAngle, arc: arc });\n\t\t\t}\n\n\t\t\tconst hierarchyChildren = hierarchyNode.children;\n\t\t\tif (hierarchyChildren) {\n\t\t\t\t$array.each(hierarchyChildren, (hierarchyChild) => {\n\t\t\t\t\tthis._updateNodesScale(hierarchyChild)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>, node: HierarchyNode) {\n\t\tconst slice = node.children.moveValue(this.slices.make(), 0);\n\t\tnode.setPrivate(\"tooltipTarget\", slice);\n\t\tdataItem.setRaw(\"slice\", slice);\n\n\t\tslice._setDataItem(dataItem);\n\n\t\tslice.on(\"arc\", () => {\n\t\t\tthis._updateLabel(dataItem);\n\t\t})\n\t\tslice.on(\"innerRadius\", () => {\n\t\t\tthis._updateLabel(dataItem);\n\t\t})\n\t\tslice.on(\"radius\", () => {\n\t\t\tthis._updateLabel(dataItem);\n\t\t})\n\t}\n\n\tprotected _updateLabel(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst slice = dataItem.get(\"slice\");\n\t\tconst label = dataItem.get(\"label\") as RadialLabel;\n\n\t\tif (slice && label) {\n\t\t\tlet innerRadius = slice.get(\"innerRadius\", 0);\n\t\t\tlet radius = slice.get(\"radius\", 0);\n\t\t\tlet angle = slice.get(\"startAngle\", 0);\n\t\t\tlet arc = Math.abs(slice.get(\"arc\", 0));\n\t\t\tlet labelAngle = angle + arc / 2;\n\t\t\tlet textType = label.get(\"textType\");\n\n\t\t\tlet maxWidth = radius - innerRadius;\n\t\t\tlet maxHeight = radius * arc * $math.RADIANS;\n\n\t\t\tif (innerRadius == 0 && arc >= 360 && textType == \"radial\") {\n\t\t\t\tradius = 1;\n\t\t\t\tlabelAngle = 0;\n\t\t\t\tmaxWidth *= 2;\n\t\t\t\tmaxHeight = maxWidth;\t\t\t\t\n\t\t\t}\n\n\t\t\tif (Math.round(arc) >= 360 && textType == \"radial\") {\n\t\t\t\tlabelAngle = 0;\n\t\t\t}\t\t\t\n\n\t\t\tif (textType == \"circular\") {\n\t\t\t\tmaxWidth = arc * $math.RADIANS * (innerRadius + (radius - innerRadius) / 2) - 10;\n\t\t\t}\n\n\n\t\t\tlabel.setAll({ labelAngle: labelAngle });\n\t\t\tlabel.setPrivate(\"radius\", radius);\n\t\t\tlabel.setPrivate(\"innerRadius\", innerRadius);\n\n\t\t\tlabel.setAll({\n\t\t\t\tmaxHeight: maxHeight,\n\t\t\t\tmaxWidth: maxWidth\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _zoom(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tlet x0 = 0;\n\t\tlet x1 = 0;\n\t\tlet hs = this.getPrivate(\"hierarchySize\", 0);\n\n\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\n\t\tlet upDepth = this.get(\"upDepth\", 0);\n\t\tlet topDepth = this.get(\"topDepth\", 0);\n\t\tlet currentDepth = hierarchyNode.depth;\n\t\tlet maxDepth = this.getPrivate(\"maxDepth\", 1);\n\t\tlet downDepth = this._currentDownDepth;\n\n\t\tif (downDepth == null) {\n\t\t\tdownDepth = this.get(\"downDepth\", 1);\n\t\t}\n\n\t\tconst levelHeight = hs / (maxDepth + 1);\n\n\t\tif (currentDepth < topDepth) {\n\t\t\tcurrentDepth = topDepth;\n\t\t}\n\n\t\tif (currentDepth - upDepth < 0) {\n\t\t\tupDepth = currentDepth;\n\t\t}\n\n\t\tx0 = hierarchyNode.x0;\n\t\tx1 = hierarchyNode.x1;\n\n\t\tlet scaleDepth = (downDepth + upDepth + 1);\n\n\t\tif (scaleDepth > maxDepth - topDepth + 1) {\n\t\t\tscaleDepth = maxDepth - topDepth + 1;\n\t\t}\n\n\t\tlet scaleX = hs / (x1 - x0);\n\t\tlet scaleY = hs / (levelHeight * scaleDepth);\n\n\t\tlet dr = Math.max(currentDepth - upDepth, topDepth) * levelHeight * scaleY;\n\n\t\tconst easing = this.get(\"animationEasing\");\n\t\tlet duration = this.get(\"animationDuration\", 0);\n\n\t\tif (!this.inited) {\n\t\t\tduration = 0;\n\t\t}\n\n\t\tlet dx = -x0 * scaleX\n\n\t\tthis.animatePrivate({ key: \"scaleX\", to: scaleX, duration: duration, easing: easing });\n\t\tthis.animatePrivate({ key: \"scaleY\", to: scaleY, duration: duration, easing: easing });\n\t\tthis.animatePrivate({ key: \"dr\", to: dr, duration: duration, easing: easing });\n\t\tthis.animatePrivate({ key: \"dx\", to: dx, duration: duration, easing: easing });\n\t}\n\n\n\tprotected _handleSingle(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tconst parent = dataItem.get(\"parent\");\n\t\tif (parent) {\n\t\t\tconst children = parent.get(\"children\");\n\t\t\tif (children) {\n\t\t\t\t$array.each(children, (child) => {\n\t\t\t\t\tif (child != dataItem) {\n\t\t\t\t\t\tthis.disableDataItem(child);\n\t\t\t\t\t\tchild.get(\"node\").hide();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis._handleSingle(parent);\n\t\t}\n\t}\n\n\tpublic _positionBullet(bullet: Bullet) {\n\n\t\tconst sprite = bullet.get(\"sprite\");\n\t\tif (sprite) {\n\t\t\tconst dataItem = sprite.dataItem as DataItem<this[\"_dataItemSettings\"]>;\n\n\t\t\tconst locationX = bullet.get(\"locationX\", 0.5);\n\t\t\tconst locationY = bullet.get(\"locationY\", 0.5);\n\n\t\t\tconst slice = dataItem.get(\"slice\");\n\t\t\tconst arc = slice.get(\"arc\", 0);\n\t\t\tconst angle = slice.get(\"startAngle\", 0) + slice.get(\"arc\", 0) * locationX;\n\t\t\tconst innerRadius = slice.get(\"innerRadius\", 0);\n\t\t\tconst radius = innerRadius + (slice.get(\"radius\", 0) - innerRadius) * locationY;\n\n\t\t\tlet x = $math.cos(angle) * radius;\n\t\t\tlet y = $math.sin(angle) * radius;\n\n\t\t\tif ($math.round(arc, 5) === 360 && $math.round(innerRadius, 2) === 0) {\n\t\t\t\tx = 0;\n\t\t\t\ty = 0;\n\t\t\t}\n\n\t\t\tsprite.set(\"x\", x);\n\t\t\tsprite.set(\"y\", y);\n\t\t}\n\t}\n\n\tprotected _makeBullet(dataItem: DataItem<this[\"_dataItemSettings\"]>, bulletFunction: (root: Root, series: Series, dataItem: DataItem<this[\"_dataItemSettings\"]>) => Bullet | undefined, index?: number) {\n\t\tconst bullet = super._makeBullet(dataItem, bulletFunction, index);\n\n\t\tif (bullet) {\n\t\t\tconst sprite = bullet.get(\"sprite\");\n\t\t\tconst slice = dataItem.get(\"slice\");\n\n\t\t\tif (sprite && slice) {\n\t\t\t\tslice.on(\"arc\", () => {\n\t\t\t\t\tthis._positionBullet(bullet);\n\t\t\t\t})\n\n\t\t\t\tslice.on(\"radius\", () => {\n\t\t\t\t\tthis._positionBullet(bullet);\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn bullet;\n\t\t}\n\t}\n}\n","import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-s ancestor is a sibling of v, returns vi-s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n","import type { DataItem } from \"../../core/render/Component\";\nimport type { IPoint } from \"../../core/util/IPoint\";\n\nimport { LinkedHierarchy, ILinkedHierarchyPrivate, ILinkedHierarchySettings, ILinkedHierarchyDataItem, ILinkedHierarchyEvents } from \"./LinkedHierarchy\";\n\nimport * as d3hierarchy from \"d3-hierarchy\";\n\nexport interface ITreeDataObject {\n\tname?: string,\n\tvalue?: number,\n\tchildren?: ITreeDataObject[],\n\tdataItem?: DataItem<ITreeDataItem>\n};\n\nexport interface ITreeDataItem extends ILinkedHierarchyDataItem {\n\n\t/**\n\t * An array of children data items.\n\t */\n\tchildren: Array<DataItem<ITreeDataItem>>;\n\n\t/**\n\t * Parent data item.\n\t * @type {DataItem<ITreeDataItem>}\n\t */\n\tparent: DataItem<ITreeDataItem>;\n\n}\n\nexport interface ITreeSettings extends ILinkedHierarchySettings {\n\n\t/**\n\t * Orientation of the diagram.\n\t *\n\t * @default \"vertical\"\n\t */\n\torientation?: \"horizontal\" | \"vertical\";\n\n\t/**\n\t * If set to `true`, will flip the tree direction.\n\t *\n\t * @default false\n\t * @since 5.2.4\n\t */\n\tinversed?: boolean;\n\n}\n\nexport interface ITreePrivate extends ILinkedHierarchyPrivate {\n\n\t/**\n\t * Current horizontal scale.\n\t */\n\tscaleX?: number;\n\n\t/**\n\t * Current vertical scale.\n\t */\n\tscaleY?: number;\n}\n\nexport interface ITreeEvents extends ILinkedHierarchyEvents {\n}\n\n/**\n * Displays a tree diagram.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/tree/} for more info\n * @important\n */\nexport class Tree extends LinkedHierarchy {\n\n\tdeclare public _settings: ITreeSettings;\n\tdeclare public _privateSettings: ITreePrivate;\n\tdeclare public _dataItemSettings: ITreeDataItem;\n\n\tprotected _tag: string = \"tree\";\n\n\tpublic static className: string = \"Tree\";\n\tpublic static classNames: Array<string> = LinkedHierarchy.classNames.concat([Tree.className]);\n\n\tpublic _hierarchyLayout = d3hierarchy.tree();\n\tdeclare public _rootNode: d3hierarchy.HierarchyCircularNode<ITreeDataObject> | undefined;\n\tpublic _packData: ITreeDataObject | undefined;\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isDirty(\"orientation\") || this.isDirty(\"inversed\")) {\n\t\t\tthis._updateVisuals();\n\t\t}\n\t}\n\n\tprotected _updateVisuals() {\n\t\tif (this._rootNode) {\n\t\t\tconst layout = this._hierarchyLayout;\n\n\t\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\t\tlayout.size([this.innerWidth(), this.innerHeight()]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlayout.size([this.innerHeight(), this.innerWidth()]);\n\t\t\t}\n\n\t\t\tlayout(this._rootNode);\n\t\t}\n\n\t\tsuper._updateVisuals();\n\t}\n\n\tprotected _getPoint(hierarchyNode: this[\"_dataItemSettings\"][\"d3HierarchyNode\"]): IPoint {\n\t\tconst inversed = this.get(\"inversed\");\n\t\tif (this.get(\"orientation\") == \"vertical\") {\n\t\t\tif (inversed) {\n\t\t\t\treturn { x: hierarchyNode.x, y: this.innerHeight() - hierarchyNode.y };\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn { x: hierarchyNode.x, y: hierarchyNode.y };\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (inversed) {\n\t\t\t\treturn { x: this.innerWidth() - hierarchyNode.y, y: hierarchyNode.x };\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn { x: hierarchyNode.y, y: hierarchyNode.x };\n\t\t\t}\n\t\t}\n\t}\n\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n","import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n","import roundNode from \"./round.js\";\nimport squarify from \"./squarify.js\";\nimport {required} from \"../accessors.js\";\nimport constant, {constantZero} from \"../constant.js\";\n\nexport default function() {\n  var tile = squarify,\n      round = false,\n      dx = 1,\n      dy = 1,\n      paddingStack = [0],\n      paddingInner = constantZero,\n      paddingTop = constantZero,\n      paddingRight = constantZero,\n      paddingBottom = constantZero,\n      paddingLeft = constantZero;\n\n  function treemap(root) {\n    root.x0 =\n    root.y0 = 0;\n    root.x1 = dx;\n    root.y1 = dy;\n    root.eachBefore(positionNode);\n    paddingStack = [0];\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(node) {\n    var p = paddingStack[node.depth],\n        x0 = node.x0 + p,\n        y0 = node.y0 + p,\n        x1 = node.x1 - p,\n        y1 = node.y1 - p;\n    if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n    if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n    node.x0 = x0;\n    node.y0 = y0;\n    node.x1 = x1;\n    node.y1 = y1;\n    if (node.children) {\n      p = paddingStack[node.depth + 1] = paddingInner(node) / 2;\n      x0 += paddingLeft(node) - p;\n      y0 += paddingTop(node) - p;\n      x1 -= paddingRight(node) - p;\n      y1 -= paddingBottom(node) - p;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      tile(node, x0, y0, x1, y1);\n    }\n  }\n\n  treemap.round = function(x) {\n    return arguments.length ? (round = !!x, treemap) : round;\n  };\n\n  treemap.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], treemap) : [dx, dy];\n  };\n\n  treemap.tile = function(x) {\n    return arguments.length ? (tile = required(x), treemap) : tile;\n  };\n\n  treemap.padding = function(x) {\n    return arguments.length ? treemap.paddingInner(x).paddingOuter(x) : treemap.paddingInner();\n  };\n\n  treemap.paddingInner = function(x) {\n    return arguments.length ? (paddingInner = typeof x === \"function\" ? x : constant(+x), treemap) : paddingInner;\n  };\n\n  treemap.paddingOuter = function(x) {\n    return arguments.length ? treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x) : treemap.paddingTop();\n  };\n\n  treemap.paddingTop = function(x) {\n    return arguments.length ? (paddingTop = typeof x === \"function\" ? x : constant(+x), treemap) : paddingTop;\n  };\n\n  treemap.paddingRight = function(x) {\n    return arguments.length ? (paddingRight = typeof x === \"function\" ? x : constant(+x), treemap) : paddingRight;\n  };\n\n  treemap.paddingBottom = function(x) {\n    return arguments.length ? (paddingBottom = typeof x === \"function\" ? x : constant(+x), treemap) : paddingBottom;\n  };\n\n  treemap.paddingLeft = function(x) {\n    return arguments.length ? (paddingLeft = typeof x === \"function\" ? x : constant(+x), treemap) : paddingLeft;\n  };\n\n  return treemap;\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      i, n = nodes.length,\n      sum, sums = new Array(n + 1);\n\n  for (sums[0] = sum = i = 0; i < n; ++i) {\n    sums[i + 1] = sum += nodes[i].value;\n  }\n\n  partition(0, n, parent.value, x0, y0, x1, y1);\n\n  function partition(i, j, value, x0, y0, x1, y1) {\n    if (i >= j - 1) {\n      var node = nodes[i];\n      node.x0 = x0, node.y0 = y0;\n      node.x1 = x1, node.y1 = y1;\n      return;\n    }\n\n    var valueOffset = sums[i],\n        valueTarget = (value / 2) + valueOffset,\n        k = i + 1,\n        hi = j - 1;\n\n    while (k < hi) {\n      var mid = k + hi >>> 1;\n      if (sums[mid] < valueTarget) k = mid + 1;\n      else hi = mid;\n    }\n\n    if ((valueTarget - sums[k - 1]) < (sums[k] - valueTarget) && i + 1 < k) --k;\n\n    var valueLeft = sums[k] - valueOffset,\n        valueRight = value - valueLeft;\n\n    if ((x1 - x0) > (y1 - y0)) {\n      var xk = value ? (x0 * valueRight + x1 * valueLeft) / value : x1;\n      partition(i, k, valueLeft, x0, y0, xk, y1);\n      partition(k, j, valueRight, xk, y0, x1, y1);\n    } else {\n      var yk = value ? (y0 * valueRight + y1 * valueLeft) / value : y1;\n      partition(i, k, valueLeft, x0, y0, x1, yk);\n      partition(k, j, valueRight, x0, yk, x1, y1);\n    }\n  }\n}\n","import dice from \"./dice.js\";\nimport slice from \"./slice.js\";\n\nexport default function(parent, x0, y0, x1, y1) {\n  (parent.depth & 1 ? slice : dice)(parent, x0, y0, x1, y1);\n}\n","import type { HierarchyNode } from \"./HierarchyNode\";\nimport type { DataItem } from \"../../core/render/Component\";\n\nimport { Hierarchy, IHierarchyPrivate, IHierarchySettings, IHierarchyDataItem, IHierarchyDataObject } from \"./Hierarchy\";\nimport { Template } from \"../../core/util/Template\";\nimport { ListTemplate } from \"../../core/util/List\";\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\n\nimport * as $array from \"../../core/util/Array\";\nimport * as $type from \"../../core/util/Type\";\nimport * as $utils from \"../../core/util/Utils\";\nimport * as d3hierarchy from \"d3-hierarchy\";\n\nexport interface ITreemapDataObject { name?: string, value?: number, children?: ITreemapDataObject[], dataItem?: DataItem<ITreemapDataItem> };\n\nexport interface ITreemapDataItem extends IHierarchyDataItem {\n\tchildren: Array<DataItem<ITreemapDataItem>>;\n\tparent: DataItem<ITreemapDataItem>;\n\td3HierarchyNode: d3hierarchy.HierarchyRectangularNode<IHierarchyDataObject>;\n\trectangle: RoundedRectangle;\n}\n\nexport interface ITreemapSettings extends IHierarchySettings {\n\n\t/**\n\t * Gap between nodes. In pixels.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/treemap/#Margins}\n\t */\n\tnodePaddingInner?: number;\n\n\t/**\n\t * Gap between nodes and outer edge of the chart. In pixels.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/treemap/#Margins}\n\t */\n\tnodePaddingOuter?: number;\n\n\t/**\n\t * Gap between nodes and top edge.\n\t *\n\t * Will be ignored if `nodePaddingOuter` is set.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/treemap/#Margins}\n\t */\n\tnodePaddingTop?: number;\n\n\t/**\n\t * Gap between nodes and bottomedge.\n\t *\n\t * Will be ignored if `nodePaddingOuter` is set.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/treemap/#Margins}\n\t */\n\tnodePaddingBottom?: number;\n\n\t/**\n\t * Gap between nodes and left edge.\n\t *\n\t * Will be ignored if `nodePaddingOuter` is set.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/treemap/#Margins}\n\t */\n\tnodePaddingLeft?: number;\n\n\t/**\n\t * Gap between nodes and bottom edge.\n\t *\n\t * Will be ignored if `nodePaddingOuter` is set.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/treemap/#Margins}\n\t */\n\tnodePaddingRight?: number;\n\n\t/**\n\t * An algorithm to use when laying out node rectangles.\n\t *\n\t * @see {@link }\n\t * @default \"squarify\"\n\t */\n\tlayoutAlgorithm?: \"binary\" | \"squarify\" | \"slice\" | \"dice\" | \"sliceDice\";\n\n}\n\nexport interface ITreemapPrivate extends IHierarchyPrivate {\n\n\t/**\n\t * Current horizontal scale.\n\t */\n\tscaleX?: number;\n\n\t/**\n\t * Current vertical scale.\n\t */\n\tscaleY?: number;\n\n}\n\n/**\n * Treemap series.\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/treemap/} for more info\n */\nexport class Treemap extends Hierarchy {\n\n\tdeclare public _settings: ITreemapSettings;\n\tdeclare public _privateSettings: ITreemapPrivate;\n\tdeclare public _dataItemSettings: ITreemapDataItem;\n\n\tprotected _tag: string = \"treemap\";\n\n\tpublic static className: string = \"Treemap\";\n\tpublic static classNames: Array<string> = Hierarchy.classNames.concat([Treemap.className]);\n\n\tpublic readonly rectangleTemplate: Template<RoundedRectangle> = Template.new({});\n\n\tpublic _treemapLayout = d3hierarchy.treemap().tile(d3hierarchy.treemapSquarify);\n\n\tdeclare public _rootNode: d3hierarchy.HierarchyRectangularNode<ITreemapDataObject> | undefined;\n\n\t/**\n\t * A list of node rectangle elements in a [[Treemap]] chart.\n\t *\n\t * @default new ListTemplate<RoundedRectangle>\n\t */\n\tpublic readonly rectangles: ListTemplate<RoundedRectangle> = new ListTemplate(\n\t\tTemplate.new({}),\n\t\t() => RoundedRectangle._new(this._root, {\n\t\t\tthemeTags: $utils.mergeTags(this.rectangles.template.get(\"themeTags\", []), [this._tag, \"shape\"])\n\t\t}, [this.rectangles.template])\n\t);\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\t\tthis.setPrivate(\"scaleX\", 1);\n\t\tthis.setPrivate(\"scaleY\", 1);\n\t}\n\n\tpublic _prepareChildren() {\n\t\tsuper._prepareChildren();\n\n\t\tif (this.isDirty(\"layoutAlgorithm\")) {\n\t\t\tlet algorithm;\n\n\t\t\tswitch (this.get(\"layoutAlgorithm\")) {\n\t\t\t\tcase \"squarify\":\n\t\t\t\t\talgorithm = d3hierarchy.treemapSquarify;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"binary\":\n\t\t\t\t\talgorithm = d3hierarchy.treemapBinary;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"slice\":\n\t\t\t\t\talgorithm = d3hierarchy.treemapSlice;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"dice\":\n\t\t\t\t\talgorithm = d3hierarchy.treemapDice;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"sliceDice\":\n\t\t\t\t\talgorithm = d3hierarchy.treemapSliceDice;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (algorithm) {\n\t\t\t\tthis._treemapLayout = d3hierarchy.treemap().tile(algorithm);\n\t\t\t}\n\t\t\tif (this._rootNode) {\n\t\t\t\tthis._updateNodes(this._rootNode);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDirty(\"nodePaddingRight\") || this.isDirty(\"nodePaddingLeft\") || this.isDirty(\"nodePaddingTop\") || this.isDirty(\"nodePaddingBottom\") || this.isDirty(\"nodePaddingOuter\") || this.isDirty(\"nodePaddingInner\")) {\n\t\t\tif (this._rootNode) {\n\t\t\t\tthis._updateNodes(this._rootNode);\n\t\t\t}\n\t\t}\n\n\t\tif (this.isPrivateDirty(\"scaleX\") || this.isPrivateDirty(\"scaleY\")) {\n\t\t\tif (this._rootNode) {\n\t\t\t\tthis._updateNodesScale(this._rootNode);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _updateVisuals() {\n\t\tif (this._rootNode) {\n\t\t\tconst treemapLayout = this._treemapLayout;\n\t\t\ttreemapLayout.size([this.innerWidth(), this.innerHeight()]);\n\n\t\t\tconst paddingLeft = this.get(\"nodePaddingLeft\");\n\t\t\tconst paddingRight = this.get(\"nodePaddingRight\");\n\t\t\tconst paddingTop = this.get(\"nodePaddingTop\");\n\t\t\tconst paddingBottom = this.get(\"nodePaddingBottom\");\n\t\t\tconst paddingInner = this.get(\"nodePaddingInner\");\n\t\t\tconst paddingOuter = this.get(\"nodePaddingOuter\");\n\t\t\tif ($type.isNumber(paddingLeft)) {\n\t\t\t\ttreemapLayout.paddingLeft(paddingLeft);\n\t\t\t}\n\t\t\tif ($type.isNumber(paddingRight)) {\n\t\t\t\ttreemapLayout.paddingRight(paddingRight);\n\t\t\t}\n\t\t\tif ($type.isNumber(paddingTop)) {\n\t\t\t\ttreemapLayout.paddingTop(paddingTop);\n\t\t\t}\n\t\t\tif ($type.isNumber(paddingBottom)) {\n\t\t\t\ttreemapLayout.paddingBottom(paddingBottom);\n\t\t\t}\n\t\t\tif ($type.isNumber(paddingInner)) {\n\t\t\t\ttreemapLayout.paddingInner(paddingInner);\n\t\t\t}\n\t\t\tif ($type.isNumber(paddingOuter)) {\n\t\t\t\ttreemapLayout.paddingOuter(paddingOuter);\n\t\t\t}\n\n\t\t\ttreemapLayout(this._rootNode);\n\t\t\tthis._updateNodes(this._rootNode);\n\t\t}\n\t}\n\n\tprotected _updateNode(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tsuper._updateNode(dataItem);\n\n\t\tconst node = dataItem.get(\"node\");\n\t\tconst rectangle = dataItem.get(\"rectangle\");\n\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\n\t\tconst scaleX = this.getPrivate(\"scaleX\", 1);\n\t\tconst scaleY = this.getPrivate(\"scaleY\", 1);\n\n\t\tconst x0 = hierarchyNode.x0 * scaleX;\n\t\tconst x1 = hierarchyNode.x1 * scaleX;\n\t\tconst y0 = hierarchyNode.y0 * scaleY;\n\t\tconst y1 = hierarchyNode.y1 * scaleY;\n\n\t\tconst w = x1 - x0;\n\t\tconst h = y1 - y0;\n\n\t\tconst duration = this.get(\"animationDuration\", 0);\n\t\tconst easing = this.get(\"animationEasing\");\n\n\t\tnode.animate({ key: \"x\", to: x0, duration: duration, easing: easing })\n\t\tnode.animate({ key: \"y\", to: y0, duration: duration, easing: easing })\n\n\t\tnode.animate({ key: \"width\", to: w, duration: duration, easing: easing })\n\t\tnode.animate({ key: \"height\", to: h, duration: duration, easing: easing })\n\n\t\tif (rectangle) {\n\t\t\tconst fill = dataItem.get(\"fill\");\n\n\t\t\trectangle.animate({ key: \"width\", to: w, duration: duration, easing: easing })\n\t\t\trectangle.animate({ key: \"height\", to: h, duration: duration, easing: easing })\n\t\t\trectangle._setDefault(\"fill\", fill);\n\t\t\trectangle._setDefault(\"stroke\", fill);\n\t\t}\n\t}\n\n\n\tprotected _updateNodesScale(hierarchyNode: d3hierarchy.HierarchyRectangularNode<ITreemapDataObject>) {\n\t\tconst dataItem = hierarchyNode.data.dataItem;\n\t\tif (dataItem) {\n\t\t\tconst node = dataItem.get(\"node\");\n\t\t\tconst rectangle = dataItem.get(\"rectangle\");\n\n\t\t\tconst scaleX = this.getPrivate(\"scaleX\", 1);\n\t\t\tconst scaleY = this.getPrivate(\"scaleY\", 1);\n\n\t\t\tconst x0 = hierarchyNode.x0 * scaleX;\n\t\t\tconst x1 = hierarchyNode.x1 * scaleX;\n\t\t\tconst y0 = hierarchyNode.y0 * scaleY;\n\t\t\tconst y1 = hierarchyNode.y1 * scaleY;\n\n\t\t\tconst w = x1 - x0;\n\t\t\tconst h = y1 - y0;\n\n\t\t\tnode.setAll({ x: x0, y: y0, width: w, height: h });\n\t\t\trectangle.setAll({ width: w, height: h });\n\n\t\t\tconst hierarchyChildren = hierarchyNode.children;\n\t\t\tif (hierarchyChildren) {\n\t\t\t\t$array.each(hierarchyChildren, (hierarchyChild) => {\n\t\t\t\t\tthis._updateNodesScale(hierarchyChild)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>): HierarchyNode {\n\t\tconst node = super.makeNode(dataItem);\n\n\t\tconst rectangle = node.children.moveValue(this.rectangles.make(), 0);\n\n\t\tnode.setPrivate(\"tooltipTarget\", rectangle);\n\t\tdataItem.setRaw(\"rectangle\", rectangle);\n\n\t\tconst label = dataItem.get(\"label\");\n\n\t\trectangle.on(\"width\", () => {\n\t\t\tlabel.setPrivate(\"maxWidth\", rectangle.width());\n\t\t})\n\n\t\trectangle.on(\"height\", () => {\n\t\t\tlabel.setPrivate(\"maxHeight\", rectangle.height());\n\t\t})\n\n\t\treturn node;\n\t}\n\n\tpublic _zoom(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tif (this.width() > 0 && this.height() > 0) {\n\t\t\tconst hierarchyNode = dataItem.get(\"d3HierarchyNode\");\n\n\t\t\tconst nodePaddingOuter = this.get(\"nodePaddingOuter\", 0);\n\n\t\t\tlet x0 = hierarchyNode.x0 + nodePaddingOuter;\n\t\t\tlet x1 = hierarchyNode.x1 - nodePaddingOuter;\n\n\t\t\tlet y0 = hierarchyNode.y0 + nodePaddingOuter;\n\t\t\tlet y1 = hierarchyNode.y1 - nodePaddingOuter;\n\n\t\t\tlet scaleX = (this.innerWidth() - nodePaddingOuter * 2) / (x1 - x0);\n\t\t\tlet scaleY = (this.innerHeight() - nodePaddingOuter * 2) / (y1 - y0);\n\n\t\t\tconst easing = this.get(\"animationEasing\");\n\t\t\tconst duration = this.get(\"animationDuration\", 0);\n\n\t\t\tthis.animatePrivate({ key: \"scaleX\", to: scaleX, duration: duration, easing: easing });\n\t\t\tthis.animatePrivate({ key: \"scaleY\", to: scaleY, duration: duration, easing: easing });\n\n\t\t\tthis.nodesContainer.animate({ key: \"x\", to: nodePaddingOuter - x0 * scaleX, duration: duration, easing: easing });\n\t\t\tthis.nodesContainer.animate({ key: \"y\", to: nodePaddingOuter - y0 * scaleY, duration: duration, easing: easing });\n\t\t}\n\t}\n\n\tprotected _selectDataItem(dataItem?: DataItem<this[\"_dataItemSettings\"]>, downDepth?: number, skipDisptach?: boolean) {\n\t\tsuper._selectDataItem(dataItem, downDepth, skipDisptach);\n\t\tif (dataItem) {\n\t\t\tlet maxDepth = this.get(\"downDepth\", 1) + dataItem.get(\"depth\");\n\t\t\tif (!this.inited) {\n\t\t\t\tmaxDepth = this.get(\"initialDepth\", 1);\n\t\t\t}\n\t\t\tconst visibleNodes = this._getVisibleNodes(dataItem, maxDepth);\n\t\t\tthis.nodes.each((node) => {\n\t\t\t\tif (visibleNodes.indexOf(node.dataItem as DataItem<this[\"_dataItemSettings\"]>) == -1) {\n\t\t\t\t\tnode.setPrivate(\"focusable\", false);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnode.removePrivate(\"focusable\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis._root._invalidateTabindexes();\n\t}\n\n\tprotected _getVisibleNodes(dataItem: DataItem<this[\"_dataItemSettings\"]>, maxDepth: number) {\n\t\tconst children = dataItem.get(\"children\");\n\t\tlet includedChildren: Array<DataItem<this[\"_dataItemSettings\"]>> = [];\n\t\t$array.each(children, (child) => {\n\t\t\tif (child.get(\"depth\") == maxDepth || !child.get(\"children\")) {\n\t\t\t\tincludedChildren.push(child);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tincludedChildren = includedChildren.concat(this._getVisibleNodes(child, maxDepth));\n\t\t\t}\n\t\t});\n\t\treturn includedChildren;\n\t}\n\n}\n","import { voronoiTreemap } from 'd3-voronoi-treemap';\r\nimport seedrandom from \"seedrandom\";\r\n\r\nimport type { HierarchyNode } from \"../hierarchy/HierarchyNode\";\r\n\r\nimport type { DataItem } from \"../../core/render/Component\";\r\nimport { Hierarchy, IHierarchyPrivate, IHierarchySettings, IHierarchyDataItem } from \"../hierarchy/Hierarchy\";\r\nimport { Template } from \"../../core/util/Template\";\r\nimport { ListTemplate } from \"../../core/util/List\";\r\nimport { Polygon } from \"../../core/render/Polygon\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport { p50 } from \"../../core/util/Percent\";\r\n\r\n\r\nexport interface IVoronoiTreemapDataObject {\r\n\tname?: string,\r\n\tvalue?: number,\r\n\tchildren?: IVoronoiTreemapDataObject[],\r\n\tdataItem?: DataItem<IVoronoiTreemapDataItem>\r\n};\r\n\r\nexport interface IVoronoiTreemapDataItem extends IHierarchyDataItem {\r\n\t/**\r\n\t * Data items of child nodes.\r\n\t */\r\n\tchildren: Array<DataItem<IVoronoiTreemapDataItem>>;\r\n\r\n\t/**\r\n\t * Data it of a parent node.\r\n\t */\r\n\tparent: DataItem<IVoronoiTreemapDataItem>;\r\n\r\n\t/**\r\n\t * A [[Polygon]] element of a node.\r\n\t */\r\n\tpolygon: Polygon;\r\n\r\n}\r\n\r\nexport interface IVoronoiTreemapSettings extends IHierarchySettings {\r\n\r\n\t/**\r\n\t * Type of the diagram's shape.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/voronoi-treemap/#Diagram_type} for more info\r\n\t * @default \"polygon\"\r\n\t */\r\n\ttype?: \"rectangle\" | \"polygon\"\r\n\r\n\t/**\r\n\t * Number of corners when type is `\"polygon\"`.\r\n\t * \r\n\t * `120` means the polygoon will look like a circle.\r\n\t *\r\n\t * NOTE: this setting is ignored if `type=\"rectangle\"`.\r\n\t * \r\n\t * @default 120\r\n\t */\r\n\tcornerCount?: number;\r\n\r\n\t/**\r\n\t * Minimum weight ratio which allows computing the minimum allowed\r\n\t * weight (`= [maximum weight] * minWeightRatio`).\r\n\t * \r\n\t * Setting very small `minWeigtRatio` might result flickering.\r\n\t *\r\n\t * NOTE: the nodes that have smaller weight will be scaled up and will not\r\n\t * represent their true value correctly.\r\n\t * \r\n\t * @default 0.005\r\n\t */\r\n\tminWeightRatio?: number;\r\n\r\n\t/**\r\n\t * The convergence ratio in Voronoi treemaps measures how well the treemap\r\n\t * layout represents the hierarchical structure of the underlying data.\r\n\t * \r\n\t * It is calculated as the ratio of the summed area of the smallest enclosing\r\n\t * rectangle for each cell to the total area of the treemap. A lower\r\n\t * convergence ratio indicates a better representation of the hierarchy,\r\n\t * meaning that the cells are closely packed and the treemap effectively\r\n\t * captures the nested relationships between the data elements.\r\n\t * \r\n\t * @default 0.005\r\n\t */\r\n\tconvergenceRatio?: number;\r\n\r\n\t/**\r\n\t * Maximum allowed number of iterations when computing the layout.\r\n\t * \r\n\t * Computation is stopped when it number of iterations is reached, even if\r\n\t * the `convergenceRatio` is not yet reached.\r\n\t *\r\n\t * Bigger number means finer results, but slower performance.\r\n\t * \r\n\t * @default 100\r\n\t */\r\n\tmaxIterationCount?: number;\r\n\r\n}\r\n\r\nexport interface IVoronoiTreemapPrivate extends IHierarchyPrivate {\r\n}\r\n\r\n/**\r\n * A Weighted Voronoi Treemap series.\r\n * \r\n * NOTE: Try to avoid a big number of data items with very big value\r\n * differences. Better group small items into \"Other\" item.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/voronoi-treemap/} for more info\r\n * @since 5.4.0\r\n */\r\nexport class VoronoiTreemap extends Hierarchy {\r\n\r\n\tdeclare public _settings: IVoronoiTreemapSettings;\r\n\tdeclare public _privateSettings: IVoronoiTreemapPrivate;\r\n\tdeclare public _dataItemSettings: IVoronoiTreemapDataItem;\r\n\r\n\tprotected _tag: string = \"voronoitreemap\";\r\n\r\n\tpublic static className: string = \"VoronoiTreemap\";\r\n\tpublic static classNames: Array<string> = Hierarchy.classNames.concat([VoronoiTreemap.className]);\r\n\r\n\t/**\r\n\t * A list of node graphics elements in a [[VoronoiTreemap]] chart.\r\n\t *\r\n\t * @default new ListTemplate<RoundedRectangle>\r\n\t */\r\n\tpublic readonly polygons: ListTemplate<Polygon> = new ListTemplate(\r\n\t\tTemplate.new({}),\r\n\t\t() => Polygon._new(this._root, {\r\n\t\t\tthemeTags: $utils.mergeTags(this.polygons.template.get(\"themeTags\", []), [this._tag, \"shape\"])\r\n\t\t}, [this.polygons.template])\r\n\t);\r\n\r\n\tpublic voronoi = voronoiTreemap();\r\n\r\n\tprotected _afterNew() {\r\n\r\n\t\tthis.nodesContainer.setAll({\r\n\t\t\tx: p50,\r\n\t\t\ty: p50,\r\n\t\t\tcenterX: p50,\r\n\t\t\tcenterY: p50\r\n\t\t})\r\n\r\n\t\tsuper._afterNew();\r\n\t}\r\n\r\n\tpublic _prepareChildren() {\r\n\t\tsuper._prepareChildren();\r\n\r\n\t\tconst width = this.innerWidth() / 2;\r\n\t\tconst height = this.innerHeight() / 2;\r\n\r\n\t\tlet node = this._rootNode;\r\n\t\tconst selectedDataItem = this.get(\"selectedDataItem\") as DataItem<IVoronoiTreemapDataItem>;\r\n\r\n\t\tif (selectedDataItem) {\r\n\t\t\tnode = selectedDataItem.get(\"d3HierarchyNode\")\r\n\t\t}\r\n\r\n\t\tthis.voronoi.convergenceRatio((this.get(\"convergenceRatio\", 0.005)));\r\n\t\tthis.voronoi.maxIterationCount((this.get(\"maxIterationCount\", 100)));\r\n\t\tthis.voronoi.minWeightRatio((this.get(\"minWeightRatio\", 0.005)));\r\n\r\n\t\tif (this.isDirty(\"type\")) {\r\n\t\t\tif (this.get(\"type\") == \"polygon\") {\r\n\t\t\t\tthis.voronoi.clip(this.getCirclePolygon(1));\r\n\t\t\t\tthis._updateVisuals();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._sizeDirty) {\r\n\t\t\tif (this.get(\"type\") == \"rectangle\") {\r\n\t\t\t\tthis.voronoi.prng(seedrandom(\"X\"));\r\n\t\t\t\tthis.voronoi.clip([[-width, -height], [-width, height], [width, height], [width, -height]])(node);\r\n\t\t\t\tthis._updateVisuals();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ((this._valuesDirty || this.isDirty(\"selectedDataItem\")) && node) {\r\n\t\t\tthis.voronoi.prng(seedrandom(\"X\"));\r\n\t\t\tthis.voronoi(node);\r\n\t\t\tthis._updateVisuals();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _updateNode(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\r\n\t\tconst coords: any = (dataItem.get(\"d3HierarchyNode\") as any).polygon;\r\n\t\tconst polygon = dataItem.get(\"polygon\");\r\n\r\n\t\tif (coords && polygon) {\r\n\r\n\t\t\tlet coordinates: any = [];\r\n\r\n\t\t\tlet d = 1;\r\n\t\t\tif (this.get(\"type\") == \"polygon\") {\r\n\t\t\t\td = Math.min(this.innerWidth(), this.innerHeight()) / 2;\r\n\t\t\t}\r\n\r\n\t\t\tlet minX = Infinity;\r\n\t\t\tlet maxX = -Infinity;\r\n\r\n\t\t\tfor (let i = 0, len = coords.length; i < len; i++) {\r\n\t\t\t\tconst point: Array<number> = coords[i] as any;\r\n\t\t\t\tlet x = point[0] * d;\r\n\t\t\t\tlet y = point[1] * d;\r\n\r\n\t\t\t\tcoordinates.push([x, y]);\r\n\r\n\t\t\t\tminX = Math.min(minX, x);\r\n\t\t\t\tmaxX = Math.max(maxX, x);\r\n\t\t\t}\r\n\r\n\t\t\tpolygon.set(\"coordinates\", coordinates);\r\n\r\n\t\t\tconst fill = dataItem.get(\"fill\");\r\n\t\t\tpolygon._setDefault(\"fill\", fill);\r\n\r\n\t\t\tconst label = dataItem.get(\"label\");\r\n\t\t\tif (label) {\r\n\t\t\t\tconst site = coords.site;\r\n\r\n\t\t\t\tif (site) {\r\n\t\t\t\t\tlabel.setAll({\r\n\t\t\t\t\t\tx: site.x * d,\r\n\t\t\t\t\t\ty: site.y * d,\r\n\t\t\t\t\t\tmaxWidth: Math.abs(maxX - minX)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tprotected _handleSingle(dataItem: DataItem<this[\"_dataItemSettings\"]>) {\r\n\t\tconst parent = dataItem.get(\"parent\");\r\n\t\tif (parent) {\r\n\t\t\tconst children = parent.get(\"children\");\r\n\t\t\tif (children) {\r\n\t\t\t\t$array.each(children, (child) => {\r\n\t\t\t\t\tif (child != dataItem) {\r\n\t\t\t\t\t\tthis.disableDataItem(child);\r\n\t\t\t\t\t\tchild.get(\"node\").hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis._handleSingle(parent);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>): HierarchyNode {\r\n\t\tconst node = super.makeNode(dataItem);\r\n\t\tthis._makeNode(dataItem, node);\r\n\t\treturn node;\r\n\t}\r\n\r\n\tprotected _makeNode(dataItem: DataItem<this[\"_dataItemSettings\"]>, node: HierarchyNode) {\r\n\t\tconst polygon = node.children.moveValue(this.polygons.make(), 0);\r\n\t\tnode.setPrivate(\"tooltipTarget\", polygon);\r\n\t\tdataItem.setRaw(\"polygon\", polygon);\r\n\t\tpolygon._setDataItem(dataItem);\r\n\t}\r\n\r\n\tprotected getCirclePolygon(radius: number) {\r\n\t\tconst points = this.get(\"cornerCount\", 120);\r\n\t\tconst dAngle = Math.PI * 2 / points;\r\n\t\tconst polygon: Array<Array<number>> = [];\r\n\r\n\t\tfor (let i = 0; i < points; i++) {\r\n\t\t\tlet angle = i * dAngle;\r\n\t\t\tpolygon.push([radius * Math.cos(angle), radius * Math.sin(angle)])\r\n\t\t}\r\n\r\n\t\treturn polygon;\r\n\t}\r\n}","export default function(polygon) {\n  var i = -1,\n      n = polygon.length,\n      a,\n      b = polygon[n - 1],\n      area = 0;\n\n  while (++i < n) {\n    a = b;\n    b = polygon[i];\n    area += a[1] * b[0] - a[0] * b[1];\n  }\n\n  return area / 2;\n}\n","export default function(polygon) {\n  var i = -1,\n      n = polygon.length,\n      x = 0,\n      y = 0,\n      a,\n      b = polygon[n - 1],\n      c,\n      k = 0;\n\n  while (++i < n) {\n    a = b;\n    b = polygon[i];\n    k += c = a[0] * b[1] - b[0] * a[1];\n    x += (a[0] + b[0]) * c;\n    y += (a[1] + b[1]) * c;\n  }\n\n  return k *= 3, [x / k, y / k];\n}\n","import cross from \"./cross.js\";\n\nfunction lexicographicOrder(a, b) {\n  return a[0] - b[0] || a[1] - b[1];\n}\n\n// Computes the upper convex hull per the monotone chain algorithm.\n// Assumes points.length >= 3, is sorted by x, unique in y.\n// Returns an array of indices into points in left-to-right order.\nfunction computeUpperHullIndexes(points) {\n  const n = points.length,\n      indexes = [0, 1];\n  let size = 2, i;\n\n  for (i = 2; i < n; ++i) {\n    while (size > 1 && cross(points[indexes[size - 2]], points[indexes[size - 1]], points[i]) <= 0) --size;\n    indexes[size++] = i;\n  }\n\n  return indexes.slice(0, size); // remove popped points\n}\n\nexport default function(points) {\n  if ((n = points.length) < 3) return null;\n\n  var i,\n      n,\n      sortedPoints = new Array(n),\n      flippedPoints = new Array(n);\n\n  for (i = 0; i < n; ++i) sortedPoints[i] = [+points[i][0], +points[i][1], i];\n  sortedPoints.sort(lexicographicOrder);\n  for (i = 0; i < n; ++i) flippedPoints[i] = [sortedPoints[i][0], -sortedPoints[i][1]];\n\n  var upperIndexes = computeUpperHullIndexes(sortedPoints),\n      lowerIndexes = computeUpperHullIndexes(flippedPoints);\n\n  // Construct the hull polygon, removing possible duplicate endpoints.\n  var skipLeft = lowerIndexes[0] === upperIndexes[0],\n      skipRight = lowerIndexes[lowerIndexes.length - 1] === upperIndexes[upperIndexes.length - 1],\n      hull = [];\n\n  // Add upper hull in right-to-l order.\n  // Then add lower hull in left-to-right order.\n  for (i = upperIndexes.length - 1; i >= 0; --i) hull.push(points[sortedPoints[upperIndexes[i]][2]]);\n  for (i = +skipLeft; i < lowerIndexes.length - skipRight; ++i) hull.push(points[sortedPoints[lowerIndexes[i]][2]]);\n\n  return hull;\n}\n","// Returns the 2D cross product of AB and AC vectors, i.e., the z-component of\n// the 3D cross product in a quadrant I Cartesian coordinate system (+x is\n// right, +y is up). Returns a positive value if ABC is counter-clockwise,\n// negative if clockwise, and zero if the points are collinear.\nexport default function(a, b, c) {\n  return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]);\n}\n","export default function(polygon, point) {\n  var n = polygon.length,\n      p = polygon[n - 1],\n      x = point[0], y = point[1],\n      x0 = p[0], y0 = p[1],\n      x1, y1,\n      inside = false;\n\n  for (var i = 0; i < n; ++i) {\n    p = polygon[i], x1 = p[0], y1 = p[1];\n    if (((y1 > y) !== (y0 > y)) && (x < (x0 - x1) * (y - y1) / (y0 - y1) + x1)) inside = !inside;\n    x0 = x1, y0 = y1;\n  }\n\n  return inside;\n}\n","export default function(polygon) {\n  var i = -1,\n      n = polygon.length,\n      b = polygon[n - 1],\n      xa,\n      ya,\n      xb = b[0],\n      yb = b[1],\n      perimeter = 0;\n\n  while (++i < n) {\n    xa = xb;\n    ya = yb;\n    b = polygon[i];\n    xb = b[0];\n    yb = b[1];\n    xa -= xb;\n    ya -= yb;\n    perimeter += Math.hypot(xa, ya);\n  }\n\n  return perimeter;\n}\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-polygon'), require('d3-timer'), require('d3-dispatch'), require('d3-weighted-voronoi')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-polygon', 'd3-timer', 'd3-dispatch', 'd3-weighted-voronoi'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3,global.d3,global.d3,global.d3));\n}(this, function (exports,d3Polygon,d3Timer,d3Dispatch,d3WeightedVoronoi) { 'use strict';\n\n  function FlickeringMitigation () {\n    /////// Inputs ///////\n    this.growthChangesLength = DEFAULT_LENGTH;\n    this.totalAvailableArea = NaN;\n\n    //begin: internals\n    this.lastAreaError = NaN;\n    this.lastGrowth = NaN;\n    this.growthChanges = [];\n    this.growthChangeWeights = generateGrowthChangeWeights(this.growthChangesLength); //used to make recent changes weighter than older changes\n    this.growthChangeWeightsSum = computeGrowthChangeWeightsSum(this.growthChangeWeights);\n    //end: internals\n  }\n\n  var DEFAULT_LENGTH = 10;\n\n  function direction(h0, h1) {\n    return (h0 >= h1)? 1 : -1;\n  }\n\n  function generateGrowthChangeWeights(length) {\n    var initialWeight = 3;   // a magic number\n    var weightDecrement = 1; // a magic number\n    var minWeight = 1;\n\n    var weightedCount = initialWeight;\n    var growthChangeWeights = [];\n\n    for (var i=0; i<length; i++) {\n      growthChangeWeights.push(weightedCount);\n      weightedCount -= weightDecrement;\n      if (weightedCount<minWeight) { weightedCount = minWeight; }\n    }\n    return growthChangeWeights;\n  }\n\n  function computeGrowthChangeWeightsSum (growthChangeWeights) {\n    var growthChangeWeightsSum = 0;\n    for (var i=0; i<growthChangeWeights.length; i++) {\n      growthChangeWeightsSum += growthChangeWeights[i];\n    }\n    return growthChangeWeightsSum;\n  }\n\n  ///////////////////////\n  ///////// API /////////\n  ///////////////////////\n\n  FlickeringMitigation.prototype.reset = function () {\n    this.lastAreaError = NaN;\n    this.lastGrowth = NaN;\n    this.growthChanges = [];\n    this.growthChangesLength = DEFAULT_LENGTH;\n    this.growthChangeWeights = generateGrowthChangeWeights(this.growthChangesLength);\n    this.growthChangeWeightsSum = computeGrowthChangeWeightsSum(this.growthChangeWeights);\n    this.totalAvailableArea = NaN;\n\n    return this;\n  };\n\n  FlickeringMitigation.prototype.clear = function () {\n    this.lastAreaError = NaN;\n    this.lastGrowth = NaN;\n    this.growthChanges = [];\n\n    return this;\n  };\n\n  FlickeringMitigation.prototype.length = function (_) {\n    if (!arguments.length) { return this.growthChangesLength; }\n\n    if (parseInt(_)>0) {\n      this.growthChangesLength = Math.floor(parseInt(_));\n      this.growthChangeWeights = generateGrowthChangeWeights(this.growthChangesLength);\n      this.growthChangeWeightsSum = computeGrowthChangeWeightsSum(this.growthChangeWeights);\n    } else {\n      console.warn(\"FlickeringMitigation.length() accepts only positive integers; unable to handle \"+_);\n    }\n    return this;\n  };\n\n  FlickeringMitigation.prototype.totalArea = function (_) {\n    if (!arguments.length) { return this.totalAvailableArea; }\n\n    if (parseFloat(_)>0) {\n      this.totalAvailableArea = parseFloat(_);\n    } else {\n      console.warn(\"FlickeringMitigation.totalArea() accepts only positive numbers; unable to handle \"+_);\n    }\n    return this;\n  };\n\n  FlickeringMitigation.prototype.add = function (areaError) {\n    var secondToLastAreaError, secondToLastGrowth;\n\n    secondToLastAreaError = this.lastAreaError;\n    this.lastAreaError = areaError;\n    if (!isNaN(secondToLastAreaError)) {\n      secondToLastGrowth = this.lastGrowth;\n      this.lastGrowth = direction(this.lastAreaError, secondToLastAreaError);\n    }\n    if (!isNaN(secondToLastGrowth)) {\n      this.growthChanges.unshift(this.lastGrowth!=secondToLastGrowth);\n    }\n\n    if (this.growthChanges.length>this.growthChangesLength) {\n      this.growthChanges.pop();\n    }\n    return this;\n  };\n\n  FlickeringMitigation.prototype.ratio = function () {\n    var weightedChangeCount = 0;\n    var ratio;\n\n    if (this.growthChanges.length < this.growthChangesLength) { return 0; }\n    if (this.lastAreaError > this.totalAvailableArea/10) { return 0; }\n\n    for(var i=0; i<this.growthChangesLength; i++) {\n      if (this.growthChanges[i]) {\n        weightedChangeCount += this.growthChangeWeights[i];\n      }\n    }\n\n    ratio = weightedChangeCount/this.growthChangeWeightsSum;\n\n    /*\n    if (ratio>0) {\n      console.log(\"flickering mitigation ratio: \"+Math.floor(ratio*1000)/1000);\n    }\n    */\n\n    return ratio;\n  };\n\n  function randomInitialPosition () {\n\n    //begin: internals\n    var clippingPolygon,\n      extent,\n      minX, maxX,\n      minY, maxY,\n      dx, dy;\n    //end: internals\n\n    ///////////////////////\n    ///////// API /////////\n    ///////////////////////\n\n    function _random(d, i, arr, voronoiMapSimulation) {\n      var shouldUpdateInternals = false;\n      var x, y;\n\n      if (clippingPolygon !== voronoiMapSimulation.clip()) {\n        clippingPolygon = voronoiMapSimulation.clip();\n        extent = voronoiMapSimulation.extent();\n        shouldUpdateInternals = true;\n      }\n\n      if (shouldUpdateInternals) {\n        updateInternals();\n      }\n\n      x = minX + dx * voronoiMapSimulation.prng()();\n      y = minY + dy * voronoiMapSimulation.prng()();\n      while (!d3Polygon.polygonContains(clippingPolygon, [x, y])) {\n        x = minX + dx * voronoiMapSimulation.prng()();\n        y = minY + dy * voronoiMapSimulation.prng()();\n      }\n      return [x, y];\n    };\n\n    ///////////////////////\n    /////// Private ///////\n    ///////////////////////\n\n    function updateInternals() {\n      minX = extent[0][0];\n      maxX = extent[1][0];\n      minY = extent[0][1];\n      maxY = extent[1][1];\n      dx = maxX - minX;\n      dy = maxY - minY;\n    };\n\n    return _random;\n  };\n\n  function pie () {\n    //begin: internals\n    var startAngle = 0;\n    var clippingPolygon,\n      dataArray,\n      dataArrayLength,\n      clippingPolygonCentroid,\n      halfIncircleRadius,\n      angleBetweenData;\n    //end: internals\n\n    ///////////////////////\n    ///////// API /////////\n    ///////////////////////\n\n    function _pie(d, i, arr, voronoiMapSimulation) {\n      var shouldUpdateInternals = false;\n\n      if (clippingPolygon !== voronoiMapSimulation.clip()) {\n        clippingPolygon = voronoiMapSimulation.clip();\n        shouldUpdateInternals |= true;\n      }\n      if (dataArray !== arr) {\n        dataArray = arr;\n        shouldUpdateInternals |= true;\n      }\n\n      if (shouldUpdateInternals) {\n        updateInternals();\n      }\n\n      // add some randomness to prevent colinear/cocircular points\n      // substract -0.5 so that the average jitter is still zero\n      return [\n        clippingPolygonCentroid[0] + Math.cos(startAngle + i * angleBetweenData) * halfIncircleRadius + (voronoiMapSimulation.prng()() - 0.5) * 1E-3,\n        clippingPolygonCentroid[1] + Math.sin(startAngle + i * angleBetweenData) * halfIncircleRadius + (voronoiMapSimulation.prng()() - 0.5) * 1E-3\n      ];\n    };\n\n    _pie.startAngle = function (_) {\n      if (!arguments.length) {\n        return startAngle;\n      }\n\n      startAngle = _;\n      return _pie;\n    };\n\n    ///////////////////////\n    /////// Private ///////\n    ///////////////////////\n\n    function updateInternals() {\n      clippingPolygonCentroid = d3Polygon.polygonCentroid(clippingPolygon);\n      halfIncircleRadius = computeMinDistFromEdges(clippingPolygonCentroid, clippingPolygon) / 2;\n      dataArrayLength = dataArray.length;\n      angleBetweenData = 2 * Math.PI / dataArrayLength;\n    };\n\n    function computeMinDistFromEdges(vertex, clippingPolygon) {\n      var minDistFromEdges = Infinity,\n        edgeIndex = 0,\n        edgeVertex0 = clippingPolygon[clippingPolygon.length - 1],\n        edgeVertex1 = clippingPolygon[edgeIndex];\n      var distFromCurrentEdge;\n\n      while (edgeIndex < clippingPolygon.length) {\n        distFromCurrentEdge = vDistance(vertex, edgeVertex0, edgeVertex1);\n        if (distFromCurrentEdge < minDistFromEdges) {\n          minDistFromEdges = distFromCurrentEdge;\n        }\n        edgeIndex++;\n        edgeVertex0 = edgeVertex1;\n        edgeVertex1 = clippingPolygon[edgeIndex];\n      }\n\n      return minDistFromEdges;\n    }\n\n    //from https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment\n    function vDistance(vertex, edgeVertex0, edgeVertex1) {\n      var x = vertex[0],\n        y = vertex[1],\n        x1 = edgeVertex0[0],\n        y1 = edgeVertex0[1],\n        x2 = edgeVertex1[0],\n        y2 = edgeVertex1[1];\n      var A = x - x1,\n        B = y - y1,\n        C = x2 - x1,\n        D = y2 - y1;\n      var dot = A * C + B * D;\n      var len_sq = C * C + D * D;\n      var param = -1;\n\n      if (len_sq != 0) //in case of 0 length line\n        param = dot / len_sq;\n\n      var xx, yy;\n\n      if (param < 0) { // this should not arise as clippingpolygon is convex\n        xx = x1;\n        yy = y1;\n      } else if (param > 1) { // this should not arise as clippingpolygon is convex\n        xx = x2;\n        yy = y2;\n      } else {\n        xx = x1 + param * C;\n        yy = y1 + param * D;\n      }\n\n      var dx = x - xx;\n      var dy = y - yy;\n      return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    return _pie;\n  }\n\n  function halfAverageAreaInitialWeight () {\n    //begin: internals\n    var clippingPolygon,\n      dataArray,\n      siteCount,\n      totalArea,\n      halfAverageArea;\n    //end: internals\n\n    ///////////////////////\n    ///////// API /////////\n    ///////////////////////\n    function _halfAverageArea(d, i, arr, voronoiMapSimulation) {\n      var shouldUpdateInternals = false;\n      if (clippingPolygon !== voronoiMapSimulation.clip()) {\n        clippingPolygon = voronoiMapSimulation.clip();\n        shouldUpdateInternals |= true;\n      }\n      if (dataArray !== arr) {\n        dataArray = arr;\n        shouldUpdateInternals |= true;\n      }\n\n      if (shouldUpdateInternals) {\n        updateInternals();\n      }\n\n      return halfAverageArea;\n    };\n\n    ///////////////////////\n    /////// Private ///////\n    ///////////////////////\n\n    function updateInternals() {\n      siteCount = dataArray.length;\n      totalArea = d3Polygon.polygonArea(clippingPolygon);\n      halfAverageArea = totalArea / siteCount / 2; // half of the average area of the the clipping polygon\n    }\n\n    return _halfAverageArea;\n  };\n\n  // from https://stackoverflow.com/questions/1382107/whats-a-good-way-to-extend-error-in-javascript\n  // (above link provided by https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)\n\n  function d3VoronoiMapError(message) {\n    this.message = message;\n    this.stack = new Error().stack;\n  }\n\n  d3VoronoiMapError.prototype.name = 'd3VoronoiMapError';\n  d3VoronoiMapError.prototype = new Error();\n\n  function voronoiMapSimulation(data) {\n    //begin: constants\n    var DEFAULT_CONVERGENCE_RATIO = 0.01;\n    var DEFAULT_MAX_ITERATION_COUNT = 50;\n    var DEFAULT_MIN_WEIGHT_RATIO = 0.01;\n    var DEFAULT_PRNG = Math.random;\n    var DEFAULT_INITIAL_POSITION = randomInitialPosition();\n    var DEFAULT_INITIAL_WEIGHT = halfAverageAreaInitialWeight();\n    var RANDOM_INITIAL_POSITION = randomInitialPosition();\n    var epsilon = 1e-10;\n    //end: constants\n\n    /////// Inputs ///////\n    var weight = function (d) {\n      return d.weight;\n    }; // accessor to the weight\n    var convergenceRatio = DEFAULT_CONVERGENCE_RATIO; // targeted allowed error ratio; default 0.01 stops computation when cell areas error <= 1% clipping polygon's area\n    var maxIterationCount = DEFAULT_MAX_ITERATION_COUNT; // maximum allowed iteration; stops computation even if convergence is not reached; use a large amount for a sole converge-based computation stop\n    var minWeightRatio = DEFAULT_MIN_WEIGHT_RATIO; // used to compute the minimum allowed weight; default 0.01 means 1% of max weight; handle near-zero weights, and leaves enought space for cell hovering\n    var prng = DEFAULT_PRNG; // pseudorandom number generator\n    var initialPosition = DEFAULT_INITIAL_POSITION; // accessor to the initial position; defaults to a random position inside the clipping polygon\n    var initialWeight = DEFAULT_INITIAL_WEIGHT; // accessor to the initial weight; defaults to the average area of the clipping polygon\n\n    //begin: internals\n    var weightedVoronoi = d3WeightedVoronoi.weightedVoronoi(),\n      flickeringMitigation = new FlickeringMitigation(),\n      shouldInitialize = true, // should initialize due to changes via APIs\n      siteCount, // number of sites\n      totalArea, // area of the clipping polygon\n      areaErrorTreshold, // targeted allowed area error (= totalArea * convergenceRatio); below this treshold, map is considered obtained and computation stops\n      iterationCount, // current iteration\n      polygons, // current computed polygons\n      areaError, // current area error\n      converged, // true if (areaError < areaErrorTreshold)\n      ended; // stores if computation is ended, either if computation has converged or if it has reached the maximum allowed iteration\n    //end: internals\n    //being: internals/simulation\n    var simulation,\n      stepper = d3Timer.timer(step),\n      event = d3Dispatch.dispatch('tick', 'end');\n    //end: internals/simulation\n\n    //begin: algorithm conf.\n    const HANDLE_OVERWEIGHTED_VARIANT = 1; // this option still exists 'cause for further experiments\n    const HANLDE_OVERWEIGHTED_MAX_ITERATION_COUNT = 1000; // max number of tries to handle overweigthed sites\n    var handleOverweighted;\n    //end: algorithm conf.\n\n    //begin: utils\n    function sqr(d) {\n      return Math.pow(d, 2);\n    }\n\n    function squaredDistance(s0, s1) {\n      return sqr(s1.x - s0.x) + sqr(s1.y - s0.y);\n    }\n    //end: utils\n\n    ///////////////////////\n    ///////// API /////////\n    ///////////////////////\n\n    simulation = {\n      tick: tick,\n\n      restart: function () {\n        stepper.restart(step);\n        return simulation;\n      },\n\n      stop: function () {\n        stepper.stop();\n        return simulation;\n      },\n\n      weight: function (_) {\n        if (!arguments.length) {\n          return weight;\n        }\n\n        weight = _;\n        shouldInitialize = true;\n        return simulation;\n      },\n\n      convergenceRatio: function (_) {\n        if (!arguments.length) {\n          return convergenceRatio;\n        }\n\n        convergenceRatio = _;\n        shouldInitialize = true;\n        return simulation;\n      },\n\n      maxIterationCount: function (_) {\n        if (!arguments.length) {\n          return maxIterationCount;\n        }\n\n        maxIterationCount = _;\n        return simulation;\n      },\n\n      minWeightRatio: function (_) {\n        if (!arguments.length) {\n          return minWeightRatio;\n        }\n\n        minWeightRatio = _;\n        shouldInitialize = true;\n        return simulation;\n      },\n\n      clip: function (_) {\n        if (!arguments.length) {\n          return weightedVoronoi.clip();\n        }\n\n        weightedVoronoi.clip(_);\n        shouldInitialize = true;\n        return simulation;\n      },\n\n      extent: function (_) {\n        if (!arguments.length) {\n          return weightedVoronoi.extent();\n        }\n\n        weightedVoronoi.extent(_);\n        shouldInitialize = true;\n        return simulation;\n      },\n\n      size: function (_) {\n        if (!arguments.length) {\n          return weightedVoronoi.size();\n        }\n\n        weightedVoronoi.size(_);\n        shouldInitialize = true;\n        return simulation;\n      },\n\n      prng: function (_) {\n        if (!arguments.length) {\n          return prng;\n        }\n\n        prng = _;\n        shouldInitialize = true;\n        return simulation;\n      },\n\n      initialPosition: function (_) {\n        if (!arguments.length) {\n          return initialPosition;\n        }\n\n        initialPosition = _;\n        shouldInitialize = true;\n        return simulation;\n      },\n\n      initialWeight: function (_) {\n        if (!arguments.length) {\n          return initialWeight;\n        }\n\n        initialWeight = _;\n        shouldInitialize = true;\n        return simulation;\n      },\n\n      state: function () {\n        if (shouldInitialize) {\n          initializeSimulation();\n        }\n        return {\n          ended: ended,\n          iterationCount: iterationCount,\n          convergenceRatio: areaError / totalArea,\n          polygons: polygons,\n        };\n      },\n\n      on: function (name, _) {\n        if (arguments.length === 1) {\n          return event.on(name);\n        }\n\n        event.on(name, _);\n        return simulation;\n      },\n    };\n\n    ///////////////////////\n    /////// Private ///////\n    ///////////////////////\n\n    //begin: simulation's main loop\n    function step() {\n      tick();\n      event.call('tick', simulation);\n      if (ended) {\n        stepper.stop();\n        event.call('end', simulation);\n      }\n    }\n    //end: simulation's main loop\n\n    //begin: algorithm used at each iteration\n    function tick() {\n      if (!ended) {\n        if (shouldInitialize) {\n          initializeSimulation();\n        }\n        polygons = adapt(polygons, flickeringMitigation.ratio());\n        iterationCount++;\n        areaError = computeAreaError(polygons);\n        flickeringMitigation.add(areaError);\n        converged = areaError < areaErrorTreshold;\n        ended = converged || iterationCount >= maxIterationCount;\n        // console.log(\"error %: \"+Math.round(areaError*100*1000/totalArea)/1000);\n      }\n    }\n    //end: algorithm used at each iteration\n\n    function initializeSimulation() {\n      //begin: handle algorithm's variants\n      setHandleOverweighted();\n      //end: handle algorithm's variants\n\n      siteCount = data.length;\n      totalArea = Math.abs(d3Polygon.polygonArea(weightedVoronoi.clip()));\n      areaErrorTreshold = convergenceRatio * totalArea;\n      flickeringMitigation.clear().totalArea(totalArea);\n\n      iterationCount = 0;\n      converged = false;\n      polygons = initialize(data, simulation);\n      ended = false;\n      shouldInitialize = false;\n    }\n\n    function initialize(data, simulation) {\n      var maxWeight = data.reduce(function (max, d) {\n          return Math.max(max, weight(d));\n        }, -Infinity),\n        minAllowedWeight = maxWeight * minWeightRatio;\n      var weights, mapPoints;\n\n      //begin: extract weights\n      weights = data.map(function (d, i, arr) {\n        return {\n          index: i,\n          weight: Math.max(weight(d), minAllowedWeight),\n          initialPosition: initialPosition(d, i, arr, simulation),\n          initialWeight: initialWeight(d, i, arr, simulation),\n          originalData: d,\n        };\n      });\n      //end: extract weights\n\n      // create map-related points\n      // (with targetedArea, initial position and initialWeight)\n      mapPoints = createMapPoints(weights, simulation);\n      handleOverweighted(mapPoints);\n      return weightedVoronoi(mapPoints);\n    }\n\n    function createMapPoints(basePoints, simulation) {\n      var totalWeight = basePoints.reduce(function (acc, bp) {\n        return (acc += bp.weight);\n      }, 0);\n      var initialPosition;\n\n      return basePoints.map(function (bp, i, bps) {\n        initialPosition = bp.initialPosition;\n\n        if (!d3Polygon.polygonContains(weightedVoronoi.clip(), initialPosition)) {\n          initialPosition = DEFAULT_INITIAL_POSITION(bp, i, bps, simulation);\n        }\n\n        return {\n          index: bp.index,\n          targetedArea: (totalArea * bp.weight) / totalWeight,\n          data: bp,\n          x: initialPosition[0],\n          y: initialPosition[1],\n          weight: bp.initialWeight, // ArlindNocaj/Voronoi-Treemap-Library uses an epsilonesque initial weight; using heavier initial weights allows faster weight adjustements, hence faster stabilization\n        };\n      });\n    }\n\n    function adapt(polygons, flickeringMitigationRatio) {\n      var adaptedMapPoints;\n\n      adaptPositions(polygons, flickeringMitigationRatio);\n      adaptedMapPoints = polygons.map(function (p) {\n        return p.site.originalObject;\n      });\n      polygons = weightedVoronoi(adaptedMapPoints);\n      if (polygons.length < siteCount) {\n        throw new d3VoronoiMapError('at least 1 site has no area, which is not supposed to arise');\n      }\n\n      adaptWeights(polygons, flickeringMitigationRatio);\n      adaptedMapPoints = polygons.map(function (p) {\n        return p.site.originalObject;\n      });\n      polygons = weightedVoronoi(adaptedMapPoints);\n      if (polygons.length < siteCount) {\n        throw new d3VoronoiMapError('at least 1 site has no area, which is not supposed to arise');\n      }\n\n      return polygons;\n    }\n\n    function adaptPositions(polygons, flickeringMitigationRatio) {\n      var newMapPoints = [],\n        flickeringInfluence = 0.5;\n      var flickeringMitigation, d, polygon, mapPoint, centroid, dx, dy;\n\n      flickeringMitigation = flickeringInfluence * flickeringMitigationRatio;\n      d = 1 - flickeringMitigation; // in [0.5, 1]\n      for (var i = 0; i < siteCount; i++) {\n        polygon = polygons[i];\n        mapPoint = polygon.site.originalObject;\n        centroid = d3Polygon.polygonCentroid(polygon);\n\n        dx = centroid[0] - mapPoint.x;\n        dy = centroid[1] - mapPoint.y;\n\n        //begin: handle excessive change;\n        dx *= d;\n        dy *= d;\n        //end: handle excessive change;\n\n        mapPoint.x += dx;\n        mapPoint.y += dy;\n\n        newMapPoints.push(mapPoint);\n      }\n\n      handleOverweighted(newMapPoints);\n    }\n\n    function adaptWeights(polygons, flickeringMitigationRatio) {\n      var newMapPoints = [],\n        flickeringInfluence = 0.1;\n      var flickeringMitigation, polygon, mapPoint, currentArea, adaptRatio, adaptedWeight;\n\n      flickeringMitigation = flickeringInfluence * flickeringMitigationRatio;\n      for (var i = 0; i < siteCount; i++) {\n        polygon = polygons[i];\n        mapPoint = polygon.site.originalObject;\n        currentArea = d3Polygon.polygonArea(polygon);\n        adaptRatio = mapPoint.targetedArea / currentArea;\n\n        //begin: handle excessive change;\n        adaptRatio = Math.max(adaptRatio, 1 - flickeringInfluence + flickeringMitigation); // in [(1-flickeringInfluence), 1]\n        adaptRatio = Math.min(adaptRatio, 1 + flickeringInfluence - flickeringMitigation); // in [1, (1+flickeringInfluence)]\n        //end: handle excessive change;\n\n        adaptedWeight = mapPoint.weight * adaptRatio;\n        adaptedWeight = Math.max(adaptedWeight, epsilon);\n\n        mapPoint.weight = adaptedWeight;\n\n        newMapPoints.push(mapPoint);\n      }\n\n      handleOverweighted(newMapPoints);\n    }\n\n    // heuristics: lower heavy weights\n    function handleOverweighted0(mapPoints) {\n      var fixCount = 0;\n      var fixApplied, tpi, tpj, weightest, lightest, sqrD, adaptedWeight;\n      do {\n        if (fixCount > HANLDE_OVERWEIGHTED_MAX_ITERATION_COUNT) {\n          throw new d3VoronoiMapError('handleOverweighted0 is looping too much');\n        }\n        fixApplied = false;\n        for (var i = 0; i < siteCount; i++) {\n          tpi = mapPoints[i];\n          for (var j = i + 1; j < siteCount; j++) {\n            tpj = mapPoints[j];\n            if (tpi.weight > tpj.weight) {\n              weightest = tpi;\n              lightest = tpj;\n            } else {\n              weightest = tpj;\n              lightest = tpi;\n            }\n            sqrD = squaredDistance(tpi, tpj);\n            if (sqrD < weightest.weight - lightest.weight) {\n              // adaptedWeight = sqrD - epsilon; // as in ArlindNocaj/Voronoi-Treemap-Library\n              // adaptedWeight = sqrD + lightest.weight - epsilon; // works, but below heuristics performs better (less flickering)\n              adaptedWeight = sqrD + lightest.weight / 2;\n              adaptedWeight = Math.max(adaptedWeight, epsilon);\n              weightest.weight = adaptedWeight;\n              fixApplied = true;\n              fixCount++;\n              break;\n            }\n          }\n          if (fixApplied) {\n            break;\n          }\n        }\n      } while (fixApplied);\n\n      /*\n      if (fixCount > 0) {\n        console.log('# fix: ' + fixCount);\n      }\n      */\n    }\n\n    // heuristics: increase light weights\n    function handleOverweighted1(mapPoints) {\n      var fixCount = 0;\n      var fixApplied, tpi, tpj, weightest, lightest, sqrD, overweight;\n      do {\n        if (fixCount > HANLDE_OVERWEIGHTED_MAX_ITERATION_COUNT) {\n          throw new d3VoronoiMapError('handleOverweighted1 is looping too much');\n        }\n        fixApplied = false;\n        for (var i = 0; i < siteCount; i++) {\n          tpi = mapPoints[i];\n          for (var j = i + 1; j < siteCount; j++) {\n            tpj = mapPoints[j];\n            if (tpi.weight > tpj.weight) {\n              weightest = tpi;\n              lightest = tpj;\n            } else {\n              weightest = tpj;\n              lightest = tpi;\n            }\n            sqrD = squaredDistance(tpi, tpj);\n            if (sqrD < weightest.weight - lightest.weight) {\n              overweight = weightest.weight - lightest.weight - sqrD;\n              lightest.weight += overweight + epsilon;\n              fixApplied = true;\n              fixCount++;\n              break;\n            }\n          }\n          if (fixApplied) {\n            break;\n          }\n        }\n      } while (fixApplied);\n\n      /*\n      if (fixCount > 0) {\n        console.log('# fix: ' + fixCount);\n      }\n      */\n    }\n\n    function computeAreaError(polygons) {\n      //convergence based on summation of all sites current areas\n      var areaErrorSum = 0;\n      var polygon, mapPoint, currentArea;\n      for (var i = 0; i < siteCount; i++) {\n        polygon = polygons[i];\n        mapPoint = polygon.site.originalObject;\n        currentArea = d3Polygon.polygonArea(polygon);\n        areaErrorSum += Math.abs(mapPoint.targetedArea - currentArea);\n      }\n      return areaErrorSum;\n    }\n\n    function setHandleOverweighted() {\n      switch (HANDLE_OVERWEIGHTED_VARIANT) {\n        case 0:\n          handleOverweighted = handleOverweighted0;\n          break;\n        case 1:\n          handleOverweighted = handleOverweighted1;\n          break;\n        default:\n          console.error(\"unknown 'handleOverweighted' variant; using variant #1\");\n          handleOverweighted = handleOverweighted0;\n      }\n    }\n\n    return simulation;\n  }\n\n  exports.voronoiMapSimulation = voronoiMapSimulation;\n  exports.voronoiMapInitialPositionRandom = randomInitialPosition;\n  exports.voronoiMapInitialPositionPie = pie;\n  exports.d3VoronoiMapError = d3VoronoiMapError;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {Timer, now} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer, total = delay;\n  if (delay == null) return t.restart(callback, delay, time), t;\n  t._restart = t.restart;\n  t.restart = function(callback, delay, time) {\n    delay = +delay, time = time == null ? now() : +time;\n    t._restart(function tick(elapsed) {\n      elapsed += total;\n      t._restart(tick, total += delay, time);\n      callback(elapsed);\n    }, delay, time);\n  }\n  t.restart(callback, delay, time);\n  return t;\n}\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-voronoi-map')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-voronoi-map'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3));\n}(this, function (exports,d3VoronoiMap) { 'use strict';\n\n  function voronoiTreemap() {\n    //begin: constants\n    var DEFAULT_CONVERGENCE_RATIO = 0.01;\n    var DEFAULT_MAX_ITERATION_COUNT = 50;\n    var DEFAULT_MIN_WEIGHT_RATIO = 0.01;\n    var DEFAULT_PRNG = Math.random;\n    //end: constants\n\n    /////// Inputs ///////\n    var clip = [\n      [0, 0],\n      [0, 1],\n      [1, 1],\n      [1, 0],\n    ]; // clipping polygon\n    var extent = [\n      [0, 0],\n      [1, 1],\n    ]; // extent of the clipping polygon\n    var size = [1, 1]; // [width, height] of the clipping polygon\n    var convergenceRatio = DEFAULT_CONVERGENCE_RATIO; // targeted allowed error ratio; default 0.01 stops computation when cell areas error <= 1% clipping polygon's area\n    var maxIterationCount = DEFAULT_MAX_ITERATION_COUNT; // maximum allowed iteration; stops computation even if convergence is not reached; use a large amount for a sole converge-based computation stop\n    var minWeightRatio = DEFAULT_MIN_WEIGHT_RATIO; // used to compute the minimum allowed weight; default 0.01 means 1% of max weight; handle near-zero weights, and leaves enought space for cell hovering\n    var prng = DEFAULT_PRNG; // pseudorandom number generator\n\n    //begin: internals\n    var unrelevantButNeedeData = [\n      {\n        weight: 1,\n      },\n      {\n        weight: 1,\n      },\n    ];\n    var _convenientReusableVoronoiMapSimulation = d3VoronoiMap.voronoiMapSimulation(unrelevantButNeedeData).stop();\n    //end: internals\n\n    ///////////////////////\n    ///////// API /////////\n    ///////////////////////\n\n    function _voronoiTreemap(rootNode) {\n      recurse(clip, rootNode);\n    }\n\n    _voronoiTreemap.convergenceRatio = function (_) {\n      if (!arguments.length) {\n        return convergenceRatio;\n      }\n\n      convergenceRatio = _;\n      return _voronoiTreemap;\n    };\n\n    _voronoiTreemap.maxIterationCount = function (_) {\n      if (!arguments.length) {\n        return maxIterationCount;\n      }\n\n      maxIterationCount = _;\n      return _voronoiTreemap;\n    };\n\n    _voronoiTreemap.minWeightRatio = function (_) {\n      if (!arguments.length) {\n        return minWeightRatio;\n      }\n\n      minWeightRatio = _;\n      return _voronoiTreemap;\n    };\n\n    _voronoiTreemap.clip = function (_) {\n      if (!arguments.length) {\n        return clip;\n      }\n\n      //begin: use voronoiMap.clip() to handle clip/extent/size computation and borderline input (non-counterclockwise, non-convex, ...)\n      _convenientReusableVoronoiMapSimulation.clip(_);\n      //end: use voronoiMap.clip() to handle clip/extent/size computation\n      clip = _convenientReusableVoronoiMapSimulation.clip();\n      extent = _convenientReusableVoronoiMapSimulation.extent();\n      size = _convenientReusableVoronoiMapSimulation.size();\n      return _voronoiTreemap;\n    };\n\n    _voronoiTreemap.extent = function (_) {\n      if (!arguments.length) {\n        return extent;\n      }\n\n      //begin: use voronoiMap.extent() to handle clip/extent/size computation\n      _convenientReusableVoronoiMapSimulation.extent(_);\n      //end: use voronoiMap.clip() to handle clip/extent/size computation\n      clip = _convenientReusableVoronoiMapSimulation.clip();\n      extent = _convenientReusableVoronoiMapSimulation.extent();\n      size = _convenientReusableVoronoiMapSimulation.size();\n      return _voronoiTreemap;\n    };\n\n    _voronoiTreemap.size = function (_) {\n      if (!arguments.length) {\n        return size;\n      }\n\n      //begin: use voronoiMap.size() to handle clip/extent/size computation\n      _convenientReusableVoronoiMapSimulation.size(_);\n      //end: use voronoiMap.clip() to handle clip/extent/size computation\n      clip = _convenientReusableVoronoiMapSimulation.clip();\n      extent = _convenientReusableVoronoiMapSimulation.extent();\n      size = _convenientReusableVoronoiMapSimulation.size();\n      return _voronoiTreemap;\n    };\n\n    _voronoiTreemap.prng = function (_) {\n      if (!arguments.length) {\n        return prng;\n      }\n\n      prng = _;\n      return _voronoiTreemap;\n    };\n\n    ///////////////////////\n    /////// Private ///////\n    ///////////////////////\n\n    function recurse(clippingPolygon, node) {\n      var simulation;\n\n      //assign polygon to node\n      node.polygon = clippingPolygon;\n\n      if (node.height != 0) {\n        //compute one-level Voronoi map of children\n        simulation = d3VoronoiMap.voronoiMapSimulation(node.children)\n          .clip(clippingPolygon)\n          .weight(function (d) {\n            return d.value;\n          })\n          .convergenceRatio(convergenceRatio)\n          .maxIterationCount(maxIterationCount)\n          .minWeightRatio(minWeightRatio)\n          .prng(prng)\n          .stop();\n\n        var state = simulation.state(); // retrieve the Vorono map simulation's state\n\n        //begin: manually launch each iteration until the Vorono map simulation ends\n        while (!state.ended) {\n          simulation.tick();\n          state = simulation.state();\n        }\n        //end: manually launch each iteration until the Vorono map simulation ends\n\n        //begin: recurse on children\n        state.polygons.forEach(function (cp) {\n          recurse(cp, cp.site.originalObject.data.originalData);\n        });\n        //end: recurse on children\n      }\n    }\n\n    return _voronoiTreemap;\n  }\n\n  exports.voronoiTreemap = voronoiTreemap;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array'), require('d3-polygon')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-array', 'd3-polygon'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3,global.d3));\n}(this, function (exports,d3Array,d3Polygon) { 'use strict';\n\n  var epsilon = 1e-10;\n\n  function epsilonesque(n) {\n    return n <= epsilon && n >= -epsilon;\n  }\n\n  // IN: vectors or vertices\n  // OUT: dot product\n  function dot(v0, v1) {\n    return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;\n  }\n\n  // IN: two vertex objects, v0 and v1\n  // OUT: true if they are linearly dependent, false otherwise\n  // from https://math.stackexchange.com/questions/1144357/how-can-i-prove-that-two-vectors-in-%E2%84%9D3-are-linearly-independent-iff-their-cro\n  function linearDependent(v0, v1) {\n    return (\n      epsilonesque(v0.x * v1.y - v0.y * v1.x) &&\n      epsilonesque(v0.y * v1.z - v0.z * v1.y) &&\n      epsilonesque(v0.z * v1.x - v0.x * v1.z)\n    );\n  }\n\n  // IN: an array of 2D-points [x,y]\n  // OUT: true if the set defines a convex polygon (non-intersecting, hole-free, non-concave)\n  // from https://gist.github.com/annatomka/82715127b74473859054, adapted to [x,y] syntax (instead of {x: ..., y: ...}) and optimizations\n  function polygonDirection(polygon) {\n    var sign, crossproduct, p0, p1, p2, v0, v1, i;\n\n    //begin: initialization\n    p0 = polygon[polygon.length - 2];\n    p1 = polygon[polygon.length - 1];\n    p2 = polygon[0];\n    v0 = vect(p0, p1);\n    v1 = vect(p1, p2);\n    crossproduct = calculateCrossproduct(v0, v1);\n    // console.log(`[[${p0}], [${p1}], [${p2}]] => (${v0}) x (${v1}) = ${crossproduct}`);\n    sign = Math.sign(crossproduct);\n    //end: initialization\n\n    p0 = p1; // p0 = polygon[polygon.length - 1];\n    p1 = p2; // p1 = polygon[0];\n    p2 = polygon[1];\n    v0 = v1;\n    v1 = vect(p1, p2);\n    crossproduct = calculateCrossproduct(v0, v1);\n    // console.log(`[[${p0}], [${p1}], [${p2}]] => (${v0}) x (${v1}) = ${crossproduct}`);\n    if (Math.sign(crossproduct) !== sign) {\n      return undefined;\n    } //different signs in cross products means concave polygon\n\n    //iterate on remaining 3 consecutive points\n    for (i = 2; i < polygon.length - 1; i++) {\n      p0 = p1;\n      p1 = p2;\n      p2 = polygon[i];\n      v0 = v1;\n      v1 = vect(p1, p2);\n      crossproduct = calculateCrossproduct(v0, v1);\n      // console.log(`[[${p0}], [${p1}], [${p2}]] => (${v0}) x (${v1}) = ${crossproduct}`);\n      if (Math.sign(crossproduct) !== sign) {\n        return undefined;\n      } //different signs in cross products means concave polygon\n    }\n\n    return sign;\n  }\n\n  function vect(from, to) {\n    return [to[0] - from[0], to[1] - from[1]];\n  }\n\n  function calculateCrossproduct(v0, v1) {\n    return v0[0] * v1[1] - v0[1] * v1[0];\n  }\n\n  // ConflictList and ConflictListNode\n\n  function ConflictListNode (face, vert) {\n    this.face = face;\n    this.vert = vert;\n    this.nextf = null;\n    this.prevf = null;\n    this.nextv = null;\n    this.prevv = null;\n  }\n\n  // IN: boolean forFace\n  function ConflictList (forFace) {\n    this.forFace = forFace;\n    this.head = null;\n  }\n\n  // IN: ConflictListNode cln\n  ConflictList.prototype.add = function(cln) {\n    if (this.head === null) {\n      this.head = cln;\n    } else {\n      if (this.forFace) {  // Is FaceList\n        this.head.prevv = cln;\n        cln.nextv = this.head;\n        this.head = cln;\n      } else {  // Is VertexList\n        this.head.prevf = cln;\n        cln.nextf = this.head;\n        this.head = cln;\n      }\n    }\n  }\n\n  ConflictList.prototype.isEmpty = function() {\n    return this.head === null;\n  }\n\n  // Array of faces visible\n  ConflictList.prototype.fill = function(visible) {\n    if (this.forFace) {\n      return;\n    }\n    var curr = this.head;\n    do {\n      visible.push(curr.face);\n      curr.face.marked = true;\n      curr = curr.nextf;\n    } while (curr !== null);\n  }\n\n  ConflictList.prototype.removeAll = function() {\n    if (this.forFace) {  // Remove all vertices from Face\n      var curr = this.head;\n      do {\n        if (curr.prevf === null) {  // Node is head\n          if (curr.nextf === null) {\n            curr.vert.conflicts.head = null;\n          } else {\n            curr.nextf.prevf = null;\n            curr.vert.conflicts.head = curr.nextf;\n          }\n        } else {  // Node is not head\n          if (curr.nextf != null) {\n            curr.nextf.prevf = curr.prevf;\n          }\n          curr.prevf.nextf = curr.nextf;\n        }\n        curr = curr.nextv;\n        if (curr != null) {\n          curr.prevv = null;\n        }\n      } while (curr != null);\n    } else {  // Remove all JFaces from vertex\n      var curr = this.head;\n      do {\n        if (curr.prevv == null) {  // Node is head\n          if (curr.nextv == null) {\n            curr.face.conflicts.head = null;\n          } else {\n            curr.nextv.prevv = null;\n            curr.face.conflicts.head = curr.nextv;\n          }\n        } else {  // Node is not head\n          if (curr.nextv != null) {\n            curr.nextv.prevv = curr.prevv;\n          }\n          curr.prevv.nextv = curr.nextv;\n        }\n        curr = curr.nextf;\n        if (curr != null)\n          curr.prevf = null;\n      } while (curr != null);\n    }\n  }\n\n  // IN: list of vertices\n  ConflictList.prototype.getVertices = function() {\n    var list = [],\n    \t\tcurr = this.head;\n    while (curr !== null) {\n      list.push(curr.vert);\n      curr = curr.nextv;\n    }\n    return list;\n  }\n\n  // IN: coordinates x, y, z\n  function Vertex (x, y, z, weight, orig, isDummy) {\n    this.x = x;\n    this.y = y;\n    this.weight = epsilon;\n    this.index = 0;\n    this.conflicts = new ConflictList(false);\n    this.neighbours = null;  // Potential trouble\n    this.nonClippedPolygon = null;\n    this.polygon = null;\n    this.originalObject = null;\n    this.isDummy = false;\n\n    if (orig !== undefined) {\n      this.originalObject = orig;\n    }\n    if (isDummy != undefined) {\n      this.isDummy = isDummy;\n    }\n    if (weight != null) {\n      this.weight = weight;\n    }\n    if (z != null) {\n      this.z = z;\n    } else {\n      this.z = this.projectZ(this.x, this.y, this.weight);\n    }\n  }\n\n  Vertex.prototype.projectZ = function(x, y, weight) {\n    return ((x*x) + (y*y) - weight);\n  }\n\n  Vertex.prototype.setWeight = function(weight) {\n    this.weight = weight;\n    this.z = this.projectZ(this.x, this.y, this.weight);\n  }\n\n  Vertex.prototype.subtract = function(v) {\n    return new Vertex(v.x - this.x, v.y - this.y, v.z - this.z);\n  }\n\n  Vertex.prototype.crossproduct = function(v) {\n    return new Vertex((this.y * v.z) - (this.z * v.y), (this.z * v.x) - (this.x * v.z), (this.x * v.y) - (this.y * v.x));\n  }\n\n  Vertex.prototype.equals = function(v) {\n    return (this.x === v.x && this.y === v.y && this.z === v.z);\n  }\n\n  // Plane3D and Point2D\n\n  // IN: Face face\n  function Plane3D (face) {\n    var p1 = face.verts[0];\n    var p2 = face.verts[1];\n    var p3 = face.verts[2];\n    this.a = p1.y * (p2.z-p3.z) + p2.y * (p3.z-p1.z) + p3.y * (p1.z-p2.z);\n    this.b = p1.z * (p2.x-p3.x) + p2.z * (p3.x-p1.x) + p3.z * (p1.x-p2.x);\n    this.c = p1.x * (p2.y-p3.y) + p2.x * (p3.y-p1.y) + p3.x * (p1.y-p2.y);\n    this.d = -1 * (p1.x * (p2.y*p3.z - p3.y*p2.z) + p2.x * (p3.y*p1.z - p1.y*p3.z) + p3.x * (p1.y*p2.z - p2.y*p1.z));\t\n  }\n\n  Plane3D.prototype.getNormZPlane = function() {\n    return [\n      -1 * (this.a / this.c),\n      -1 * (this.b / this.c),\n      -1 * (this.d / this.c)\n    ];\n  }\n\n  // OUT: point2D\n  Plane3D.prototype.getDualPointMappedToPlane = function() {\n    var nplane = this.getNormZPlane();\n    var dualPoint = new Point2D(nplane[0]/2, nplane[1]/2);\n    return dualPoint;\n  }\n\n  // IN: doubles x and y\n  function Point2D (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  // Vector\n\n  // IN: coordinates x, y, z\n  function Vector (x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n\n  Vector.prototype.negate = function() {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n  }\n\n  // Normalizes X Y and Z in-place\n  Vector.prototype.normalize = function() {\n    var lenght = Math.sqrt((this.x * this.x) + (this.y * this.y) + (this.z * this.z));\n    if (lenght > 0) {\n      this.x /= lenght;\n      this.y /= lenght;\n      this.z /= lenght;\n    }\n  }\n\n  // HEdge\n\n  // IN: vertex orig, vertex dest, Face face\n  function HEdge (orig, dest, face) {\n    this.next = null;\n    this.prev = null;\n    this.twin = null;\n    this.orig = orig;\n    this.dest = dest;\n    this.iFace = face;\n  }\n\n  HEdge.prototype.isHorizon = function() {\n    return this.twin !== null && !this.iFace.marked && this.twin.iFace.marked;\n  }\n\n  // IN: array horizon\n  HEdge.prototype.findHorizon = function(horizon) {\n    if (this.isHorizon()) {\n      if (horizon.length > 0 && this === horizon[0]) {\n        return;\n      } else {\n        horizon.push(this);\n        this.next.findHorizon(horizon);\n      }\n    } else {\n      if (this.twin !== null) {\n        this.twin.next.findHorizon(horizon);\n      }\n    }\n  }\n\n  // IN: vertices origin and dest\n  HEdge.prototype.isEqual = function(origin, dest) {\n    return ((this.orig.equals(origin) && this.dest.equals(dest)) || (this.orig.equals(dest) && this.dest.equals(origin)));\n  }\n\n  // from https://stackoverflow.com/questions/1382107/whats-a-good-way-to-extend-error-in-javascript\n  // (above link provided by https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)\n\n  function d3WeightedVoronoiError(message) {\n    this.message = message;\n    this.stack = new Error().stack;\n  }\n\n  d3WeightedVoronoiError.prototype.name = 'd3WeightedVoronoiError';\n  d3WeightedVoronoiError.prototype = new Error();\n\n  // IN: Vertices a, b, c\n  function Face(a, b, c, orient) {\n    this.conflicts = new ConflictList(true);\n    this.verts = [a, b, c];\n    this.marked = false;\n    var t = a.subtract(b).crossproduct(b.subtract(c));\n\n    this.normal = new Vector(-t.x, -t.y, -t.z);\n    this.normal.normalize();\n    this.createEdges();\n    this.dualPoint = null;\n\n    if (orient != undefined) {\n      this.orient(orient);\n    }\n  }\n\n  // OUT: Point2D\n  Face.prototype.getDualPoint = function () {\n    if (this.dualPoint == null) {\n      var plane3d = new Plane3D(this);\n      this.dualPoint = plane3d.getDualPointMappedToPlane();\n    }\n    return this.dualPoint;\n  };\n\n  Face.prototype.isVisibleFromBelow = function () {\n    return this.normal.z < -1.4259414393190911e-9;\n  };\n\n  Face.prototype.createEdges = function () {\n    this.edges = [];\n    this.edges[0] = new HEdge(this.verts[0], this.verts[1], this);\n    this.edges[1] = new HEdge(this.verts[1], this.verts[2], this);\n    this.edges[2] = new HEdge(this.verts[2], this.verts[0], this);\n    this.edges[0].next = this.edges[1];\n    this.edges[0].prev = this.edges[2];\n    this.edges[1].next = this.edges[2];\n    this.edges[1].prev = this.edges[0];\n    this.edges[2].next = this.edges[0];\n    this.edges[2].prev = this.edges[1];\n  };\n\n  // IN: vertex orient\n  Face.prototype.orient = function (orient) {\n    if (!(dot(this.normal, orient) < dot(this.normal, this.verts[0]))) {\n      var temp = this.verts[1];\n      this.verts[1] = this.verts[2];\n      this.verts[2] = temp;\n      this.normal.negate();\n      this.createEdges();\n    }\n  };\n\n  // IN: two vertices v0 and v1\n  Face.prototype.getEdge = function (v0, v1) {\n    for (var i = 0; i < 3; i++) {\n      if (this.edges[i].isEqual(v0, v1)) {\n        return this.edges[i];\n      }\n    }\n    return null;\n  };\n\n  // IN: Face face, vertices v0 and v1\n  Face.prototype.link = function (face, v0, v1) {\n    if (face instanceof Face) {\n      var twin = face.getEdge(v0, v1);\n      if (twin === null) {\n        throw new d3WeightedVoronoiError('when linking, twin is null');\n      }\n      var edge = this.getEdge(v0, v1);\n      if (edge === null) {\n        throw new d3WeightedVoronoiError('when linking, twin is null');\n      }\n      twin.twin = edge;\n      edge.twin = twin;\n    } else {\n      var twin = face; // face is a hEdge\n      var edge = this.getEdge(twin.orig, twin.dest);\n      twin.twin = edge;\n      edge.twin = twin;\n    }\n  };\n\n  // IN: vertex v\n  Face.prototype.conflict = function (v) {\n    return dot(this.normal, v) > dot(this.normal, this.verts[0]) + epsilon;\n  };\n\n  Face.prototype.getHorizon = function () {\n    for (var i = 0; i < 3; i++) {\n      if (this.edges[i].twin !== null && this.edges[i].twin.isHorizon()) {\n        return this.edges[i];\n      }\n    }\n    return null;\n  };\n\n  Face.prototype.removeConflict = function () {\n    this.conflicts.removeAll();\n  };\n\n  function ConvexHull() {\n    this.points = [];\n    this.facets = [];\n    this.created = [];\n    this.horizon = [];\n    this.visible = [];\n    this.current = 0;\n  }\n\n  // IN: sites (x,y,z)\n  ConvexHull.prototype.init = function (boundingSites, sites) {\n    this.points = [];\n    for (var i = 0; i < sites.length; i++) {\n      this.points[i] = new Vertex(sites[i].x, sites[i].y, sites[i].z, null, sites[i], false);\n    }\n    this.points = this.points.concat(boundingSites);\n  };\n\n  ConvexHull.prototype.permutate = function () {\n    var pointSize = this.points.length;\n    for (var i = pointSize - 1; i > 0; i--) {\n      var ra = Math.floor(Math.random() * i);\n      var temp = this.points[ra];\n      temp.index = i;\n      var currentItem = this.points[i];\n      currentItem.index = ra;\n      this.points.splice(ra, 1, currentItem);\n      this.points.splice(i, 1, temp);\n    }\n  };\n\n  (ConvexHull.prototype.prep = function () {\n    if (this.points.length <= 3) {\n      throw new d3WeightedVoronoiError('Less than 4 points');\n    }\n    for (var i = 0; i < this.points.length; i++) {\n      this.points[i].index = i;\n    }\n\n    var v0, v1, v2, v3;\n    var f1, f2, f3, f0;\n    v0 = this.points[0];\n    v1 = this.points[1];\n    v2 = v3 = null;\n\n    // Searching for a third vertex, not aligned with the 2 firsts\n    for (var i = 2; i < this.points.length; i++) {\n      if (!(linearDependent(v0, this.points[i]) && linearDependent(v1, this.points[i]))) {\n        v2 = this.points[i];\n        v2.index = 2;\n        this.points[2].index = i;\n        this.points.splice(i, 1, this.points[2]);\n        this.points.splice(2, 1, v2);\n        break;\n      }\n    }\n    if (v2 === null) {\n      throw new d3WeightedVoronoiError('Not enough non-planar Points (v2 is null)');\n    }\n\n    // Create first JFace\n    f0 = new Face(v0, v1, v2);\n    // Searching for a fourth vertex, not coplanar to the 3 firsts\n    for (var i = 3; i < this.points.length; i++) {\n      if (!epsilonesque(dot(f0.normal, f0.verts[0]) - dot(f0.normal, this.points[i]))) {\n        v3 = this.points[i];\n        v3.index = 3;\n        this.points[3].index = i;\n        this.points.splice(i, 1, this.points[3]);\n        this.points.splice(3, 1, v3);\n        break;\n      }\n    }\n    if (v3 === null) {\n      throw new d3WeightedVoronoiError('Not enough non-planar Points (v3 is null)');\n    }\n\n    f0.orient(v3);\n    f1 = new Face(v0, v2, v3, v1);\n    f2 = new Face(v0, v1, v3, v2);\n    f3 = new Face(v1, v2, v3, v0);\n    this.addFacet(f0);\n    this.addFacet(f1);\n    this.addFacet(f2);\n    this.addFacet(f3);\n    // Connect facets\n    f0.link(f1, v0, v2);\n    f0.link(f2, v0, v1);\n    f0.link(f3, v1, v2);\n    f1.link(f2, v0, v3);\n    f1.link(f3, v2, v3);\n    f2.link(f3, v3, v1);\n    this.current = 4;\n\n    var v;\n    for (var i = this.current; i < this.points.length; i++) {\n      v = this.points[i];\n      if (f0.conflict(v)) {\n        this.addConflict(f0, v);\n      }\n      if (f1.conflict(v)) {\n        this.addConflict(f1, v);\n      }\n      if (f2.conflict(v)) {\n        this.addConflict(f2, v);\n      }\n      if (f3.conflict(v)) {\n        this.addConflict(f3, v);\n      }\n    }\n  }),\n    // IN: Faces old1 old2 and fn\n    (ConvexHull.prototype.addConflicts = function (old1, old2, fn) {\n      var l1 = old1.conflicts.getVertices();\n      var l2 = old2.conflicts.getVertices();\n      var nCL = [];\n      var v1, v2;\n      var i, l;\n      i = l = 0;\n      // Fill the possible new Conflict List\n      while (i < l1.length || l < l2.length) {\n        if (i < l1.length && l < l2.length) {\n          v1 = l1[i];\n          v2 = l2[l];\n          // If the index is the same, it's the same vertex and only 1 has to be added\n          if (v1.index === v2.index) {\n            nCL.push(v1);\n            i++;\n            l++;\n          } else if (v1.index > v2.index) {\n            nCL.push(v1);\n            i++;\n          } else {\n            nCL.push(v2);\n            l++;\n          }\n        } else if (i < l1.length) {\n          nCL.push(l1[i++]);\n        } else {\n          nCL.push(l2[l++]);\n        }\n      }\n      // Check if the possible conflicts are real conflicts\n      for (var i = nCL.length - 1; i >= 0; i--) {\n        v1 = nCL[i];\n        if (fn.conflict(v1)) this.addConflict(fn, v1);\n      }\n    });\n\n  // IN: Face face, Vertex v\n  ConvexHull.prototype.addConflict = function (face, vert) {\n    var e = new ConflictListNode(face, vert);\n    face.conflicts.add(e);\n    vert.conflicts.add(e);\n  };\n\n  // IN: Face f\n  ConvexHull.prototype.removeConflict = function (f) {\n    f.removeConflict();\n    var index = f.index;\n    f.index = -1;\n    if (index === this.facets.length - 1) {\n      this.facets.splice(this.facets.length - 1, 1);\n      return;\n    }\n    if (index >= this.facets.length || index < 0) return;\n    var last = this.facets.splice(this.facets.length - 1, 1);\n    last[0].index = index;\n    this.facets.splice(index, 1, last[0]);\n  };\n\n  // IN: Face face\n  ConvexHull.prototype.addFacet = function (face) {\n    face.index = this.facets.length;\n    this.facets.push(face);\n  };\n\n  ConvexHull.prototype.compute = function () {\n    this.prep();\n    while (this.current < this.points.length) {\n      var next = this.points[this.current];\n      if (next.conflicts.isEmpty()) {\n        // No conflict, point in hull\n        this.current++;\n        continue;\n      }\n      this.created = []; // TODO: make sure this is okay and doesn't dangle references\n      this.horizon = [];\n      this.visible = [];\n      // The visible faces are also marked\n      next.conflicts.fill(this.visible);\n      // Horizon edges are orderly added to the horizon list\n      var e;\n      for (var jF = 0; jF < this.visible.length; jF++) {\n        e = this.visible[jF].getHorizon();\n        if (e !== null) {\n          e.findHorizon(this.horizon);\n          break;\n        }\n      }\n      var last = null,\n        first = null;\n      // Iterate over horizon edges and create new faces oriented with the marked face 3rd unused point\n      for (var hEi = 0; hEi < this.horizon.length; hEi++) {\n        var hE = this.horizon[hEi];\n        var fn = new Face(next, hE.orig, hE.dest, hE.twin.next.dest);\n        fn.conflicts = new ConflictList(true);\n        // Add to facet list\n        this.addFacet(fn);\n        this.created.push(fn);\n        // Add new conflicts\n        this.addConflicts(hE.iFace, hE.twin.iFace, fn);\n        // Link the new face with the horizon edge\n        fn.link(hE);\n        if (last !== null) fn.link(last, next, hE.orig);\n        last = fn;\n        if (first === null) first = fn;\n      }\n      // Links the first and the last created JFace\n      if (first !== null && last !== null) {\n        last.link(first, next, this.horizon[0].orig);\n      }\n      if (this.created.length != 0) {\n        // update conflict graph\n        for (var f = 0; f < this.visible.length; f++) {\n          this.removeConflict(this.visible[f]);\n        }\n        this.current++;\n        this.created = [];\n      }\n    }\n    return this.facets;\n  };\n\n  ConvexHull.prototype.clear = function () {\n    this.points = [];\n    this.facets = [];\n    this.created = [];\n    this.horizon = [];\n    this.visible = [];\n    this.current = 0;\n  };\n\n  function polygonClip(clip, subject) {\n    // Version 0.0.0. Copyright 2017 Mike Bostock.\n\n    // Clips the specified subject polygon to the specified clip polygon;\n    // requires the clip polygon to be counterclockwise and convex.\n    // https://en.wikipedia.org/wiki/SutherlandHodgman_algorithm\n    // https://observablehq.com/@d3/polygonclip\n\n    var input,\n      closed = polygonClosed(subject),\n      i = -1,\n      n = clip.length - polygonClosed(clip),\n      j,\n      m,\n      a = clip[n - 1],\n      b,\n      c,\n      d,\n      intersection;\n\n    while (++i < n) {\n      input = subject.slice();\n      subject.length = 0;\n      b = clip[i];\n      c = input[(m = input.length - closed) - 1];\n      j = -1;\n      while (++j < m) {\n        d = input[j];\n        if (polygonInside(d, a, b)) {\n          if (!polygonInside(c, a, b)) {\n            intersection = polygonIntersect(c, d, a, b);\n            if (isFinite(intersection[0])) {\n              subject.push(intersection);\n            }\n          }\n          subject.push(d);\n        } else if (polygonInside(c, a, b)) {\n          intersection = polygonIntersect(c, d, a, b);\n          if (isFinite(intersection[0])) {\n            subject.push(intersection);\n          }\n        }\n        c = d;\n      }\n      if (closed) subject.push(subject[0]);\n      a = b;\n    }\n\n    return subject;\n  }\n\n  function polygonInside(p, a, b) {\n    return (b[0] - a[0]) * (p[1] - a[1]) < (b[1] - a[1]) * (p[0] - a[0]);\n  }\n\n  // Intersect two infinite lines cd and ab.\n  // Return Infinity if cd and ab colinear\n  function polygonIntersect(c, d, a, b) {\n    var x1 = c[0],\n      x3 = a[0],\n      x21 = d[0] - x1,\n      x43 = b[0] - x3,\n      y1 = c[1],\n      y3 = a[1],\n      y21 = d[1] - y1,\n      y43 = b[1] - y3,\n      ua = (x43 * (y1 - y3) - y43 * (x1 - x3)) / (y43 * x21 - x43 * y21);\n    return [x1 + ua * x21, y1 + ua * y21];\n  }\n\n  // Returns true if the polygon is closed.\n  function polygonClosed(coordinates) {\n    var a = coordinates[0],\n      b = coordinates[coordinates.length - 1];\n    return !(a[0] - b[0] || a[1] - b[1]);\n  }\n\n  // IN: HEdge edge\n  function getFacesOfDestVertex(edge) {\n    var faces = [];\n    var previous = edge;\n    var first = edge.dest;\n    var site = first.originalObject;\n    var neighbours = [];\n    do {\n      previous = previous.twin.prev;\n      var siteOrigin = previous.orig.originalObject;\n      if (!siteOrigin.isDummy) {\n        neighbours.push(siteOrigin);\n      }\n      var iFace = previous.iFace;\n      if (iFace.isVisibleFromBelow()) {\n        faces.push(iFace);\n      }\n    } while (previous !== edge);\n    site.neighbours = neighbours;\n    return faces;\n  }\n\n  // IN: Omega = convex bounding polygon\n  // IN: S = unique set of sites with weights\n  // OUT: Set of lines making up the voronoi power diagram\n  function computePowerDiagramIntegrated (sites, boundingSites, clippingPolygon) {\n    var convexHull = new ConvexHull();\n    convexHull.clear();\n    convexHull.init(boundingSites, sites);\n\n    var facets = convexHull.compute(sites);\n    var polygons = []; \n    var verticesVisited = [];\n    var facetCount = facets.length;\n\n    for (var i = 0; i < facetCount; i++) {\n      var facet = facets[i];\n      if (facet.isVisibleFromBelow()) {\n        for (var e = 0; e < 3; e++) {\n          // go through the edges and start to build the polygon by going through the double connected edge list\n          var edge = facet.edges[e];\n          var destVertex = edge.dest;\n          var site = destVertex.originalObject; \n\n          if (!verticesVisited[destVertex.index]) {\n            verticesVisited[destVertex.index] = true;\n            if (site.isDummy) {\n              // Check if this is one of the sites making the bounding polygon\n              continue;\n            }\n            // faces around the vertices which correspond to the polygon corner points\n            var faces = getFacesOfDestVertex(edge);\n            var protopoly = [];\n            var lastX = null;\n            var lastY = null;\n            var dx = 1;\n            var dy = 1;\n            for (var j = 0; j < faces.length; j++) {\n              var point = faces[j].getDualPoint();\n              var x1 = point.x;\n              var y1 = point.y;\n              if (lastX !== null) {\n                dx = lastX - x1;\n                dy = lastY - y1;\n                if (dx < 0) {\n                  dx = -dx;\n                }\n                if (dy < 0) {\n                  dy = -dy;\n                }\n              }\n              if (dx > epsilon || dy > epsilon) {\n                protopoly.push([x1, y1]);\n                lastX = x1;\n                lastY = y1;\n              }\n            }\n            \n            site.nonClippedPolygon = protopoly.reverse();\n            if (!site.isDummy && d3Polygon.polygonLength(site.nonClippedPolygon) > 0) {\n              var clippedPoly = polygonClip(clippingPolygon, site.nonClippedPolygon);\n              site.polygon = clippedPoly;\n              clippedPoly.site = site;\n              if (clippedPoly.length > 0) {\n                polygons.push(clippedPoly);\n              }\n            }\n          }\n        }\n      }\n    }\n    return polygons;\n  }\n\n  function weightedVoronoi() {\n    /////// Inputs ///////\n    var x = function (d) {\n      return d.x;\n    }; // accessor to the x value\n    var y = function (d) {\n      return d.y;\n    }; // accessor to the y value\n    var weight = function (d) {\n      return d.weight;\n    }; // accessor to the weight\n    var clip = [\n      [0, 0],\n      [0, 1],\n      [1, 1],\n      [1, 0],\n    ]; // clipping polygon\n    var extent = [\n      [0, 0],\n      [1, 1],\n    ]; // extent of the clipping polygon\n    var size = [1, 1]; // [width, height] of the clipping polygon\n\n    ///////////////////////\n    ///////// API /////////\n    ///////////////////////\n\n    function _weightedVoronoi(data) {\n      var formatedSites;\n\n      //begin: map sites to the expected format of PowerDiagram\n      formatedSites = data.map(function (d) {\n        return new Vertex(x(d), y(d), null, weight(d), d, false);\n      });\n      //end: map sites to the expected format of PowerDiagram\n\n      return computePowerDiagramIntegrated(formatedSites, boundingSites(), clip);\n    }\n\n    _weightedVoronoi.x = function (_) {\n      if (!arguments.length) {\n        return x;\n      }\n\n      x = _;\n      return _weightedVoronoi;\n    };\n\n    _weightedVoronoi.y = function (_) {\n      if (!arguments.length) {\n        return y;\n      }\n\n      y = _;\n      return _weightedVoronoi;\n    };\n\n    _weightedVoronoi.weight = function (_) {\n      if (!arguments.length) {\n        return weight;\n      }\n\n      weight = _;\n      return _weightedVoronoi;\n    };\n\n    _weightedVoronoi.clip = function (_) {\n      var direction, xExtent, yExtent;\n\n      if (!arguments.length) {\n        return clip;\n      }\n\n      xExtent = d3Array.extent(\n        _.map(function (c) {\n          return c[0];\n        })\n      );\n      yExtent = d3Array.extent(\n        _.map(function (c) {\n          return c[1];\n        })\n      );\n      direction = polygonDirection(_);\n      if (direction === undefined) {\n        clip = d3Polygon.polygonHull(_); // ensure clip to be a convex, hole-free, counterclockwise polygon\n      } else if (direction === 1) {\n        clip = _.reverse(); // already convex, order array in the same direction as d3-polygon.polygonHull(...)\n      } else {\n        clip = _;\n      }\n      extent = [\n        [xExtent[0], yExtent[0]],\n        [xExtent[1], yExtent[1]],\n      ];\n      size = [xExtent[1] - xExtent[0], yExtent[1] - yExtent[0]];\n      return _weightedVoronoi;\n    };\n\n    _weightedVoronoi.extent = function (_) {\n      if (!arguments.length) {\n        return extent;\n      }\n\n      clip = [_[0], [_[0][0], _[1][1]], _[1], [_[1][0], _[0][1]]];\n      extent = _;\n      size = [_[1][0] - _[0][0], _[1][1] - _[0][1]];\n      return _weightedVoronoi;\n    };\n\n    _weightedVoronoi.size = function (_) {\n      if (!arguments.length) {\n        return size;\n      }\n\n      clip = [\n        [0, 0],\n        [0, _[1]],\n        [_[0], _[1]],\n        [_[0], 0],\n      ];\n      extent = [[0, 0], _];\n      size = _;\n      return _weightedVoronoi;\n    };\n\n    ///////////////////////\n    /////// Private ///////\n    ///////////////////////\n\n    function boundingSites() {\n      var minX,\n        maxX,\n        minY,\n        maxY,\n        width,\n        height,\n        x0,\n        x1,\n        y0,\n        y1,\n        boundingData = [],\n        boundingSites = [];\n\n      minX = extent[0][0];\n      maxX = extent[1][0];\n      minY = extent[0][1];\n      maxY = extent[1][1];\n      width = maxX - minX;\n      height = maxY - minY;\n      x0 = minX - width;\n      x1 = maxX + width;\n      y0 = minY - height;\n      y1 = maxY + height;\n\n      // MUST be counterclockwise\n      // if not, may produce 'TypeError: Cannot set property 'twin' of null' during computation\n      // don't know how to test as it is not exposed\n      boundingData[0] = [x0, y0];\n      boundingData[1] = [x0, y1];\n      boundingData[2] = [x1, y1];\n      boundingData[3] = [x1, y0];\n\n      for (var i = 0; i < 4; i++) {\n        boundingSites.push(\n          new Vertex(\n            boundingData[i][0],\n            boundingData[i][1],\n            null,\n            epsilon,\n            new Vertex(boundingData[i][0], boundingData[i][1], null, epsilon, null, true),\n            true\n          )\n        );\n      }\n\n      return boundingSites;\n    }\n\n    return _weightedVoronoi;\n  }\n\n  exports.weightedVoronoi = weightedVoronoi;\n  exports.d3WeightedVoronoiError = d3WeightedVoronoiError;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function count(values, valueof) {\n  let count = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  }\n  return count;\n}\n","function length(array) {\n  return array.length | 0;\n}\n\nfunction empty(length) {\n  return !(length > 0);\n}\n\nfunction arrayify(values) {\n  return typeof values !== \"object\" || \"length\" in values ? values : Array.from(values);\n}\n\nfunction reducer(reduce) {\n  return values => reduce(...values);\n}\n\nexport default function cross(...values) {\n  const reduce = typeof values[values.length - 1] === \"function\" && reducer(values.pop());\n  values = values.map(arrayify);\n  const lengths = values.map(length);\n  const j = values.length - 1;\n  const index = new Array(j + 1).fill(0);\n  const product = [];\n  if (j < 0 || lengths.some(empty)) return product;\n  while (true) {\n    product.push(index.map((j, i) => values[i][j]));\n    let i = j;\n    while (++index[i] === lengths[i]) {\n      if (i === 0) return reduce ? product.map(reduce) : product;\n      index[i--] = 0;\n    }\n  }\n}\n","export default function cumsum(values, valueof) {\n  var sum = 0, index = 0;\n  return Float64Array.from(values, valueof === undefined\n    ? v => (sum += +v || 0)\n    : v => (sum += +valueof(v, index++, values) || 0));\n}","export default function(a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}\n","export default function variance(values, valueof) {\n  let count = 0;\n  let delta;\n  let mean = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n  if (count > 1) return sum / (count - 1);\n}\n","import variance from \"./variance.js\";\n\nexport default function deviation(values, valueof) {\n  const v = variance(values, valueof);\n  return v ? Math.sqrt(v) : v;\n}\n","export default function(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(value);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","export default function(x) {\n  return x;\n}\n","import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n","export default function(source, keys) {\n  return Array.from(keys, key => source[key]);\n}\n","import ascending from \"./ascending.js\";\nimport permute from \"./permute.js\";\n\nexport default function sort(values, ...F) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  values = Array.from(values);\n  let [f = ascending] = F;\n  if (f.length === 1 || F.length > 1) {\n    const index = Uint32Array.from(values, (d, i) => i);\n    if (F.length > 1) {\n      F = F.map(f => values.map(f));\n      index.sort((i, j) => {\n        for (const f of F) {\n          const c = ascending(f[i], f[j]);\n          if (c) return c;\n        }\n      });\n    } else {\n      f = values.map(f);\n      index.sort((i, j) => ascending(f[i], f[j]));\n    }\n    return permute(values, index);\n  }\n  return values.sort(f);\n}\n","import ascending from \"./ascending.js\";\nimport group, {rollup} from \"./group.js\";\nimport sort from \"./sort.js\";\n\nexport default function groupSort(values, reduce, key) {\n  return (reduce.length === 1\n    ? sort(rollup(values, reduce, key), (([ak, av], [bk, bv]) => ascending(av, bv) || ascending(ak, bk)))\n    : sort(group(values, key), (([ak, av], [bk, bv]) => reduce(av, bv) || ascending(ak, bk))))\n    .map(([key]) => key);\n}\n","var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import {tickIncrement} from \"./ticks.js\";\n\nexport default function nice(start, stop, count) {\n  let prestep;\n  while (true) {\n    const step = tickIncrement(start, stop, count);\n    if (step === prestep || step === 0 || !isFinite(step)) {\n      return [start, stop];\n    } else if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n    }\n    prestep = step;\n  }\n}\n","import count from \"../count.js\";\n\nexport default function(values) {\n  return Math.ceil(Math.log(count(values)) / Math.LN2) + 1;\n}\n","import {slice} from \"./array.js\";\nimport bisect from \"./bisect.js\";\nimport constant from \"./constant.js\";\nimport extent from \"./extent.js\";\nimport identity from \"./identity.js\";\nimport nice from \"./nice.js\";\nimport ticks, {tickIncrement} from \"./ticks.js\";\nimport sturges from \"./threshold/sturges.js\";\n\nexport default function() {\n  var value = identity,\n      domain = extent,\n      threshold = sturges;\n\n  function histogram(data) {\n    if (!Array.isArray(data)) data = Array.from(data);\n\n    var i,\n        n = data.length,\n        x,\n        values = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      values[i] = value(data[i], i, data);\n    }\n\n    var xz = domain(values),\n        x0 = xz[0],\n        x1 = xz[1],\n        tz = threshold(values, x0, x1);\n\n    // Convert number of thresholds into uniform thresholds, and nice the\n    // default domain accordingly.\n    if (!Array.isArray(tz)) {\n      const max = x1, tn = +tz;\n      if (domain === extent) [x0, x1] = nice(x0, x1, tn);\n      tz = ticks(x0, x1, tn);\n\n      // If the last threshold is coincident with the domains upper bound, the\n      // last bin will be zero-width. If the default domain is used, and this\n      // last threshold is coincident with the maximum input value, we can\n      // extend the niced upper bound by one tick to ensure uniform bin widths;\n      // otherwise, we simply remove the last threshold. Note that we dont\n      // coerce values or the domain to numbers, and thus must be careful to\n      // compare order (>=) rather than strict equality (===)!\n      if (tz[tz.length - 1] >= x1) {\n        if (max >= x1 && domain === extent) {\n          const step = tickIncrement(x0, x1, tn);\n          if (isFinite(step)) {\n            if (step > 0) {\n              x1 = (Math.floor(x1 / step) + 1) * step;\n            } else if (step < 0) {\n              x1 = (Math.ceil(x1 * -step) + 1) / -step;\n            }\n          }\n        } else {\n          tz.pop();\n        }\n      }\n    }\n\n    // Remove any thresholds outside the domain.\n    var m = tz.length;\n    while (tz[0] <= x0) tz.shift(), --m;\n    while (tz[m - 1] > x1) tz.pop(), --m;\n\n    var bins = new Array(m + 1),\n        bin;\n\n    // Initialize bins.\n    for (i = 0; i <= m; ++i) {\n      bin = bins[i] = [];\n      bin.x0 = i > 0 ? tz[i - 1] : x0;\n      bin.x1 = i < m ? tz[i] : x1;\n    }\n\n    // Assign data to bins by value, ignoring any outside the domain.\n    for (i = 0; i < n; ++i) {\n      x = values[i];\n      if (x0 <= x && x <= x1) {\n        bins[bisect(tz, x, 0, m)].push(data[i]);\n      }\n    }\n\n    return bins;\n  }\n\n  histogram.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\n  };\n\n  histogram.domain = function(_) {\n    return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\n  };\n\n  histogram.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;\n  };\n\n  return histogram;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\n\n// Based on https://github.com/mourner/quickselect\n// ISC license, Copyright 2018 Vladimir Agafonkin.\nexport default function quickselect(array, k, left = 0, right = array.length - 1, compare = ascending) {\n  while (right > left) {\n    if (right - left > 600) {\n      const n = right - left + 1;\n      const m = k - left + 1;\n      const z = Math.log(n);\n      const s = 0.5 * Math.exp(2 * z / 3);\n      const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n      const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n      const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n      quickselect(array, k, newLeft, newRight, compare);\n    }\n\n    const t = array[k];\n    let i = left;\n    let j = right;\n\n    swap(array, left, k);\n    if (compare(array[right], t) > 0) swap(array, left, right);\n\n    while (i < j) {\n      swap(array, i, j), ++i, --j;\n      while (compare(array[i], t) < 0) ++i;\n      while (compare(array[j], t) > 0) --j;\n    }\n\n    if (compare(array[left], t) === 0) swap(array, left, j);\n    else ++j, swap(array, j, right);\n\n    if (j <= k) left = j + 1;\n    if (k <= j) right = j - 1;\n  }\n  return array;\n}\n\nfunction swap(array, i, j) {\n  const t = array[i];\n  array[i] = array[j];\n  array[j] = t;\n}\n","import max from \"./max.js\";\nimport min from \"./min.js\";\nimport quickselect from \"./quickselect.js\";\nimport number, {numbers} from \"./number.js\";\n\nexport default function quantile(values, p, valueof) {\n  values = Float64Array.from(numbers(values, valueof));\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return min(values);\n  if (p >= 1) return max(values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n      value1 = min(values.subarray(i0 + 1));\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileSorted(values, p, valueof = number) {\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","import count from \"../count.js\";\nimport quantile from \"../quantile.js\";\n\nexport default function(values, min, max) {\n  return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(count(values), -1 / 3)));\n}\n","import count from \"../count.js\";\nimport deviation from \"../deviation.js\";\n\nexport default function(values, min, max) {\n  return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(count(values), -1 / 3)));\n}\n","export default function maxIndex(values, valueof) {\n  let max;\n  let maxIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  }\n  return maxIndex;\n}\n","export default function mean(values, valueof) {\n  let count = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  }\n  if (count) return sum / count;\n}\n","import quantile from \"./quantile.js\";\n\nexport default function(values, valueof) {\n  return quantile(values, 0.5, valueof);\n}\n","function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n","export default function minIndex(values, valueof) {\n  let min;\n  let minIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  }\n  return minIndex;\n}\n","export default function pairs(values, pairof = pair) {\n  const pairs = [];\n  let previous;\n  let first = false;\n  for (const value of values) {\n    if (first) pairs.push(pairof(previous, value));\n    previous = value;\n    first = true;\n  }\n  return pairs;\n}\n\nexport function pair(a, b) {\n  return [a, b];\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function least(values, compare = ascending) {\n  let min;\n  let defined = false;\n  if (compare.length === 1) {\n    let minValue;\n    for (const element of values) {\n      const value = compare(element);\n      if (defined\n          ? ascending(value, minValue) < 0\n          : ascending(value, value) === 0) {\n        min = element;\n        minValue = value;\n        defined = true;\n      }\n    }\n  } else {\n    for (const value of values) {\n      if (defined\n          ? compare(value, min) < 0\n          : compare(value, value) === 0) {\n        min = value;\n        defined = true;\n      }\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\nimport minIndex from \"./minIndex.js\";\n\nexport default function leastIndex(values, compare = ascending) {\n  if (compare.length === 1) return minIndex(values, compare);\n  let minValue;\n  let min = -1;\n  let index = -1;\n  for (const value of values) {\n    ++index;\n    if (min < 0\n        ? compare(value, value) === 0\n        : compare(value, minValue) < 0) {\n      minValue = value;\n      min = index;\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function greatest(values, compare = ascending) {\n  let max;\n  let defined = false;\n  if (compare.length === 1) {\n    let maxValue;\n    for (const element of values) {\n      const value = compare(element);\n      if (defined\n          ? ascending(value, maxValue) > 0\n          : ascending(value, value) === 0) {\n        max = element;\n        maxValue = value;\n        defined = true;\n      }\n    }\n  } else {\n    for (const value of values) {\n      if (defined\n          ? compare(value, max) > 0\n          : compare(value, value) === 0) {\n        max = value;\n        defined = true;\n      }\n    }\n  }\n  return max;\n}\n","import ascending from \"./ascending.js\";\nimport maxIndex from \"./maxIndex.js\";\n\nexport default function greatestIndex(values, compare = ascending) {\n  if (compare.length === 1) return maxIndex(values, compare);\n  let maxValue;\n  let max = -1;\n  let index = -1;\n  for (const value of values) {\n    ++index;\n    if (max < 0\n        ? compare(value, value) === 0\n        : compare(value, maxValue) > 0) {\n      maxValue = value;\n      max = index;\n    }\n  }\n  return max;\n}\n","import leastIndex from \"./leastIndex.js\";\n\nexport default function scan(values, compare) {\n  const index = leastIndex(values, compare);\n  return index < 0 ? undefined : index;\n}\n","export default shuffler(Math.random);\n\nexport function shuffler(random) {\n  return function shuffle(array, i0 = 0, i1 = array.length) {\n    let m = i1 - (i0 = +i0);\n    while (m) {\n      const i = random() * m-- | 0, t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n    return array;\n  };\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","import min from \"./min.js\";\n\nexport default function(matrix) {\n  if (!(n = matrix.length)) return [];\n  for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n      row[j] = matrix[j][i];\n    }\n  }\n  return transpose;\n}\n\nfunction length(d) {\n  return d.length;\n}\n","import transpose from \"./transpose.js\";\n\nexport default function() {\n  return transpose(arguments);\n}\n","export default function every(values, test) {\n  if (typeof test !== \"function\") throw new TypeError(\"test is not a function\");\n  let index = -1;\n  for (const value of values) {\n    if (!test(value, ++index, values)) {\n      return false;\n    }\n  }\n  return true;\n}\n","export default function some(values, test) {\n  if (typeof test !== \"function\") throw new TypeError(\"test is not a function\");\n  let index = -1;\n  for (const value of values) {\n    if (test(value, ++index, values)) {\n      return true;\n    }\n  }\n  return false;\n}\n","export default function filter(values, test) {\n  if (typeof test !== \"function\") throw new TypeError(\"test is not a function\");\n  const array = [];\n  let index = -1;\n  for (const value of values) {\n    if (test(value, ++index, values)) {\n      array.push(value);\n    }\n  }\n  return array;\n}\n","export default function map(values, mapper) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  if (typeof mapper !== \"function\") throw new TypeError(\"mapper is not a function\");\n  return Array.from(values, (value, index) => mapper(value, index, values));\n}\n","export default function reduce(values, reducer, value) {\n  if (typeof reducer !== \"function\") throw new TypeError(\"reducer is not a function\");\n  const iterator = values[Symbol.iterator]();\n  let done, next, index = -1;\n  if (arguments.length < 3) {\n    ({done, value} = iterator.next());\n    if (done) return;\n    ++index;\n  }\n  while (({done, value: next} = iterator.next()), !done) {\n    value = reducer(value, next, ++index, values);\n  }\n  return value;\n}\n","export default function reverse(values) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  return Array.from(values).reverse();\n}\n","export default function difference(values, ...others) {\n  values = new Set(values);\n  for (const other of others) {\n    for (const value of other) {\n      values.delete(value);\n    }\n  }\n  return values;\n}\n","export default function disjoint(values, other) {\n  const iterator = other[Symbol.iterator](), set = new Set();\n  for (const v of values) {\n    if (set.has(v)) return false;\n    let value, done;\n    while (({value, done} = iterator.next())) {\n      if (done) break;\n      if (Object.is(v, value)) return false;\n      set.add(value);\n    }\n  }\n  return true;\n}\n","export default function set(values) {\n  return values instanceof Set ? values : new Set(values);\n}\n","import set from \"./set.js\";\n\nexport default function intersection(values, ...others) {\n  values = new Set(values);\n  others = others.map(set);\n  out: for (const value of values) {\n    for (const other of others) {\n      if (!other.has(value)) {\n        values.delete(value);\n        continue out;\n      }\n    }\n  }\n  return values;\n}\n","export default function superset(values, other) {\n  const iterator = values[Symbol.iterator](), set = new Set();\n  for (const o of other) {\n    if (set.has(o)) continue;\n    let value, done;\n    while (({value, done} = iterator.next())) {\n      if (done) return false;\n      set.add(value);\n      if (Object.is(o, value)) break;\n    }\n  }\n  return true;\n}\n","import superset from \"./superset.js\";\n\nexport default function subset(values, other) {\n  return superset(other, values);\n}\n","export default function union(...others) {\n  const set = new Set();\n  for (const other of others) {\n    for (const o of other) {\n      set.add(o);\n    }\n  }\n  return set;\n}\n","// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baage.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by Franois Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n","// A port of an algorithm by Johannes Baage <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baage <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n","// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Franois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n","// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n","/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n","import * as m from \"./../../dist/es2015/hierarchy.js\";\nexport const am5hierarchy = m;"],"names":["HierarchyDefaultTheme","Theme","setupDefaultRules","super","ic","this","_root","interfaceColors","gridLayout","r","rule","bind","setAll","legendLabelText","legendValueText","width","height","colors","ColorSet","new","step","downDepth","initialDepth","singleBranchOnly","maskContent","animationEasing","toggleKey","setStateOnChildren","position","isMeasured","cursorOverStyle","tooltipText","centerX","centerY","paddingBottom","paddingTop","paddingRight","paddingLeft","text","populateText","oversizedBehavior","minScale","strokeWidth","strokeOpacity","strength","distance","fillOpacity","radius","tooltipY","opacity","strokeDasharray","scale","interactive","states","create","layout","stateAnimationDuration","fontWeight","upDepth","visible","x","y","rotation","cornerRadiusBR","cornerRadiusTR","cornerRadiusBL","cornerRadiusTL","cornerRadius","textType","baseRadius","minRadius","maxRadius","initialFrames","centerStrength","manyBodyStrength","velocityDecay","linkWithStrength","showOnFrame","Infinity","topDepth","orientation","nodePadding","draggable","layoutAlgorithm","type","minWeightRatio","convergenceRatio","maxIterationCount","layer","BreadcrumbBar","Container","List","Template","Label","_new","themeTags","labels","template","get","background","RoundedRectangle","makeLabel","dataItem","label","make","_setDataItem","events","on","series","selectDataItem","push","_afterNew","_defaultThemes","_settings","_changed","isDirty","previous","_prevSettings","_disposer","event","_handleDataItem","dispose","set","children","clear","parent","addTag","moveValue","classNames","concat","className","HierarchyNode","disabled","disableDataItem","enableDataItem","_clickDisposer","_isDragging","count","node","sum","i","length","value","hierarchy","data","Map","undefined","mapChildren","objectChildren","child","childs","n","root","Node","nodes","pop","Array","from","depth","eachBefore","computeHeight","d","isArray","copyData","prototype","constructor","eachAfter","each","callback","that","index","call","next","find","sort","compare","path","end","start","ancestor","a","b","aNodes","ancestors","bNodes","c","leastCommonAncestor","k","splice","descendants","leaves","links","source","target","copy","Symbol","iterator","current","reverse","Hierarchy","Series","_tag","makeNode","childData","setRaw","nodesContainer","fields","bulletsContainer","_prepareChildren","_valuesDirty","_treeData","first","dataItems","_makeHierarchyData","_index","_rootNode","setPrivateRaw","_updateValues","_sizeDirty","_updateVisuals","_zoom","_selectDataItem","_updateNodes","hierarchyNode","_updateNode","bullets","_makeBullets","hierarchyChildren","hierarchyChild","_dataItem","getDataItemById","id","_getDataItemById","di","childDataItem","_handleBullets","bullet","_onDataClear","reset","processDataItem","_processDataItem","_makeDataItem","addChildData","dataContext","childDataField","d3HierarchyNode","getPrivate","dataValue","valuePercent","markDirtyText","updateLegendValue","d3HierarchyChild","childrenDataArray","disposeDataItem","removeValue","hideDataItem","duration","promises","hiddenState","stateAnimationEasing","easing","animate","key","to","waitForStop","hide","hideTooltip","Promise","all","showDataItem","show","maxDepth","isHidden","disabledField","applyAnimate","skipDisptach","dispatch","Math","min","inited","_currentDownDepth","currentDepth","_handleSingle","_makeBullet","bulletFunction","sprite","_positionBullet","locationX","locationY","hoverDataItem","hover","unhoverDataItem","unhover","LinkedHierarchyNode","_updateLinks","link","_onHide","_onShow","HierarchyLink","Graphics","_clear","sourceNode","targetNode","_display","moveTo","lineTo","_beforeChanged","_markDirtyKey","LinkedHierarchy","Circle","C","circles","outerCircles","circle","setPrivate","outerCircle","maxWidth","maxHeight","_handleRadiusChange","parentDataItem","linkDataItems","updateLinkWith","linkWith","linkWithDataItem","_getPoint","_animatePositions","point","fill","_setDefault","sourceLinks","lnk","targetLinks","linksContainer","_processLink","unlinkDataItems","_disposeLink","_handleUnlink","areLinked","linked","_link","_source","_target","m","initialAngle","PI","sqrt","simulation","alpha","alphaMin","alphaDecay","pow","alphaTarget","forces","stepper","timer","random","s","lcg","tick","stop","iterations","forEach","force","fx","vx","fy","vy","initializeNodes","isNaN","angle","cos","sin","initializeForce","initialize","restart","_","arguments","randomSource","name","delete","dx","dy","d2","closest","tree","xm","ym","xp","yp","right","bottom","j","leaf","x0","_x0","y0","_y0","x1","_x1","y1","_y1","_x","_y","defaultX","defaultY","quadtree","Quadtree","NaN","addAll","leaf_copy","treeProto","radii","xi","yi","ri","ri2","visitAfter","prepare","visit","apply","quad","rj","l","jiggle","constant","_nodes","_random","nodeById","nodeId","Error","strengths","distances","bias","map","initializeStrength","initializeDistance","add","cover","xz","yz","floor","z","extent","x2","y2","q","x3","y3","quads","remove","retainer","removeAll","size","ForceDirected","d3forceSimulation","_tick","updateNodePositions","restartSimulation","_updateForces","d3ForceNode","innerWidth","innerHeight","_nodesDirty","collisionForce","linkForce","_links","_updateChildren","w","max","h","pt","pl","distanceMin2","distanceMax2","theta2","accumulate","weight","abs","distanceMin","distanceMax","theta","d3node","_clearDirty","linkDatum","getDistance","getStrength","d3Nodes","d3Node","sourceDataItem","targetDataItem","_updateRadius","valueWorking","d3Link","Pack","isPrivateDirty","_updateNodesScale","packLayout","_packLayout","padding","scaleR","animatePrivate","round","partition","positionNode","Partition","rectangles","partitionLayout","_partitionLayout","rectangle","scaleX","scaleY","_makeNode","levelHeight","levelWidth","Sunburst","Slice","slices","RadialLabel","bounds","wr","left","hr","top","ir","dr","hs","slice","startAngle","endAngle","sliceStartAngle","arc","sliceInnerRadius","sliceRadius","innerRadius","_updateLabel","labelAngle","scaleDepth","defaultSeparation","nextLeft","v","t","nextRight","moveSubtree","wm","wp","shift","change","nextAncestor","vim","TreeNode","A","separation","nodeSize","treeRoot","firstWalk","secondWalk","sizeNode","tx","kx","ky","siblings","executeShifts","midpoint","vip","vop","vom","sip","sop","sim","som","apportion","Object","Tree","_hierarchyLayout","inversed","custom","ratio","squarify","row","nodeValue","sumValue","minValue","maxValue","newRatio","minRatio","beta","rows","i0","i1","dice","squarifyRatio","tile","paddingStack","paddingInner","treemap","p","paddingOuter","sums","valueOffset","valueTarget","hi","mid","valueLeft","valueRight","xk","yk","Treemap","algorithm","_treemapLayout","treemapLayout","nodePaddingOuter","visibleNodes","_getVisibleNodes","indexOf","removePrivate","_invalidateTabindexes","includedChildren","VoronoiTreemap","Polygon","polygons","voronoiTreemap","selectedDataItem","voronoi","clip","getCirclePolygon","prng","coords","polygon","coordinates","minX","maxX","len","site","points","dAngle","area","lexicographicOrder","computeUpperHullIndexes","indexes","sortedPoints","flippedPoints","upperIndexes","lowerIndexes","skipLeft","skipRight","hull","inside","xa","ya","xb","yb","perimeter","hypot","exports","d3Polygon","d3Timer","d3Dispatch","d3WeightedVoronoi","FlickeringMitigation","growthChangesLength","DEFAULT_LENGTH","totalAvailableArea","lastAreaError","lastGrowth","growthChanges","growthChangeWeights","generateGrowthChangeWeights","growthChangeWeightsSum","computeGrowthChangeWeightsSum","weightedCount","randomInitialPosition","clippingPolygon","minY","maxY","arr","voronoiMapSimulation","shouldUpdateInternals","polygonContains","halfAverageAreaInitialWeight","dataArray","siteCount","totalArea","halfAverageArea","polygonArea","d3VoronoiMapError","message","stack","parseInt","console","warn","parseFloat","areaError","secondToLastAreaError","secondToLastGrowth","unshift","weightedChangeCount","areaErrorTreshold","iterationCount","ended","DEFAULT_PRNG","DEFAULT_INITIAL_POSITION","DEFAULT_INITIAL_WEIGHT","epsilon","initialPosition","initialWeight","weightedVoronoi","flickeringMitigation","shouldInitialize","HANDLE_OVERWEIGHTED_VARIANT","HANLDE_OVERWEIGHTED_MAX_ITERATION_COUNT","handleOverweighted","sqr","squaredDistance","s0","s1","initializeSimulation","flickeringMitigationRatio","adaptedMapPoints","mapPoint","centroid","newMapPoints","originalObject","polygonCentroid","adaptPositions","currentArea","adaptRatio","adaptedWeight","flickeringInfluence","targetedArea","adaptWeights","adapt","areaErrorSum","computeAreaError","handleOverweighted0","handleOverweighted1","error","setHandleOverweighted","mapPoints","minAllowedWeight","reduce","basePoints","totalWeight","acc","bp","bps","createMapPoints","originalData","fixApplied","tpi","tpj","weightest","lightest","sqrD","fixCount","overweight","state","voronoiMapInitialPositionRandom","voronoiMapInitialPositionPie","dataArrayLength","clippingPolygonCentroid","halfIncircleRadius","angleBetweenData","_pie","vertex","distFromCurrentEdge","minDistFromEdges","edgeIndex","edgeVertex0","edgeVertex1","vDistance","computeMinDistFromEdges","xx","yy","D","len_sq","param","defineProperty","factory","noop","test","Dispatch","typename","types","T","trim","split","hasOwnProperty","args","taskHead","taskTail","timeout","interval","pokeDelay","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","f","setTimeout","clearNow","Timer","_call","_time","_next","delay","time","timerFlush","e","wake","t0","t2","t1","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","total","_restart","TypeError","d3VoronoiMap","_convenientReusableVoronoiMapSimulation","_voronoiTreemap","rootNode","recurse","cp","d3Array","epsilonesque","dot","v0","v1","linearDependent","vect","calculateCrossproduct","ConflictListNode","face","vert","nextf","prevf","nextv","prevv","ConflictList","forFace","head","Vertex","orig","isDummy","conflicts","neighbours","nonClippedPolygon","projectZ","Plane3D","p1","verts","p2","p3","Point2D","Vector","HEdge","dest","prev","twin","iFace","d3WeightedVoronoiError","Face","orient","marked","subtract","crossproduct","normal","normalize","createEdges","dualPoint","ConvexHull","facets","created","horizon","polygonClip","subject","input","intersection","closed","polygonClosed","polygonInside","polygonIntersect","isFinite","x21","x43","y21","y43","ua","getFacesOfDestVertex","edge","faces","siteOrigin","isVisibleFromBelow","cln","isEmpty","curr","getVertices","list","setWeight","equals","getNormZPlane","getDualPointMappedToPlane","nplane","negate","lenght","isHorizon","findHorizon","isEqual","origin","getDualPoint","plane3d","edges","temp","getEdge","conflict","getHorizon","removeConflict","init","boundingSites","sites","permutate","ra","currentItem","prep","v2","v3","f1","f2","f3","f0","addFacet","addConflict","addConflicts","old1","old2","fn","l1","l2","nCL","last","compute","jF","hEi","hE","_weightedVoronoi","convexHull","verticesVisited","facetCount","facet","destVertex","protopoly","lastX","lastY","polygonLength","clippedPoly","computePowerDiagramIntegrated","boundingData","direction","xExtent","yExtent","sign","p0","polygonDirection","polygonHull","delta","lo","ascending","ascendingComparator","center","ascendingBisect","bisector","bisectRight","bisectLeft","bisectCenter","number","values","valueof","array","empty","arrayify","cross","reducer","lengths","product","some","cumsum","Float64Array","variance","mean","deviation","Adder","_partials","_n","valueOf","fsum","adder","fcumsum","InternMap","entries","keyof","defineProperties","_intern","_key","intern_get","has","intern_set","intern_delete","InternSet","Set","group","keys","nest","identity","groups","rollup","rollups","unique","regroup","F","Uint32Array","permute","groupSort","ak","av","bk","bv","e10","e5","e2","ticks","tickIncrement","r0","r1","power","log","LN10","tickStep","step0","step1","nice","prestep","ceil","LN2","domain","threshold","sturges","histogram","tz","tn","bin","bins","bisect","thresholds","quickselect","exp","sd","swap","quantile","numbers","value0","subarray","quantileSorted","maxIndex","merge","arrays","flatten","minIndex","pairs","pairof","pair","range","least","defined","element","leastIndex","greatest","greatestIndex","scan","shuffler","matrix","transpose","every","filter","mapper","done","difference","others","other","disjoint","is","out","superset","o","subset","union","alea","xor128","xorwow","xorshift7","xor4096","tychei","sr","module","global","define","Alea","seed","me","mash","String","charCodeAt","s2","impl","opts","xg","int32","double","quick","XorGen","strseed","result","X","limit","pool","math","nodecrypto","startdenom","significance","overflow","mask","seedrandom","options","shortseed","mixkey","entropy","tostring","randomBytes","Uint8Array","crypto","msCrypto","getRandomValues","browser","navigator","plugins","screen","autoseed","arc4","ARC4","g","S","pass","is_math_call","keylen","obj","prop","typ","smear","stringseed","fromCharCode","ex","self","am5hierarchy"],"sourceRoot":""}